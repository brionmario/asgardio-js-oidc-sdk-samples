/*! For license information please see main.fb5b6aab.chunk.js.LICENSE.txt */
(this["webpackJsonp@asgardio/oidc-sample-react"]=this["webpackJsonp@asgardio/oidc-sample-react"]||[]).push([[0],{10:function(l,c,e){"use strict";(function(l,i,t){e.d(c,"a",(function(){return X})),e.d(c,"b",(function(){return Ec})),e.d(c,"c",(function(){return W}));var n=e(4),d=e(20),Z=e(1),a=e.n(Z),o=e(13),u=e(15),m=e(22),b=e(11),s=e(12),p=e(32),G=e(8),h=e(25);function r(l,c,e,i){return new(e||(e=Promise))((function(t,n){function d(l){try{a(i.next(l))}catch(l){n(l)}}function Z(l){try{a(i.throw(l))}catch(l){n(l)}}function a(l){var c;l.done?t(l.value):(c=l.value,c instanceof e?c:new e((function(l){l(c)}))).then(d,Z)}a((i=i.apply(l,c||[])).next())}))}var W,X,V,I={authorize:"/oauth2/authorize",jwks:"/oauth2/jwks",logout:"/oidc/logout",oidcSessionIFrame:"/oidc/checksession",revoke:"/oauth2/revoke",token:"/oauth2/token",wellKnown:"/oauth2/token/.well-known/openid-configuration"};!function(l){l.LocalStorage="localStorage",l.SessionStorage="sessionStorage",l.WebWorker="webWorker"}(W||(W={})),function(l){l.SignIn="sign-in",l.SignOut="sign-out",l.Initialize="initialize",l.HttpRequestStart="http-request-start",l.HttpRequestFinish="http-request-finish",l.HttpRequestError="http-request-error",l.HttpRequestSuccess="http-request-success",l.EndUserSession="end-user-session",l.CustomGrant="custom-grant"}(X||(X={})),function(l){l.formPost="form_post",l.query="query"}(V||(V={}));var y=function(l){return l.storage===W.WebWorker},S=function(l,c){return function(){for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];return l.apply(c,e)}},Y=Object.prototype.toString;function K(l){return"[object Array]"===Y.call(l)}function J(l){return void 0===l}function N(l){return null!==l&&"object"==typeof l}function R(l){if("[object Object]"!==Y.call(l))return!1;var c=Object.getPrototypeOf(l);return null===c||c===Object.prototype}function k(l){return"[object Function]"===Y.call(l)}function U(l,c){if(null!=l)if("object"!=typeof l&&(l=[l]),K(l))for(var e=0,i=l.length;e<i;e++)c.call(null,l[e],e,l);else for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&c.call(null,l[t],t,l)}var g={isArray:K,isArrayBuffer:function(l){return"[object ArrayBuffer]"===Y.call(l)},isBuffer:function(l){return null!==l&&!J(l)&&null!==l.constructor&&!J(l.constructor)&&"function"==typeof l.constructor.isBuffer&&l.constructor.isBuffer(l)},isFormData:function(l){return"undefined"!=typeof FormData&&l instanceof FormData},isArrayBufferView:function(l){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer&&l.buffer instanceof ArrayBuffer},isString:function(l){return"string"==typeof l},isNumber:function(l){return"number"==typeof l},isObject:N,isPlainObject:R,isUndefined:J,isDate:function(l){return"[object Date]"===Y.call(l)},isFile:function(l){return"[object File]"===Y.call(l)},isBlob:function(l){return"[object Blob]"===Y.call(l)},isFunction:k,isStream:function(l){return N(l)&&k(l.pipe)},isURLSearchParams:function(l){return"undefined"!=typeof URLSearchParams&&l instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:U,merge:function l(){var c={};function e(e,i){R(c[i])&&R(e)?c[i]=l(c[i],e):R(e)?c[i]=l({},e):K(e)?c[i]=e.slice():c[i]=e}for(var i=0,t=arguments.length;i<t;i++)U(arguments[i],e);return c},extend:function(l,c,e){return U(c,(function(c,i){l[i]=e&&"function"==typeof c?S(c,e):c})),l},trim:function(l){return l.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(l){return 65279===l.charCodeAt(0)&&(l=l.slice(1)),l}};function L(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var C=function(l,c,e){if(!c)return l;var i;if(e)i=e(c);else if(g.isURLSearchParams(c))i=c.toString();else{var t=[];g.forEach(c,(function(l,c){null!=l&&(g.isArray(l)?c+="[]":l=[l],g.forEach(l,(function(l){g.isDate(l)?l=l.toISOString():g.isObject(l)&&(l=JSON.stringify(l)),t.push(L(c)+"="+L(l))})))})),i=t.join("&")}if(i){var n=l.indexOf("#");-1!==n&&(l=l.slice(0,n)),l+=(-1===l.indexOf("?")?"?":"&")+i}return l};function v(){this.handlers=[]}v.prototype.use=function(l,c){return this.handlers.push({fulfilled:l,rejected:c}),this.handlers.length-1},v.prototype.eject=function(l){this.handlers[l]&&(this.handlers[l]=null)},v.prototype.forEach=function(l){g.forEach(this.handlers,(function(c){null!==c&&l(c)}))};var H=v,z=function(l,c,e){return g.forEach(e,(function(e){l=e(l,c)})),l},F=function(l){return!(!l||!l.__CANCEL__)},f=function(l,c){g.forEach(l,(function(e,i){i!==c&&i.toUpperCase()===c.toUpperCase()&&(l[c]=e,delete l[i])}))},T=function(l,c,e,i,t){return function(l,c,e,i,t){return l.config=c,e&&(l.code=e),l.request=i,l.response=t,l.isAxiosError=!0,l.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},l}(new Error(l),c,e,i,t)},x=g.isStandardBrowserEnv()?{write:function(l,c,e,i,t,n){var d=[];d.push(l+"="+encodeURIComponent(c)),g.isNumber(e)&&d.push("expires="+new Date(e).toGMTString()),g.isString(i)&&d.push("path="+i),g.isString(t)&&d.push("domain="+t),!0===n&&d.push("secure"),document.cookie=d.join("; ")},read:function(l){var c=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Q=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],B=g.isStandardBrowserEnv()?function(){var l,c=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function i(l){var i=l;return c&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return l=i(window.location.href),function(c){var e=g.isString(c)?i(c):c;return e.protocol===l.protocol&&e.host===l.host}}():function(){return!0},j={"Content-Type":"application/x-www-form-urlencoded"};function P(l,c){!g.isUndefined(l)&&g.isUndefined(l["Content-Type"])&&(l["Content-Type"]=c)}var w,E={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof l&&"[object process]"===Object.prototype.toString.call(l))&&(w=function(l){return new Promise((function(c,e){var i=l.data,t=l.headers;g.isFormData(i)&&delete t["Content-Type"];var n=new XMLHttpRequest;if(l.auth){var d=l.auth.username||"",Z=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";t.Authorization="Basic "+btoa(d+":"+Z)}var a,o,u=(a=l.baseURL,o=l.url,a&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(o)?function(l,c){return c?l.replace(/\/+$/,"")+"/"+c.replace(/^\/+/,""):l}(a,o):o);if(n.open(l.method.toUpperCase(),C(u,l.params,l.paramsSerializer),!0),n.timeout=l.timeout,n.onreadystatechange=function(){if(n&&4===n.readyState&&(0!==n.status||n.responseURL&&0===n.responseURL.indexOf("file:"))){var i,t,d,Z,a,o="getAllResponseHeaders"in n?(i=n.getAllResponseHeaders(),a={},i?(g.forEach(i.split("\n"),(function(l){if(Z=l.indexOf(":"),t=g.trim(l.substr(0,Z)).toLowerCase(),d=g.trim(l.substr(Z+1)),t){if(a[t]&&Q.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([d]):a[t]?a[t]+", "+d:d}})),a):a):null,u={data:l.responseType&&"text"!==l.responseType?n.response:n.responseText,status:n.status,statusText:n.statusText,headers:o,config:l,request:n};!function(l,c,e){var i=e.config.validateStatus;e.status&&i&&!i(e.status)?c(T("Request failed with status code "+e.status,e.config,null,e.request,e)):l(e)}(c,e,u),n=null}},n.onabort=function(){n&&(e(T("Request aborted",l,"ECONNABORTED",n)),n=null)},n.onerror=function(){e(T("Network Error",l,null,n)),n=null},n.ontimeout=function(){var c="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(c=l.timeoutErrorMessage),e(T(c,l,"ECONNABORTED",n)),n=null},g.isStandardBrowserEnv()){var m=(l.withCredentials||B(u))&&l.xsrfCookieName?x.read(l.xsrfCookieName):void 0;m&&(t[l.xsrfHeaderName]=m)}if("setRequestHeader"in n&&g.forEach(t,(function(l,c){void 0===i&&"content-type"===c.toLowerCase()?delete t[c]:n.setRequestHeader(c,l)})),g.isUndefined(l.withCredentials)||(n.withCredentials=!!l.withCredentials),l.responseType)try{n.responseType=l.responseType}catch(c){if("json"!==l.responseType)throw c}"function"==typeof l.onDownloadProgress&&n.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&n.upload&&n.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then((function(l){n&&(n.abort(),e(l),n=null)})),i||(i=null),n.send(i)}))}),w),transformRequest:[function(l,c){return f(c,"Accept"),f(c,"Content-Type"),g.isFormData(l)||g.isArrayBuffer(l)||g.isBuffer(l)||g.isStream(l)||g.isFile(l)||g.isBlob(l)?l:g.isArrayBufferView(l)?l.buffer:g.isURLSearchParams(l)?(P(c,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):g.isObject(l)?(P(c,"application/json;charset=utf-8"),JSON.stringify(l)):l}],transformResponse:[function(l){if("string"==typeof l)try{l=JSON.parse(l)}catch(l){}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};g.forEach(["delete","get","head"],(function(l){E.headers[l]={}})),g.forEach(["post","put","patch"],(function(l){E.headers[l]=g.merge(j)}));var O=E;function M(l){l.cancelToken&&l.cancelToken.throwIfRequested()}var D=function(l){return M(l),l.headers=l.headers||{},l.data=z(l.data,l.headers,l.transformRequest),l.headers=g.merge(l.headers.common||{},l.headers[l.method]||{},l.headers),g.forEach(["delete","get","head","post","put","patch","common"],(function(c){delete l.headers[c]})),(l.adapter||O.adapter)(l).then((function(c){return M(l),c.data=z(c.data,c.headers,l.transformResponse),c}),(function(c){return F(c)||(M(l),c&&c.response&&(c.response.data=z(c.response.data,c.response.headers,l.transformResponse))),Promise.reject(c)}))},A=function(l,c){c=c||{};var e={},i=["url","method","data"],t=["headers","auth","proxy","params"],n=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],d=["validateStatus"];function Z(l,c){return g.isPlainObject(l)&&g.isPlainObject(c)?g.merge(l,c):g.isPlainObject(c)?g.merge({},c):g.isArray(c)?c.slice():c}function a(i){g.isUndefined(c[i])?g.isUndefined(l[i])||(e[i]=Z(void 0,l[i])):e[i]=Z(l[i],c[i])}g.forEach(i,(function(l){g.isUndefined(c[l])||(e[l]=Z(void 0,c[l]))})),g.forEach(t,a),g.forEach(n,(function(i){g.isUndefined(c[i])?g.isUndefined(l[i])||(e[i]=Z(void 0,l[i])):e[i]=Z(void 0,c[i])})),g.forEach(d,(function(i){i in c?e[i]=Z(l[i],c[i]):i in l&&(e[i]=Z(void 0,l[i]))}));var o=i.concat(t).concat(n).concat(d),u=Object.keys(l).concat(Object.keys(c)).filter((function(l){return-1===o.indexOf(l)}));return g.forEach(u,a),e};function _(l){this.defaults=l,this.interceptors={request:new H,response:new H}}_.prototype.request=function(l){"string"==typeof l?(l=arguments[1]||{}).url=arguments[0]:l=l||{},(l=A(this.defaults,l)).method?l.method=l.method.toLowerCase():this.defaults.method?l.method=this.defaults.method.toLowerCase():l.method="get";var c=[D,void 0],e=Promise.resolve(l);for(this.interceptors.request.forEach((function(l){c.unshift(l.fulfilled,l.rejected)})),this.interceptors.response.forEach((function(l){c.push(l.fulfilled,l.rejected)}));c.length;)e=e.then(c.shift(),c.shift());return e},_.prototype.getUri=function(l){return l=A(this.defaults,l),C(l.url,l.params,l.paramsSerializer).replace(/^\?/,"")},g.forEach(["delete","get","head","options"],(function(l){_.prototype[l]=function(c,e){return this.request(A(e||{},{method:l,url:c,data:(e||{}).data}))}})),g.forEach(["post","put","patch"],(function(l){_.prototype[l]=function(c,e,i){return this.request(A(i||{},{method:l,url:c,data:e}))}}));var q=_;function $(l){this.message=l}$.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},$.prototype.__CANCEL__=!0;var ll=$;function cl(l){if("function"!=typeof l)throw new TypeError("executor must be a function.");var c;this.promise=new Promise((function(l){c=l}));var e=this;l((function(l){e.reason||(e.reason=new ll(l),c(e.reason))}))}cl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},cl.source=function(){var l;return{token:new cl((function(c){l=c})),cancel:l}};var el=cl;function il(l){var c=new q(l),e=S(q.prototype.request,c);return g.extend(e,q.prototype,c),g.extend(e,c),e}var tl=il(O);tl.Axios=q,tl.create=function(l){return il(A(tl.defaults,l))},tl.Cancel=ll,tl.CancelToken=el,tl.isCancel=F,tl.all=function(l){return Promise.all(l)},tl.spread=function(l){return function(c){return l.apply(null,c)}};var nl=tl,dl=tl;nl.default=dl;var Zl,al=nl,ol=Zl=function(){function l(){Object(G.a)(this,l),this.init=this.init.bind(this)}return Object(h.a)(l,[{key:"requestHandler",value:function(l){return Zl.isHandlerEnabled&&this.requestStartCallback&&"function"==typeof this.requestStartCallback&&this.requestStartCallback(l),l}},{key:"errorHandler",value:function(l){throw Zl.isHandlerEnabled&&(this.requestErrorCallback&&"function"==typeof this.requestErrorCallback&&this.requestErrorCallback(l),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),l}},{key:"successHandler",value:function(l){return Zl.isHandlerEnabled&&(this.requestSuccessCallback&&"function"==typeof this.requestSuccessCallback&&this.requestSuccessCallback(l),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),l}},{key:"init",value:function(){var l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,t=arguments.length>4?arguments[4]:void 0;Zl.isHandlerEnabled=l,this.requestStartCallback&&this.requestSuccessCallback&&this.requestErrorCallback&&this.requestFinishCallback||(this.requestStartCallback||(this.requestStartCallback=c),this.requestSuccessCallback||(this.requestSuccessCallback=e),this.requestErrorCallback||(this.requestErrorCallback=i),this.requestFinishCallback||(this.requestFinishCallback=t))}},{key:"enableHandler",value:function(){Zl.isHandlerEnabled=!0}},{key:"disableHandler",value:function(){Zl.isHandlerEnabled=!1}},{key:"disableHandlerWithTimeout",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zl.DEFAULT_HANDLER_DISABLE_TIMEOUT;Zl.isHandlerEnabled=!1,setTimeout((function(){Zl.isHandlerEnabled=!0}),l)}}],[{key:"getInstance",value:function(){var l=this;return this.axiosInstance||(this.axiosInstance=al.create({withCredentials:!0}),this.clientInstance||(this.clientInstance=new Zl),this.axiosInstance.interceptors.request.use((function(c){return l.clientInstance.requestHandler(c)})),this.axiosInstance.interceptors.response.use((function(c){return l.clientInstance.successHandler(c)}),(function(c){return l.clientInstance.errorHandler(c)})),this.axiosInstance.all=al.all,this.axiosInstance.spread=al.spread,this.axiosInstance.init=this.clientInstance.init,this.axiosInstance.enableHandler=this.clientInstance.enableHandler,this.axiosInstance.disableHandler=this.clientInstance.disableHandler,this.axiosInstance.disableHandlerWithTimeout=this.clientInstance.disableHandlerWithTimeout),this.axiosInstance}}]),l}();function ul(l,c,e){return l(e={path:c,exports:{},require:function(l,c){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==c&&e.path)}},e.exports),e.exports}ol.DEFAULT_HANDLER_DISABLE_TIMEOUT=1e3,ol=Zl=function(l,c,e,i){var t,n=arguments.length,d=n<3?c:null===i?i=Object.getOwnPropertyDescriptor(c,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(l,c,e,i);else for(var Z=l.length-1;Z>=0;Z--)(t=l[Z])&&(d=(n<3?t(d):n>3?t(c,e,d):t(c,e))||d);return n>3&&d&&Object.defineProperty(c,e,d),d}([function(l){}],ol),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof i||"undefined"!=typeof self&&self;var ml=ul((function(l,c){var e;l.exports=e=e||function(l,c){var e=Object.create||function(){function l(){}return function(c){var e;return l.prototype=c,e=new l,l.prototype=null,e}}(),i={},t=i.lib={},n=t.Base={extend:function(l){var c=e(this);return l&&c.mixIn(l),c.hasOwnProperty("init")&&this.init!==c.init||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var l=this.extend();return l.init.apply(l,arguments),l},init:function(){},mixIn:function(l){for(var c in l)l.hasOwnProperty(c)&&(this[c]=l[c]);l.hasOwnProperty("toString")&&(this.toString=l.toString)},clone:function(){return this.init.prototype.extend(this)}},d=t.WordArray=n.extend({init:function(l,c){l=this.words=l||[],this.sigBytes=void 0!=c?c:4*l.length},toString:function(l){return(l||a).stringify(this)},concat:function(l){var c=this.words,e=l.words,i=this.sigBytes,t=l.sigBytes;if(this.clamp(),i%4)for(var n=0;n<t;n++){var d=e[n>>>2]>>>24-n%4*8&255;c[i+n>>>2]|=d<<24-(i+n)%4*8}else for(n=0;n<t;n+=4)c[i+n>>>2]=e[n>>>2];return this.sigBytes+=t,this},clamp:function(){var c=this.words,e=this.sigBytes;c[e>>>2]&=4294967295<<32-e%4*8,c.length=l.ceil(e/4)},clone:function(){var l=n.clone.call(this);return l.words=this.words.slice(0),l},random:function(c){for(var e,i=[],t=function(c){c=c;var e=987654321,i=4294967295;return function(){var t=((e=36969*(65535&e)+(e>>16)&i)<<16)+(c=18e3*(65535&c)+(c>>16)&i)&i;return t/=4294967296,(t+=.5)*(l.random()>.5?1:-1)}},n=0;n<c;n+=4){var Z=t(4294967296*(e||l.random()));e=987654071*Z(),i.push(4294967296*Z()|0)}return new d.init(i,c)}}),Z=i.enc={},a=Z.Hex={stringify:function(l){for(var c=l.words,e=l.sigBytes,i=[],t=0;t<e;t++){var n=c[t>>>2]>>>24-t%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(l){for(var c=l.length,e=[],i=0;i<c;i+=2)e[i>>>3]|=parseInt(l.substr(i,2),16)<<24-i%8*4;return new d.init(e,c/2)}},o=Z.Latin1={stringify:function(l){for(var c=l.words,e=l.sigBytes,i=[],t=0;t<e;t++){var n=c[t>>>2]>>>24-t%4*8&255;i.push(String.fromCharCode(n))}return i.join("")},parse:function(l){for(var c=l.length,e=[],i=0;i<c;i++)e[i>>>2]|=(255&l.charCodeAt(i))<<24-i%4*8;return new d.init(e,c)}},u=Z.Utf8={stringify:function(l){try{return decodeURIComponent(escape(o.stringify(l)))}catch(l){throw new Error("Malformed UTF-8 data")}},parse:function(l){return o.parse(unescape(encodeURIComponent(l)))}},m=t.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(l){"string"==typeof l&&(l=u.parse(l)),this._data.concat(l),this._nDataBytes+=l.sigBytes},_process:function(c){var e=this._data,i=e.words,t=e.sigBytes,n=this.blockSize,Z=t/(4*n),a=(Z=c?l.ceil(Z):l.max((0|Z)-this._minBufferSize,0))*n,o=l.min(4*a,t);if(a){for(var u=0;u<a;u+=n)this._doProcessBlock(i,u);var m=i.splice(0,a);e.sigBytes-=o}return new d.init(m,o)},clone:function(){var l=n.clone.call(this);return l._data=this._data.clone(),l},_minBufferSize:0}),b=(t.Hasher=m.extend({cfg:n.extend(),init:function(l){this.cfg=this.cfg.extend(l),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(l){return this._append(l),this._process(),this},finalize:function(l){return l&&this._append(l),this._doFinalize()},blockSize:16,_createHelper:function(l){return function(c,e){return new l.init(e).finalize(c)}},_createHmacHelper:function(l){return function(c,e){return new b.HMAC.init(l,e).finalize(c)}}}),i.algo={});return i}(Math)})),bl=ul((function(l,c){var e;l.exports=(e=ml,function(){var l=e,c=l.lib.WordArray;function i(l,e,i){for(var t=[],n=0,d=0;d<e;d++)if(d%4){var Z=i[l.charCodeAt(d-1)]<<d%4*2,a=i[l.charCodeAt(d)]>>>6-d%4*2;t[n>>>2]|=(Z|a)<<24-n%4*8,n++}return c.create(t,n)}l.enc.Base64={stringify:function(l){var c=l.words,e=l.sigBytes,i=this._map;l.clamp();for(var t=[],n=0;n<e;n+=3)for(var d=(c[n>>>2]>>>24-n%4*8&255)<<16|(c[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|c[n+2>>>2]>>>24-(n+2)%4*8&255,Z=0;Z<4&&n+.75*Z<e;Z++)t.push(i.charAt(d>>>6*(3-Z)&63));var a=i.charAt(64);if(a)for(;t.length%4;)t.push(a);return t.join("")},parse:function(l){var c=l.length,e=this._map,t=this._reverseMap;if(!t){t=this._reverseMap=[];for(var n=0;n<e.length;n++)t[e.charCodeAt(n)]=n}var d=e.charAt(64);if(d){var Z=l.indexOf(d);-1!==Z&&(c=Z)}return i(l,c,t)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)})),sl=ul((function(l,c){var e;l.exports=(e=ml,function(){if("function"==typeof ArrayBuffer){var l=e.lib.WordArray,c=l.init;(l.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var e=l.byteLength,i=[],t=0;t<e;t++)i[t>>>2]|=l[t]<<24-t%4*8;c.call(this,i,e)}else c.apply(this,arguments)}).prototype=l}}(),e.lib.WordArray)})),pl=ul((function(l,c){var e;l.exports=(e=ml,function(l){var c=e,i=c.lib,t=i.WordArray,n=i.Hasher,d=c.algo,Z=[],a=[];!function(){function c(c){for(var e=l.sqrt(c),i=2;i<=e;i++)if(!(c%i))return!1;return!0}function e(l){return 4294967296*(l-(0|l))|0}for(var i=2,t=0;t<64;)c(i)&&(t<8&&(Z[t]=e(l.pow(i,.5))),a[t]=e(l.pow(i,1/3)),t++),i++}();var o=[],u=d.SHA256=n.extend({_doReset:function(){this._hash=new t.init(Z.slice(0))},_doProcessBlock:function(l,c){for(var e=this._hash.words,i=e[0],t=e[1],n=e[2],d=e[3],Z=e[4],u=e[5],m=e[6],b=e[7],s=0;s<64;s++){if(s<16)o[s]=0|l[c+s];else{var p=o[s-15],G=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,h=o[s-2],r=(h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10;o[s]=G+o[s-7]+r+o[s-16]}var W=i&t^i&n^t&n,X=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),V=b+((Z<<26|Z>>>6)^(Z<<21|Z>>>11)^(Z<<7|Z>>>25))+(Z&u^~Z&m)+a[s]+o[s];b=m,m=u,u=Z,Z=d+V|0,d=n,n=t,t=i,i=V+(X+W)|0}e[0]=e[0]+i|0,e[1]=e[1]+t|0,e[2]=e[2]+n|0,e[3]=e[3]+d|0,e[4]=e[4]+Z|0,e[5]=e[5]+u|0,e[6]=e[6]+m|0,e[7]=e[7]+b|0},_doFinalize:function(){var c=this._data,e=c.words,i=8*this._nDataBytes,t=8*c.sigBytes;return e[t>>>5]|=128<<24-t%32,e[14+(t+64>>>9<<4)]=l.floor(i/4294967296),e[15+(t+64>>>9<<4)]=i,c.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var l=n.clone.call(this);return l._hash=this._hash.clone(),l}});c.SHA256=n._createHelper(u),c.HmacSHA256=n._createHmacHelper(u)}(Math),e.SHA256)})),Gl=new TextEncoder,hl=new TextDecoder,rl=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw new Error("unable to locate global object")}(),Wl=function(l){var c=l;return c instanceof Uint8Array&&(c=hl.decode(c)),c=c.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,""),new Uint8Array(rl.atob(c).split("").map((function(l){return l.charCodeAt(0)})))},Xl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(l){var i;return Object(G.a)(this,e),(i=c.call(this,l)).code="ERR_JOSE_GENERIC",i.name=i.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(Object(m.a)(i),i.constructor),i}return e}(Object(p.a)(Error)),Vl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(l){var i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";return Object(G.a)(this,e),(i=c.call(this,l)).code="ERR_JWT_CLAIM_VALIDATION_FAILED",i.claim=t,i.reason=n,i}return e}(Xl),Il=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(){var l;return Object(G.a)(this,e),(l=c.apply(this,arguments)).code="ERR_JOSE_ALG_NOT_ALLOWED",l}return e}(Xl),yl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(){var l;return Object(G.a)(this,e),(l=c.apply(this,arguments)).code="ERR_JOSE_NOT_SUPPORTED",l}return e}(Xl),Sl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(){var l;return Object(G.a)(this,e),(l=c.apply(this,arguments)).code="ERR_JWS_INVALID",l}return e}(Xl),Yl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(){var l;return Object(G.a)(this,e),(l=c.apply(this,arguments)).code="ERR_JWT_INVALID",l}return e}(Xl),Kl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(){var l;return Object(G.a)(this,e),(l=c.apply(this,arguments)).code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",l.message="signature verification failed",l}return e}(Xl),Jl=function(l){Object(b.a)(e,l);var c=Object(s.a)(e);function e(){var l;return Object(G.a)(this,e),(l=c.apply(this,arguments)).code="ERR_JWT_EXPIRED",l}return e}(Vl),Nl=rl.crypto;function Rl(){if(!rl.isSecureContext&&!rl.crypto.subtle)throw new Xl("Web Cryptography API is available only in Secure Contexts. See: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts")}var kl=function(){var l=Object(u.a)(a.a.mark((function l(c){var e,i,t,n,d,Z,u;return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=function(l){var c,e;switch(l.kty){case"oct":switch(l.alg){case"HS256":case"HS384":case"HS512":c={name:"HMAC",hash:"SHA-".concat(l.alg.substr(-3))},e=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new yl("".concat(l.alg," keys cannot be imported as CryptoKey instances"));case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":c={name:"AES-GCM"},e=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":c={name:"AES-KW"},e=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":c={name:"PBKDF2"},e=["deriveBits"];break;default:throw new yl('unsupported or invalid JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(l.alg){case"PS256":case"PS384":case"PS512":c={name:"RSA-PSS",hash:"SHA-".concat(l.alg.substr(-3))},e=l.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":c={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(l.alg.substr(-3))},e=l.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":c={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(l.alg.substr(-3),10)||1)},e=l.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new yl('unsupported or invalid JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(l.alg){case"ES256":case"ES384":case"ES512":c={name:"ECDSA",namedCurve:l.crv},e=l.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":c={name:"ECDH",namedCurve:l.crv},e=l.d?["deriveBits"]:[];break;default:throw new yl('unsupported or invalid JWK "alg" (Algorithm) Parameter value')}break;default:throw new yl('unsupported or invalid JWK "kty" (Key Type) Parameter value')}return{algorithm:c,keyUsages:e}}(c),n=t.algorithm,d=t.keyUsages,Z="jwk",u=Object(o.a)({},c),l.abrupt("return",(delete u.alg,"PBKDF2"===n.name&&(Z="raw",u=Wl(c.k)),Rl(),Nl.subtle.importKey(Z,u,n,null!==(e=c.ext)&&void 0!==e&&e,null!==(i=c.key_ops)&&void 0!==i?i:d)));case 3:case"end":return l.stop()}}),l)})));return function(c){return l.apply(this,arguments)}}();function Ul(l){return!!l&&l.constructor===Object}function gl(l,c,e){return Ll.apply(this,arguments)}function Ll(){return(Ll=Object(u.a)(a.a.mark((function l(c,e,i){return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(Ul(c)){l.next=2;break}throw new TypeError("JWK must be an object");case 2:if(e||(e=c.alg),"string"==typeof e&&e){l.next=4;break}throw new TypeError('"alg" argument is required when "jwk.alg" is not present');case 4:l.t0=c.kty,l.next="oct"===l.t0?7:"RSA"===l.t0?10:"EC"===l.t0||"OKP"===l.t0?12:13;break;case 7:if("string"==typeof c.k&&c.k){l.next=9;break}throw new TypeError('missing "k" (Key Value) Parameter value');case 9:return l.abrupt("return",(null!=i||(i=!0!==c.ext),i?kl(Object(o.a)(Object(o.a)({},c),{},{alg:e,ext:!1})):Wl(c.k)));case 10:if(void 0===c.oth){l.next=12;break}throw new yl('RSA JWK "oth" (Other Primes Info) Parameter value is unsupported');case 12:return l.abrupt("return",kl(Object(o.a)(Object(o.a)({},c),{},{alg:e})));case 13:throw new yl('unsupported "kty" (Key Type) Parameter value');case 14:case"end":return l.stop()}}),l)})))).apply(this,arguments)}var Cl=function(){var l=Object(u.a)(a.a.mark((function l(c,e,i,t){var n;return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(Rl(),!(e instanceof Uint8Array)){l.next=8;break}if(c.startsWith("HS")){l.next=3;break}throw new TypeError("symmetric keys are only applicable for HMAC-based algorithms");case 3:return l.next=5,Nl.subtle.importKey("raw",e,{hash:"SHA-".concat(c.substr(-3)),name:"HMAC"},!1,["verify"]);case 5:n=l.sent,l.next=9;break;case 8:n=e;case 9:return l.abrupt("return",(function(l,c){if(l.startsWith("HS")){var e=parseInt(l.substr(-3),10),i=c.algorithm.length;if("number"!=typeof i||i<e)throw new TypeError("".concat(l," requires symmetric keys to be ").concat(e," bits or larger"))}if(l.startsWith("RS")||l.startsWith("PS")){var t=c.algorithm.modulusLength;if("number"!=typeof t||t<2048)throw new TypeError("".concat(l," requires key modulusLength to be 2048 bits or larger"))}}(c,n),Nl.subtle.verify(function(l){switch(l){case"HS256":return{hash:"SHA-256",name:"HMAC"};case"HS384":return{hash:"SHA-384",name:"HMAC"};case"HS512":return{hash:"SHA-512",name:"HMAC"};case"PS256":return{hash:"SHA-256",name:"RSA-PSS",saltLength:32};case"PS384":return{hash:"SHA-384",name:"RSA-PSS",saltLength:48};case"PS512":return{hash:"SHA-512",name:"RSA-PSS",saltLength:64};case"RS256":return{hash:"SHA-256",name:"RSASSA-PKCS1-v1_5"};case"RS384":return{hash:"SHA-384",name:"RSASSA-PKCS1-v1_5"};case"RS512":return{hash:"SHA-512",name:"RSASSA-PKCS1-v1_5"};case"ES256":return{hash:"SHA-256",name:"ECDSA",namedCurve:"P-256"};case"ES384":return{hash:"SHA-384",name:"ECDSA",namedCurve:"P-384"};case"ES512":return{hash:"SHA-512",name:"ECDSA",namedCurve:"P-521"};default:throw new yl("alg ".concat(l," is unsupported either by JOSE or your javascript runtime"))}}(c),n,i,t)));case 10:case"end":return l.stop()}}),l)})));return function(c,e,i,t){return l.apply(this,arguments)}}(),vl=function(l,c,e,i){if(void 0!==i.crit&&void 0===e.crit)throw new l('"crit" (Critical) Header Parameter MUST be integrity protected');if(!e||void 0===e.crit)return new Set;if(!Array.isArray(e.crit)||0===e.crit.length||e.crit.some((function(l){return"string"!=typeof l||0===l.length})))throw new l('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');var t,n=Object(d.a)(e.crit);try{for(n.s();!(t=n.n()).done;){var Z=t.value;if(!c.has(Z))throw new yl('Extension Header Parameter "'.concat(Z,'" is not supported by this implementation'));if(void 0===i[Z])throw new l('Extension Header Parameter "'.concat(Z,'" is missing'));if(c.get(Z)&&void 0===e[Z])throw new l('Extension Header Parameter "'.concat(Z,'" MUST be integrity protected'))}}catch(a){n.e(a)}finally{n.f()}return new Set(e.crit)}.bind(void 0,Sl,new Map([["b64",!0]])),Hl=function(l,c){if(void 0!==c&&(!Array.isArray(c)||c.some((function(l){return"string"!=typeof l}))))throw new TypeError('"'.concat(l,'" option must be an array of strings'));if(c)return new Set(c)}.bind(void 0,"algorithms");function zl(l,c,e){return Fl.apply(this,arguments)}function Fl(){return(Fl=Object(u.a)(a.a.mark((function l(c,e,i){var t,n,Z,u,m,b,s,p,G,h;return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(Ul(c)){l.next=2;break}throw new Sl("Flattened JWS must be an object");case 2:if(void 0!==c.protected||void 0!==c.header){l.next=4;break}throw new Sl('Flattened JWS must have either of the "protected" or "header" members');case 4:if(void 0===c.protected||"string"==typeof c.protected){l.next=6;break}throw new Sl("JWS Protected Header incorrect type");case 6:if(void 0!==c.payload){l.next=8;break}throw new Sl("JWS Payload missing");case 8:if("string"==typeof c.signature){l.next=10;break}throw new Sl("JWS Signature missing or incorrect type");case 10:if(void 0===c.header||Ul(c.header)){l.next=12;break}throw new Sl("JWS Unprotected Header incorrect type");case 12:if(t={},c.protected&&(n=Wl(c.protected),t=JSON.parse(hl.decode(n))),function(){for(var l=arguments.length,c=new Array(l),e=0;e<l;e++)c[e]=arguments[e];var i,t=c.filter(Boolean);if(0===t.length||1===t.length)return!0;var n,Z=Object(d.a)(t);try{for(Z.s();!(n=Z.n()).done;){var a=n.value,o=Object.keys(a);if(i&&0!==i.size){var u,m=Object(d.a)(o);try{for(m.s();!(u=m.n()).done;){var b=u.value;if(i.has(b))return!1;i.add(b)}}catch(s){m.e(s)}finally{m.f()}}else i=new Set(o)}}catch(s){Z.e(s)}finally{Z.f()}return!0}(t,c.header)){l.next=16;break}throw new Sl("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 16:if(Z=Object(o.a)(Object(o.a)({},t),c.header),u=!0,!vl(t,Z).has("b64")||"boolean"==typeof(u=t.b64)){l.next=20;break}throw new Sl('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 20:if("string"==typeof(m=Z.alg)&&m){l.next=23;break}throw new Sl('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 23:if(!(b=i&&Hl(i.algorithms))||b.has(m)){l.next=26;break}throw new Il('"alg" (Algorithm) Header Parameter not allowed');case 26:if(!u){l.next=31;break}if("string"==typeof c.payload){l.next=29;break}throw new Sl("JWS Payload must be a string");case 29:l.next=33;break;case 31:if("string"==typeof c.payload||c.payload instanceof Uint8Array){l.next=33;break}throw new Sl("JWS Payload must be a string or an Uint8Array instance");case 33:if(l.t0="function"==typeof e,!l.t0){l.next=38;break}return l.next=37,e(t,c);case 37:e=l.sent;case 38:return function(l,c){if(l.startsWith("HS")||"dir"===l||l.startsWith("PBES2")||l.match(/^A\d{3}(?:GCM)KW$/)){if(c instanceof Uint8Array||"secret"===c.type)return;throw new TypeError('CryptoKey or KeyObject instances for symmetric algorithms must be of type "secret"')}if(c instanceof Uint8Array)throw new TypeError("CryptoKey or KeyObject instances must be used for asymmetric algorithms");if("secret"===c.type)throw new TypeError('CryptoKey or KeyObject instances for asymmetric algorithms must not be of type "secret"')}(m,e),s=function(){for(var l=arguments.length,c=new Array(l),e=0;e<l;e++)c[e]=arguments[e];var i=c.reduce((function(l,c){return l+c.length}),0),t=new Uint8Array(i),n=0;return c.forEach((function(l){t.set(l,n),n+=l.length})),t}(Gl.encode(c.protected||""),Gl.encode("."),"string"==typeof c.payload?Gl.encode(c.payload):c.payload),p=Wl(c.signature),l.next=42,Cl(m,e,p,s);case 42:if(l.sent){l.next=44;break}throw new Kl;case 44:return G=u?Wl(c.payload):"string"==typeof c.payload?Gl.encode(c.payload):c.payload,h={payload:G},l.abrupt("return",(void 0!==c.protected&&(h.protectedHeader=t),void 0!==c.header&&(h.unprotectedHeader=c.header),h));case 47:case"end":return l.stop()}}),l)})))).apply(this,arguments)}var fl=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,Tl=function(l){var c=fl.exec(l);if(!c)throw new TypeError("invalid time period format");var e=parseFloat(c[1]);switch(c[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(e);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*e);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*e);case"day":case"days":case"d":return Math.round(86400*e);case"week":case"weeks":case"w":return Math.round(604800*e);default:return Math.round(31557600*e)}},xl=function(l){return l.toLowerCase().replace(/^application\//,"")},Ql=function(l,c){var e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=i.typ;if(t&&("string"!=typeof l.typ||xl(l.typ)!==xl(t)))throw new Vl('unexpected "typ" JWT header value',"typ","check_failed");try{e=JSON.parse(hl.decode(c))}catch(l){}if("object"!=typeof e||!e||Array.isArray(e))throw new Yl("JWT Claims Set must be a top-level JSON object");var n=i.issuer;if(n&&!("string"==typeof n?[n]:n).includes(e.iss))throw new Vl('unexpected "iss" claim value',"iss","check_failed");var d=i.subject;if(d&&e.sub!==d)throw new Vl('unexpected "sub" claim value',"sub","check_failed");var Z,a,o,u=i.audience;if(u&&(a="string"==typeof u?[u]:u,!("string"==typeof(Z=e.aud)?a.includes(Z):a.some(Set.prototype.has.bind(new Set(Z))))))throw new Vl('unexpected "aud" claim value',"aud","check_failed");switch(typeof i.clockTolerance){case"string":o=Tl(i.clockTolerance);break;case"number":o=i.clockTolerance;break;case"undefined":o=0;break;default:throw new TypeError("invalid clockTolerance option type")}var m,b=i.currentDate,s=(m=b||new Date,Math.floor(m.getTime()/1e3));if(void 0!==e.iat||i.maxTokenAge){if("number"!=typeof e.iat)throw new Vl('"iat" claim must be a number',"iat","invalid");if(void 0===e.exp&&e.iat>s+o)throw new Vl('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}if(void 0!==e.nbf){if("number"!=typeof e.nbf)throw new Vl('"nbf" claim must be a number',"nbf","invalid");if(e.nbf>s+o)throw new Vl('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==e.exp){if("number"!=typeof e.exp)throw new Vl('"exp" claim must be a number',"exp","invalid");if(e.exp<=s-o)throw new Jl('"exp" claim timestamp check failed',"exp","check_failed")}if(i.maxTokenAge){var p=s-e.iat;if(p-o>("number"==typeof i.maxTokenAge?i.maxTokenAge:Tl(i.maxTokenAge)))throw new Jl('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(p<0-o)throw new Vl('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return e};function Bl(){return(Bl=Object(u.a)(a.a.mark((function l(c,e,i){var t;return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,function(){var l=Object(u.a)(a.a.mark((function l(c,e,i){var t,n,d,Z,o;return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(c instanceof Uint8Array&&(c=hl.decode(c)),"string"==typeof c){l.next=2;break}throw new Sl("Compact JWS must be a string or Uint8Array");case 2:if(t=c.split("."),n=t[0],d=t[1],Z=t[2],3===t.length){l.next=5;break}throw new Sl("Invalid Compact JWS");case 5:return l.next=7,zl({payload:d||void 0,protected:n||void 0,signature:Z||void 0},e,i);case 7:return o=l.sent,l.abrupt("return",{payload:o.payload,protectedHeader:o.protectedHeader});case 9:case"end":return l.stop()}}),l)})));return function(c,e,i){return l.apply(this,arguments)}}()(c,e,i);case 2:return t=l.sent,l.abrupt("return",{payload:Ql(t.protectedHeader,t.payload,i),protectedHeader:t.protectedHeader});case 4:case"end":return l.stop()}}),l)})))).apply(this,arguments)}var jl=function(l){return bl.stringify(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},Pl=function(l){return{blob:(null==l?void 0:l.data)instanceof Blob?null==l?void 0:l.data:null,data:JSON.stringify(null!=l?l:""),success:!0}},wl=function(l){return(null==l?void 0:l.toJSON)&&delete l.toJSON,{error:JSON.stringify(null!=l?l:""),success:!1}};function El(l){if(l&&y(l)){if(l.session.get("code"))return l.session.get("code")}else{if(l&&l.responseMode===V.formPost)return l.authorizationCode;if(new URL(window.location.href).searchParams.get("code"))return new URL(window.location.href).searchParams.get("code")}return null}function Ol(l,c){var e=Kc(l);if(!e||0===e.trim().length)return Promise.reject(new Error("Invalid authorize endpoint found."));var i=e+"?response_type=code&client_id="+l.clientID,t="openid";if(l.scope&&l.scope.length>0&&(l.scope.includes("openid")||l.scope.push("openid"),t=l.scope.join(" ")),i+="&scope="+t,i+="&redirect_uri="+l.signInRedirectURL,l.responseMode&&(i+="&response_mode="+l.responseMode),l.enablePKCE){var d=jl(sl.random(32)),Z=jl(pl(d));nc("pkce_code_verifier",d,l),i+="&code_challenge_method=S256&code_challenge="+Z}l.prompt&&(i+="&prompt="+l.prompt),c&&(i+="&fidp="+c);var a=l.customParams;if(a)for(var o=0,u=Object.entries(a);o<u.length;o++){var m=Object(n.a)(u[o],2),b=m[0],s=m[1];""!=b&&""!=s&&(i+="&"+b+"="+s)}if(l.storage===W.WebWorker)return Promise.resolve({code:i,pkce:dc("pkce_code_verifier",l),type:"auth-required"});document.location.href=i}function Ml(l,c){var e=Uc(c);return e&&0!==e.trim().length?al.get(e).then((function(i){if(200!==i.status)return Promise.reject(new Error("Failed to load public keys from JWKS URI: "+e));var t=gc(c),n=c.serverOrigin+I.wellKnown.split("/.well-known")[0];return t&&t===n?function(l,c){var e,i=JSON.parse(atob(l)),t=Object(d.a)(c);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(i.kid===n.kid)return gl({alg:n.alg,e:n.e,kty:n.kty,n:n.n})}}catch(Z){t.e(Z)}finally{t.f()}return Promise.reject("Failed to find the 'kid' specified in the id_token. 'kid' found in the header : "+i.kid+", Expected values: "+c.map((function(l){return l.kid})).join(", "))}(l.split(".")[0],i.data.keys).then((function(e){return function(l,c,e,i,t){return function(l,c,e){return Bl.apply(this,arguments)}(l,c,{algorithms:["RS256","RS512","RS384","PS256"],audience:e,clockTolerance:60,issuer:i,subject:t}).then((function(){return Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)}))}(l,e,c.clientID,t,_l(l).username)})).catch((function(l){return Promise.reject(l)})):Promise.resolve(!1)})).catch((function(l){return Promise.reject(l)})):Promise.reject("Invalid JWKS URI found.")}function Dl(l,c){var e=Jc(l);if(!e||0===e.trim().length)return Promise.reject("Invalid token endpoint found.");var i=[];return i.push("client_id=".concat(l.clientID)),i.push("refresh_token=".concat(c)),i.push("grant_type=refresh_token"),l.clientSecret&&l.clientSecret.trim().length>0&&i.push("client_secret=".concat(l.clientSecret)),al.post(e,i.join("&"),{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then((function(c){if(200!==c.status)return Promise.reject(new Error("Invalid status code received in the refresh token response: "+c.status));if(l.validateIDToken)return Ml(c.data.id_token,l).then((function(e){if(e){var i={accessToken:c.data.access_token,expiresIn:c.data.expires_in,idToken:c.data.id_token,refreshToken:c.data.refresh_token,scope:c.data.scope,tokenType:c.data.token_type};return ac(i,_l(c.data.id_token),l),Promise.resolve(i)}return Promise.reject("Invalid id_token in the token response: "+c.data.id_token)}));var e={accessToken:c.data.access_token,expiresIn:c.data.expires_in,idToken:c.data.id_token,refreshToken:c.data.refresh_token,scope:c.data.scope,tokenType:c.data.token_type};return ac(e,_l(c.data.id_token),l),Promise.resolve(e)})).catch((function(l){return Promise.reject(l)}))}function Al(l,c){var e=Nc(l);if(!e||0===e.trim().length)return Promise.reject("Invalid revoke token endpoint found.");var i=[];return i.push("client_id=".concat(l.clientID)),i.push("token=".concat(c)),i.push("token_type_hint=access_token"),al.post(e,i.join("&"),{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then((function(l){return 200!==l.status?Promise.reject(new Error("Invalid status code received in the revoke token response: "+l.status)):Promise.resolve(l)})).catch((function(l){return Promise.reject(l)}))}var _l=function(l){var c=JSON.parse(atob(null==l?void 0:l.split(".")[1])),e=c.email?c.email:null,i=function(l){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@";if(l.tenant_domain)return l.tenant_domain;var e=l.sub.split(c);return e[e.length-1]}(c);return{displayName:c.preferred_username?c.preferred_username:c.sub,email:e,tenantDomain:i,username:c.sub}};function ql(l,c){return function(l){return!!El(l)}(l)?function(l){var c=Jc(l);if(!c||0===c.trim().length)return Promise.reject(new Error("Invalid token endpoint found."));var e=y(l)?l.session.get("session_state"):new URL(window.location.href).searchParams.get("session_state");null!==e&&e.length>0&&nc("session_state",e,l);var i=[];i.push("client_id=".concat(l.clientID)),l.clientSecret&&l.clientSecret.trim().length>0&&i.push("client_secret=".concat(l.clientSecret));var t=y(l)?l.session.get("code"):El(l);return i.push("code=".concat(t)),l.storage===W.SessionStorage&&window.sessionStorage.getItem("code")&&window.sessionStorage.removeItem("code"),y(l)&&l.session.get("code")&&l.session.delete("code"),i.push("grant_type=authorization_code"),i.push("redirect_uri=".concat(l.signInRedirectURL)),l.enablePKCE&&(i.push("code_verifier=".concat(dc("pkce_code_verifier",l))),tc("pkce_code_verifier",l)),al.post(c,i.join("&"),{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then((function(c){if(200!==c.status)return Promise.reject(new Error("Invalid status code received in the token response: "+c.status));if(l.validateIDToken)return Ml(c.data.id_token,l).then((function(e){if(e){nc("request_params",JSON.stringify(l),l);var i={accessToken:c.data.access_token,expiresIn:c.data.expires_in,idToken:c.data.id_token,refreshToken:c.data.refresh_token,scope:c.data.scope,tokenType:c.data.token_type};return Promise.resolve(i)}return Promise.reject("Invalid id_token in the token response: "+c.data.id_token)})).catch((function(l){return Promise.reject(l)}));var e={accessToken:c.data.access_token,expiresIn:c.data.expires_in,idToken:c.data.id_token,refreshToken:c.data.refresh_token,scope:c.data.scope,tokenType:c.data.token_type};return nc("request_params",JSON.stringify(l),l),Promise.resolve(e)})).catch((function(l){return Promise.reject(l)}))}(l).then((function(c){return ac(c,_l(c.idToken),l),Promise.resolve({type:"signed-in"})})).catch((function(c){return c.response&&400===c.response.status?Ol(l):Promise.reject(c)})):Ol(l,c)}function $l(l,c){return dc("access_token",l)?Cc(l)?Promise.resolve({type:"signed-in"}):(Zc(l),Sc(l),tc("auth_callback_url",l),yc(l,!0).then((function(){return ql(l,c)})).catch((function(l){return Promise.reject(l)}))):yc(l,!1).then((function(){return ql(l,c)})).catch((function(l){return Promise.reject(l)}))}var lc=function(l,c){if(!dc("token_endpoint",c)||0===dc("token_endpoint",c).trim().length)return Promise.reject(new Error("Invalid token endpoint found."));var e="";Object.entries(l.data).map((function(i,t){var d=Object(n.a)(i,2),Z=d[0],a=function(l,c){var e="openid";return c.scope&&c.scope.length>0&&(c.scope.includes("openid")||c.scope.push("openid"),e=c.scope.join(" ")),l.replace("{{token}}",dc("access_token",c)).replace("{{username}}",dc("username",c)).replace("{{scope}}",e).replace("{{clientId}}",c.clientID).replace("{{clientSecret}}",c.clientSecret)}(d[1],c);e+="".concat(Z,"=").concat(a).concat(t!==Object.entries(l.data).length-1?"&":"")}));var i={data:e,headers:Object.assign({},{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),method:"POST",url:dc("token_endpoint",c)};return l.attachToken&&(i.headers=Object.assign(Object.assign({},i.headers),{Authorization:"Bearer ".concat(dc("access_token",c))})),al(i).then((function(e){if(200!==e.status)return Promise.reject(new Error("Invalid status code received in the token response: "+e.status));if(l.returnsSession){if(c.validateIDToken)return Ml(e.data.id_token,c).then((function(i){if(i){var t={accessToken:e.data.access_token,expiresIn:e.data.expires_in,idToken:e.data.id_token,refreshToken:e.data.refresh_token,scope:e.data.scope,tokenType:e.data.token_type};return ac(t,_l(t.idToken),c),l.returnResponse?Promise.resolve({data:cc(c),type:"signed-in"}):Promise.resolve(!0)}return Promise.reject(new Error("Invalid id_token in the token response: "+e.data.id_token))}));var i={accessToken:e.data.access_token,expiresIn:e.data.expires_in,idToken:e.data.id_token,refreshToken:e.data.refresh_token,scope:e.data.scope,tokenType:e.data.token_type};return ac(i,_l(i.idToken),c),l.returnResponse?Promise.resolve({data:cc(c),type:"signed-in"}):Promise.resolve(!0)}return l.returnResponse?Promise.resolve(e):Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)}))},cc=function(l){return{allowedScopes:dc("scope",l),displayName:dc("display_name",l),email:dc("email",l),sessionState:dc("session_state",l),tenantDomain:dc("tenant_domain",l),username:dc("username",l)}},ec=function(l){var c=dc("id_token",l);return JSON.parse(atob(c.split(".")[1]))},ic=new(function(){function c(l){Object(G.a)(this,c),this.tasks=[],this.count=l}return Object(h.a)(c,[{key:"sched",value:function(){if(this.count>0&&this.tasks.length>0){this.count--;var l=this.tasks.shift();if(void 0===l)throw"Unexpected undefined value in tasks list";l()}}},{key:"acquire",value:function(){var c=this;return new Promise((function(e,i){c.tasks.push((function(){var l=!1;e((function(){l||(l=!0,c.count++,c.sched())}))})),l&&l.nextTick?l.nextTick(c.sched.bind(c)):t(c.sched.bind(c))}))}},{key:"use",value:function(l){return this.acquire().then((function(c){return l().then((function(l){return c(),l})).catch((function(l){throw c(),l}))}))}}]),c}())(1);function tc(l,c){switch(c.storage){case W.WebWorker:c.session.delete(l);break;case W.SessionStorage:sessionStorage.removeItem(l);break;case W.LocalStorage:localStorage.removeItem(l);break;default:sessionStorage.removeItem(l)}}function nc(l,c,e){switch(e.storage){case W.WebWorker:e.session.set(l,c);break;case W.SessionStorage:sessionStorage.setItem(l,c);break;case W.LocalStorage:localStorage.setItem(l,c);break;default:sessionStorage.setItem(l,c)}}function dc(l,c){var e;switch(c.storage){case W.WebWorker:return null===(e=null==c?void 0:c.session)||void 0===e?void 0:e.get(l);case W.SessionStorage:return sessionStorage.getItem(l);case W.LocalStorage:return localStorage.getItem(l);default:return sessionStorage.getItem(l)}}function Zc(l){uc(l),tc("access_token",l),tc("expires_in",l),tc("issued_at",l),tc("display_name",l),tc("email",l),tc("id_token",l),tc("refresh_token",l),tc("scope",l),tc("tenant_domain",l),tc("token_type",l),tc("username",l),tc("request_params",l),tc("session_state",l)}function ac(l,c,e){nc("access_token",l.accessToken,e),nc("expires_in",l.expiresIn,e),nc("issued_at",(Date.now()/1e3).toString(),e),nc("display_name",c.displayName,e),nc("email",c.email,e),nc("id_token",l.idToken,e),nc("scope",l.scope,e),nc("refresh_token",l.refreshToken,e),nc("tenant_domain",c.tenantDomain,e),nc("token_type",l.tokenType,e),nc("username",c.username,e),oc(e)}var oc=function(l){var c=parseInt(dc("expires_in",l)),e=c<=10?c:c-10;uc(l);var i=setTimeout((function(){Dl(l,dc("refresh_token",l))}),1e3*e);nc("refresh_token_timer",JSON.stringify(i),l)},uc=function(l){if(dc("refresh_token_timer",l)){var c=JSON.parse(dc("refresh_token_timer",l));clearTimeout(c)}},mc=function(l,c){nc("authorization_endpoint",l,c)},bc=function(l,c){nc("token_endpoint",l,c)},sc=function(l,c){nc("end_session_endpoint",l,c)},pc=function(l,c){nc("jwks_uri",l,c)},Gc=function(l,c){nc("revoke_token_endpoint",l,c)},hc=function(l){nc("op_config_initiated","true",l)},rc=function(l,c){nc("sign_in_redirect_url",l,c)},Wc=function(l,c){nc("sign_out_redirect_url",l,c)},Xc=function(l,c){nc("oidc_session_iframe_endpoint",l,c)},Vc=function(l,c){nc("issuer",l,c)},Ic=function(l){nc("client_id",l.clientID,l)},yc=function(l,c){if(!c&&Cc(l))return Promise.resolve();var e=l.serverOrigin;return al.get(e+I.wellKnown).then((function(c){return 200!==c.status?Promise.reject(new Error("Failed to load OpenID provider configuration from: "+e+I.wellKnown)):(function(l,c){nc("open_id_config",JSON.stringify(l),c)}(c.data,l),mc(c.data.authorization_endpoint,l),bc(c.data.token_endpoint,l),sc(c.data.end_session_endpoint,l),pc(c.data.jwks_uri,l),Gc(c.data.token_endpoint.substring(0,c.data.token_endpoint.lastIndexOf("token"))+"revoke",l),Vc(c.data.issuer,l),Ic(l),Xc(c.data.check_session_iframe,l),rc(l.signInRedirectURL,l),Wc(l.signOutRedirectURL,l),hc(l),Promise.resolve("Initialized OpenID Provider configuration from: "+e+I.wellKnown))})).catch((function(){var c,i,t,n,d,Z,a;return mc(l.serverOrigin+((null===(c=null==l?void 0:l.endpoints)||void 0===c?void 0:c.authorize)||I.authorize),l),bc(l.serverOrigin+((null===(i=null==l?void 0:l.endpoints)||void 0===i?void 0:i.token)||I.token),l),Gc(l.serverOrigin+((null===(t=null==l?void 0:l.endpoints)||void 0===t?void 0:t.revoke)||I.revoke),l),sc(l.serverOrigin+((null===(n=null==l?void 0:l.endpoints)||void 0===n?void 0:n.logout)||I.logout),l),pc(e+((null===(d=null==l?void 0:l.endpoints)||void 0===d?void 0:d.jwks)||I.jwks),l),Vc(l.serverOrigin+((null===(Z=null==l?void 0:l.endpoints)||void 0===Z?void 0:Z.token)||I.token),l),Ic(l),Xc(l.serverOrigin+((null===(a=null==l?void 0:l.endpoints)||void 0===a?void 0:a.oidcSessionIFrame)||I.oidcSessionIFrame),l),rc(l.signInRedirectURL,l),Wc(l.signOutRedirectURL,l),hc(l),Promise.resolve(new Error("Initialized OpenID Provider configuration from default configuration.Because failed to access wellknown endpoint: "+e+I.wellKnown))}))},Sc=function(l){l.storage!==W.WebWorker?(tc("authorization_endpoint",l),tc("token_endpoint",l),tc("end_session_endpoint",l),tc("jwks_uri",l),tc("revoke_token_endpoint",l),tc("op_config_initiated",l),tc("issuer",l),tc("client_id",l),tc("tenant",l),tc("sign_in_redirect_url",l),tc("sign_out_redirect_url",l),tc("oidc_session_iframe_endpoint",l)):l.session.clear()},Yc=function(l){return{authorize:Kc(l),jwks:Uc(l),logout:kc(l),oidcSessionIFrame:Rc(l),revoke:Nc(l),token:Jc(l),wellKnown:I.wellKnown}},Kc=function(l){return dc("authorization_endpoint",l)},Jc=function(l){return dc("token_endpoint",l)},Nc=function(l){return dc("revoke_token_endpoint",l)},Rc=function(l){return dc("oidc_session_iframe_endpoint",l)},kc=function(l){return dc("end_session_endpoint",l)},Uc=function(l){return dc("jwks_uri",l)},gc=function(l){return dc("issuer",l)},Lc=function(l){return dc("client_id",l)},Cc=function(l){return function(l){return l.storage!==W.WebWorker?dc("op_config_initiated",l)&&"true"===dc("op_config_initiated",l):l.session.get("op_config_initiated")&&"true"===l.session.get("op_config_initiated")}(l)&&!!Lc(l)&&Lc(l)===l.clientID};function vc(l){var c;return l.storage===W.SessionStorage&&0===sessionStorage.length||l.storage===W.LocalStorage&&0===localStorage.length||y(l)&&0===(null===(c=null==l?void 0:l.session)||void 0===c?void 0:c.size)?Promise.reject(new Error("No login sessions.")):function(l){var c=kc(l);if(!c||0===c.trim().length)return Promise.reject(new Error("No logout endpoint found in the session."));var e=dc("id_token",l);if(!e||0===e.trim().length)return Promise.reject(new Error("Invalid id_token found in the session."));var i=dc("sign_out_redirect_url",l);if(!i||0===i.trim().length)return Promise.reject(new Error("No callback URL found in the session."));Zc(l),Sc(l);var t="".concat(c,"?id_token_hint=").concat(e,"&post_logout_redirect_uri=").concat(i,"&state=logout_success");return y(l)?Promise.resolve(t):(window.location.href=t,Promise.resolve(!0))}(l)}var Hc,zc=function(){var l,c,e,i=new Map,t=function(){return!!i.get("access_token")},n=function(){return!!i.get("access_token")},d=function(c){return $l(l,c).then((function(c){if("signed-in"===c.type){var e=kc(l);if(!e||0===e.trim().length)return Promise.reject(new Error("No logout endpoint found in the session."));var t=dc("id_token",l);if(!t||0===t.trim().length)return Promise.reject(new Error("Invalid id_token found in the session."));var n=dc("sign_out_redirect_url",l);if(!n||0===n.trim().length)return Promise.reject(new Error("No callback URL found in the session."));var d="".concat(e,"?id_token_hint=").concat(t,"&post_logout_redirect_uri=").concat(n);return Promise.resolve({data:{allowedScopes:i.get("scope"),displayName:i.get("display_name"),email:i.get("email"),logoutUrl:d,sessionState:i.get("session_state"),tenantDomain:i.get("tenant_domain"),username:i.get("username")},type:c.type})}return Promise.resolve(c)})).catch((function(l){return Promise.reject(l)}))},Z=function(){return Dl(l,i.get("access_token"))},a=function(){return vc(l)},o=function(){return Al(l,i.get("access_token")).then((function(){return Zc(l),Sc(l),Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)}))},u=function(l,c,e){l&&i.set("code",l),c&&i.set("session_state",c),i.set("pkce_code_verifier",e)},m=function(e){var i=!1;return l.baseUrls.forEach((function(l){var c;(null===(c=null==e?void 0:e.url)||void 0===c?void 0:c.startsWith(l))&&(i=!0)})),i?c.request(e).then((function(l){return Promise.resolve(l)})).catch((function(l){var i;return 401===(null===(i=null==l?void 0:l.response)||void 0===i?void 0:i.status)?Z().then((function(){return c(e).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)}))})).catch((function(){return Promise.reject("An error occurred while refreshing the access token. The access token is no more valid and re-authentication is required.")})):Promise.reject(l)})):Promise.reject("The provided URL is illegal.")},b=function(e){var i=!1;l.baseUrls.forEach((function(l){e.every((function(c){return c.url.startsWith(l)}))&&(i=!0)}));var t=e.map((function(l){return c.request(l)}));return i?al.all(t).then((function(l){return Promise.resolve(l)})).catch((function(l){var c;return 401===(null===(c=null==l?void 0:l.response)||void 0===c?void 0:c.status)?Z().then((function(){return al.all(t).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)}))})).catch((function(){return Promise.reject("An error occurred while refreshing the access token. The access token is no more valid and re-authentication is required.")})):Promise.reject(l)})):Promise.reject("The provided URL is illegal.")},s=function(c){return lc(c,l)},p=function(){return cc(l)},G=function(){return Promise.resolve(Yc(l))},h=function(){return ec(l)};return{getInstance:function(r){return e||(e=function(e){var r,W,X,V,I,y;return l=Object.assign({},e),i.clear(),l.session=i,l.authorizationCode&&i.set("code",l.authorizationCode),l.sessionState&&i.set("session_state",l.sessionState),(c=ol.getInstance()).init(!0,(function(l){var c,t;l.headers=Object.assign(Object.assign({},l.headers),{Authorization:"Bearer ".concat(null==i?void 0:i.get("access_token"))}),(null===(c=e.httpClient)||void 0===c?void 0:c.requestStartCallback)&&(null===(t=e.httpClient)||void 0===t||t.requestStartCallback())}),null!==(W=null===(r=e.httpClient)||void 0===r?void 0:r.requestSuccessCallback)&&void 0!==W?W:null,null!==(V=null===(X=e.httpClient)||void 0===X?void 0:X.requestErrorCallback)&&void 0!==V?V:null,null!==(y=null===(I=e.httpClient)||void 0===I?void 0:I.requestFinishCallback)&&void 0!==y?y:null),{customGrant:s,doesTokenExist:n,endUserSession:o,getDecodedIDToken:h,getServiceEndpoints:G,getUserInfo:p,httpRequest:m,httpRequestAll:b,isSignedIn:t,refreshAccessToken:Z,setAuthCode:u,signIn:d,signOut:a}}(r))}}}(),Fc=self;Fc.onmessage=function(l){var c,e,i,t,n=l.data,d=l.ports[0];switch(n.type){case"init":try{var Z=Object.assign({},n.data);Z.httpClient=Object.assign(Object.assign({},Z.httpClient),{requestErrorCallback:Qc,requestFinishCallback:xc,requestStartCallback:fc,requestSuccessCallback:Tc}),Hc=zc.getInstance(Z),d.postMessage(Pl())}catch(n){d.postMessage(wl(n))}break;case"sign-in":Hc?(((null===(c=null==n?void 0:n.data)||void 0===c?void 0:c.code)||(null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.pkce))&&Hc.setAuthCode(n.data.code,null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.sessionState,null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.pkce),Hc.signIn("string"==typeof(null==n?void 0:n.data)&&(null==n?void 0:n.data)).then((function(l){"signed-in"===l.type?d.postMessage(Pl({data:l.data,type:"signed-in"})):d.postMessage(Pl({code:l.code,pkce:l.pkce,type:"auth-required"}))})).catch((function(l){d.postMessage(wl(l))}))):d.postMessage(wl("Worker has not been initiated."));break;case"api-call":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}Hc.isSignedIn()?Hc.httpRequest(n.data).then((function(l){d.postMessage(Pl(l))})).catch((function(l){d.postMessage(wl(l))})):d.postMessage(wl("You have not signed in yet."));break;case"api-call-all":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}Hc.isSignedIn()?Hc.httpRequestAll(n.data).then((function(l){d.postMessage(Pl(l))})).catch((function(l){d.postMessage(wl(l))})):d.postMessage(wl("You have not signed in yet."));break;case"logout":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}Hc.isSignedIn()?Hc.signOut().then((function(l){l?d.postMessage(Pl(l)):d.postMessage(wl("Received no response"))})).catch((function(l){d.postMessage(wl(l))})):d.postMessage(wl("You have not signed in yet."));break;case"custom-grant":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}if(!Hc.isSignedIn()&&n.data.signInRequired){d.postMessage(wl("You have not signed in yet."));break}Hc.customGrant(n.data).then((function(l){d.postMessage(Pl(l))})).catch((function(l){d.postMessage(wl(l))}));break;case"end-user-session":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}if(!Hc.isSignedIn()&&n.data.signInRequired){d.postMessage(wl("You have not signed in yet."));break}Hc.endUserSession().then((function(l){d.postMessage(Pl(l))})).catch((function(l){d.postMessage(wl(l))}));break;case"get-service-endpoints":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}Hc.getServiceEndpoints().then((function(l){d.postMessage(Pl(l))})).catch((function(l){d.postMessage(wl(l))}));break;case"get-user-info":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}if(!Hc.isSignedIn()&&n.data.signInRequired){d.postMessage(wl("You have not signed in yet."));break}try{d.postMessage(Pl(Hc.getUserInfo()))}catch(n){d.postMessage(wl(n))}break;case"get-decoded-id-token":if(!Hc){d.postMessage(wl("Worker has not been initiated."));break}if(!Hc.isSignedIn()&&n.data.signInRequired){d.postMessage(wl("You have not signed in yet."));break}try{d.postMessage(Pl(Hc.getDecodedIDToken()))}catch(n){d.postMessage(wl(n))}break;default:null==d||d.postMessage(wl("Unknown message type ".concat(null==n?void 0:n.type)))}};var fc=function(){Fc.postMessage({type:"request-start"})},Tc=function(l){Fc.postMessage({data:JSON.stringify(null!=l?l:""),type:"request-success"})},xc=function(){Fc.postMessage({type:"request-finish"})},Qc=function(l){var c=Object.assign({},l);delete c.toJSON,Fc.postMessage({data:JSON.stringify(null!=c?c:""),type:"request-error"})};var Bc,jc=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLHI9MDtyPG4ubGVuZ3RoO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gZS5hcHBseSh0LG4pfX0sdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PXQuY2FsbChlKX1mdW5jdGlvbiByKGUpe3JldHVybiB2b2lkIDA9PT1lfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9ZnVuY3Rpb24gbyhlKXtpZigiW29iamVjdCBPYmplY3RdIiE9PXQuY2FsbChlKSlyZXR1cm4hMTt2YXIgbj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1ufHxuPT09T2JqZWN0LnByb3RvdHlwZX1mdW5jdGlvbiBpKGUpe3JldHVybiJbb2JqZWN0IEZ1bmN0aW9uXSI9PT10LmNhbGwoZSl9ZnVuY3Rpb24gYShlLHQpe2lmKG51bGwhPWUpaWYoIm9iamVjdCIhPXR5cGVvZiBlJiYoZT1bZV0pLG4oZSkpZm9yKHZhciByPTAscz1lLmxlbmd0aDtyPHM7cisrKXQuY2FsbChudWxsLGVbcl0scixlKTtlbHNlIGZvcih2YXIgbyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZ0LmNhbGwobnVsbCxlW29dLG8sZSl9dmFyIGM9e2lzQXJyYXk6bixpc0FycmF5QnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT10LmNhbGwoZSl9LGlzQnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZSYmIXIoZSkmJm51bGwhPT1lLmNvbnN0cnVjdG9yJiYhcihlLmNvbnN0cnVjdG9yKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3IuaXNCdWZmZXImJmUuY29uc3RydWN0b3IuaXNCdWZmZXIoZSl9LGlzRm9ybURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBGb3JtRGF0YSYmZSBpbnN0YW5jZW9mIEZvcm1EYXRhfSxpc0FycmF5QnVmZmVyVmlldzpmdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZBcnJheUJ1ZmZlci5pc1ZpZXc/QXJyYXlCdWZmZXIuaXNWaWV3KGUpOmUmJmUuYnVmZmVyJiZlLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfSxpc1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV9LGlzTnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZX0saXNPYmplY3Q6cyxpc1BsYWluT2JqZWN0Om8saXNVbmRlZmluZWQ6cixpc0RhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgRGF0ZV0iPT09dC5jYWxsKGUpfSxpc0ZpbGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgRmlsZV0iPT09dC5jYWxsKGUpfSxpc0Jsb2I6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQmxvYl0iPT09dC5jYWxsKGUpfSxpc0Z1bmN0aW9uOmksaXNTdHJlYW06ZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSkmJmkoZS5waXBlKX0saXNVUkxTZWFyY2hQYXJhbXM6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBVUkxTZWFyY2hQYXJhbXMmJmUgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXN9LGlzU3RhbmRhcmRCcm93c2VyRW52OmZ1bmN0aW9uKCl7cmV0dXJuKCJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yfHwiUmVhY3ROYXRpdmUiIT09bmF2aWdhdG9yLnByb2R1Y3QmJiJOYXRpdmVTY3JpcHQiIT09bmF2aWdhdG9yLnByb2R1Y3QmJiJOUyIhPT1uYXZpZ2F0b3IucHJvZHVjdCkmJigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl9LGZvckVhY2g6YSxtZXJnZTpmdW5jdGlvbiBlKCl7dmFyIHQ9e307ZnVuY3Rpb24gcihyLHMpe28odFtzXSkmJm8ocik/dFtzXT1lKHRbc10scik6byhyKT90W3NdPWUoe30scik6bihyKT90W3NdPXIuc2xpY2UoKTp0W3NdPXJ9Zm9yKHZhciBzPTAsaT1hcmd1bWVudHMubGVuZ3RoO3M8aTtzKyspYShhcmd1bWVudHNbc10scik7cmV0dXJuIHR9LGV4dGVuZDpmdW5jdGlvbih0LG4scil7cmV0dXJuIGEobiwoZnVuY3Rpb24obixzKXt0W3NdPXImJiJmdW5jdGlvbiI9PXR5cGVvZiBuP2UobixyKTpufSkpLHR9LHRyaW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXlxzKi8sIiIpLnJlcGxhY2UoL1xzKiQvLCIiKX0sc3RyaXBCT006ZnVuY3Rpb24oZSl7cmV0dXJuIDY1Mjc5PT09ZS5jaGFyQ29kZUF0KDApJiYoZT1lLnNsaWNlKDEpKSxlfX07ZnVuY3Rpb24gdShlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGUpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTIwL2csIisiKS5yZXBsYWNlKC8lNUIvZ2ksIlsiKS5yZXBsYWNlKC8lNUQvZ2ksIl0iKX12YXIgbD1mdW5jdGlvbihlLHQsbil7aWYoIXQpcmV0dXJuIGU7dmFyIHI7aWYobilyPW4odCk7ZWxzZSBpZihjLmlzVVJMU2VhcmNoUGFyYW1zKHQpKXI9dC50b1N0cmluZygpO2Vsc2V7dmFyIHM9W107Yy5mb3JFYWNoKHQsKGZ1bmN0aW9uKGUsdCl7bnVsbCE9ZSYmKGMuaXNBcnJheShlKT90Kz0iW10iOmU9W2VdLGMuZm9yRWFjaChlLChmdW5jdGlvbihlKXtjLmlzRGF0ZShlKT9lPWUudG9JU09TdHJpbmcoKTpjLmlzT2JqZWN0KGUpJiYoZT1KU09OLnN0cmluZ2lmeShlKSkscy5wdXNoKHUodCkrIj0iK3UoZSkpfSkpKX0pKSxyPXMuam9pbigiJiIpfWlmKHIpe3ZhciBvPWUuaW5kZXhPZigiIyIpOy0xIT09byYmKGU9ZS5zbGljZSgwLG8pKSxlKz0oLTE9PT1lLmluZGV4T2YoIj8iKT8iPyI6IiYiKStyfXJldHVybiBlfTtmdW5jdGlvbiBkKCl7dGhpcy5oYW5kbGVycz1bXX1kLnByb3RvdHlwZS51c2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6ZSxyZWplY3RlZDp0fSksdGhpcy5oYW5kbGVycy5sZW5ndGgtMX0sZC5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LGQucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7Yy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsKGZ1bmN0aW9uKHQpe251bGwhPT10JiZlKHQpfSkpfTt2YXIgaD1kLHA9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjLmZvckVhY2gobiwoZnVuY3Rpb24obil7ZT1uKGUsdCl9KSksZX0sZj1mdW5jdGlvbihlKXtyZXR1cm4hKCFlfHwhZS5fX0NBTkNFTF9fKX0sbT1mdW5jdGlvbihlLHQpe2MuZm9yRWFjaChlLChmdW5jdGlvbihuLHIpe3IhPT10JiZyLnRvVXBwZXJDYXNlKCk9PT10LnRvVXBwZXJDYXNlKCkmJihlW3RdPW4sZGVsZXRlIGVbcl0pfSkpfSxnPWZ1bmN0aW9uKGUsdCxuLHIscyl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuLHIscyl7cmV0dXJuIGUuY29uZmlnPXQsbiYmKGUuY29kZT1uKSxlLnJlcXVlc3Q9cixlLnJlc3BvbnNlPXMsZS5pc0F4aW9zRXJyb3I9ITAsZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGV9fSxlfShuZXcgRXJyb3IoZSksdCxuLHIscyl9LHk9Yy5pc1N0YW5kYXJkQnJvd3NlckVudigpP3t3cml0ZTpmdW5jdGlvbihlLHQsbixyLHMsbyl7dmFyIGk9W107aS5wdXNoKGUrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KSksYy5pc051bWJlcihuKSYmaS5wdXNoKCJleHBpcmVzPSIrbmV3IERhdGUobikudG9HTVRTdHJpbmcoKSksYy5pc1N0cmluZyhyKSYmaS5wdXNoKCJwYXRoPSIrciksYy5pc1N0cmluZyhzKSYmaS5wdXNoKCJkb21haW49IitzKSwhMD09PW8mJmkucHVzaCgic2VjdXJlIiksZG9jdW1lbnQuY29va2llPWkuam9pbigiOyAiKX0scmVhZDpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58O1xccyopKCIrZSsiKT0oW147XSopIikpO3JldHVybiB0P2RlY29kZVVSSUNvbXBvbmVudCh0WzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dGhpcy53cml0ZShlLCIiLERhdGUubm93KCktODY0ZTUpfX06e3dyaXRlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbigpe319LHY9WyJhZ2UiLCJhdXRob3JpemF0aW9uIiwiY29udGVudC1sZW5ndGgiLCJjb250ZW50LXR5cGUiLCJldGFnIiwiZXhwaXJlcyIsImZyb20iLCJob3N0IiwiaWYtbW9kaWZpZWQtc2luY2UiLCJpZi11bm1vZGlmaWVkLXNpbmNlIiwibGFzdC1tb2RpZmllZCIsImxvY2F0aW9uIiwibWF4LWZvcndhcmRzIiwicHJveHktYXV0aG9yaXphdGlvbiIsInJlZmVyZXIiLCJyZXRyeS1hZnRlciIsInVzZXItYWdlbnQiXSx3PWMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKT9mdW5jdGlvbigpe3ZhciBlLHQ9Lyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtmdW5jdGlvbiByKGUpe3ZhciByPWU7cmV0dXJuIHQmJihuLnNldEF0dHJpYnV0ZSgiaHJlZiIscikscj1uLmhyZWYpLG4uc2V0QXR0cmlidXRlKCJocmVmIixyKSx7aHJlZjpuLmhyZWYscHJvdG9jb2w6bi5wcm90b2NvbD9uLnByb3RvY29sLnJlcGxhY2UoLzokLywiIik6IiIsaG9zdDpuLmhvc3Qsc2VhcmNoOm4uc2VhcmNoP24uc2VhcmNoLnJlcGxhY2UoL15cPy8sIiIpOiIiLGhhc2g6bi5oYXNoP24uaGFzaC5yZXBsYWNlKC9eIy8sIiIpOiIiLGhvc3RuYW1lOm4uaG9zdG5hbWUscG9ydDpuLnBvcnQscGF0aG5hbWU6Ii8iPT09bi5wYXRobmFtZS5jaGFyQXQoMCk/bi5wYXRobmFtZToiLyIrbi5wYXRobmFtZX19cmV0dXJuIGU9cih3aW5kb3cubG9jYXRpb24uaHJlZiksZnVuY3Rpb24odCl7dmFyIG49Yy5pc1N0cmluZyh0KT9yKHQpOnQ7cmV0dXJuIG4ucHJvdG9jb2w9PT1lLnByb3RvY29sJiZuLmhvc3Q9PT1lLmhvc3R9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGs9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciByPWUuZGF0YSxzPWUuaGVhZGVycztjLmlzRm9ybURhdGEocikmJmRlbGV0ZSBzWyJDb250ZW50LVR5cGUiXTt2YXIgbz1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoZS5hdXRoKXt2YXIgaT1lLmF1dGgudXNlcm5hbWV8fCIiLGE9ZS5hdXRoLnBhc3N3b3JkP3VuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlLmF1dGgucGFzc3dvcmQpKToiIjtzLkF1dGhvcml6YXRpb249IkJhc2ljICIrYnRvYShpKyI6IithKX12YXIgdSxkLGg9KHU9ZS5iYXNlVVJMLGQ9ZS51cmwsdSYmIS9eKFthLXpdW2EtelxkXCtcLVwuXSo6KT9cL1wvL2kudGVzdChkKT9mdW5jdGlvbihlLHQpe3JldHVybiB0P2UucmVwbGFjZSgvXC8rJC8sIiIpKyIvIit0LnJlcGxhY2UoL15cLysvLCIiKTplfSh1LGQpOmQpO2lmKG8ub3BlbihlLm1ldGhvZC50b1VwcGVyQ2FzZSgpLGwoaCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLCEwKSxvLnRpbWVvdXQ9ZS50aW1lb3V0LG8ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYobyYmND09PW8ucmVhZHlTdGF0ZSYmKDAhPT1vLnN0YXR1c3x8by5yZXNwb25zZVVSTCYmMD09PW8ucmVzcG9uc2VVUkwuaW5kZXhPZigiZmlsZToiKSkpe3ZhciByLHMsaSxhLHUsbD0iZ2V0QWxsUmVzcG9uc2VIZWFkZXJzImluIG8/KHI9by5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSx1PXt9LHI/KGMuZm9yRWFjaChyLnNwbGl0KCJcbiIpLChmdW5jdGlvbihlKXtpZihhPWUuaW5kZXhPZigiOiIpLHM9Yy50cmltKGUuc3Vic3RyKDAsYSkpLnRvTG93ZXJDYXNlKCksaT1jLnRyaW0oZS5zdWJzdHIoYSsxKSkscyl7aWYodVtzXSYmdi5pbmRleE9mKHMpPj0wKXJldHVybjt1W3NdPSJzZXQtY29va2llIj09PXM/KHVbc10/dVtzXTpbXSkuY29uY2F0KFtpXSk6dVtzXT91W3NdKyIsICIraTppfX0pKSx1KTp1KTpudWxsLGQ9e2RhdGE6ZS5yZXNwb25zZVR5cGUmJiJ0ZXh0IiE9PWUucmVzcG9uc2VUeXBlP28ucmVzcG9uc2U6by5yZXNwb25zZVRleHQsc3RhdHVzOm8uc3RhdHVzLHN0YXR1c1RleHQ6by5zdGF0dXNUZXh0LGhlYWRlcnM6bCxjb25maWc6ZSxyZXF1ZXN0Om99OyFmdW5jdGlvbihlLHQsbil7dmFyIHI9bi5jb25maWcudmFsaWRhdGVTdGF0dXM7bi5zdGF0dXMmJnImJiFyKG4uc3RhdHVzKT90KGcoIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgIituLnN0YXR1cyxuLmNvbmZpZyxudWxsLG4ucmVxdWVzdCxuKSk6ZShuKX0odCxuLGQpLG89bnVsbH19LG8ub25hYm9ydD1mdW5jdGlvbigpe28mJihuKGcoIlJlcXVlc3QgYWJvcnRlZCIsZSwiRUNPTk5BQk9SVEVEIixvKSksbz1udWxsKX0sby5vbmVycm9yPWZ1bmN0aW9uKCl7bihnKCJOZXR3b3JrIEVycm9yIixlLG51bGwsbykpLG89bnVsbH0sby5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgdD0idGltZW91dCBvZiAiK2UudGltZW91dCsibXMgZXhjZWVkZWQiO2UudGltZW91dEVycm9yTWVzc2FnZSYmKHQ9ZS50aW1lb3V0RXJyb3JNZXNzYWdlKSxuKGcodCxlLCJFQ09OTkFCT1JURUQiLG8pKSxvPW51bGx9LGMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIHA9KGUud2l0aENyZWRlbnRpYWxzfHx3KGgpKSYmZS54c3JmQ29va2llTmFtZT95LnJlYWQoZS54c3JmQ29va2llTmFtZSk6dm9pZCAwO3AmJihzW2UueHNyZkhlYWRlck5hbWVdPXApfWlmKCJzZXRSZXF1ZXN0SGVhZGVyImluIG8mJmMuZm9yRWFjaChzLChmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXImJiJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpP2RlbGV0ZSBzW3RdOm8uc2V0UmVxdWVzdEhlYWRlcih0LGUpfSkpLGMuaXNVbmRlZmluZWQoZS53aXRoQ3JlZGVudGlhbHMpfHwoby53aXRoQ3JlZGVudGlhbHM9ISFlLndpdGhDcmVkZW50aWFscyksZS5yZXNwb25zZVR5cGUpdHJ5e28ucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlfWNhdGNoKHQpe2lmKCJqc29uIiE9PWUucmVzcG9uc2VUeXBlKXRocm93IHR9ImZ1bmN0aW9uIj09dHlwZW9mIGUub25Eb3dubG9hZFByb2dyZXNzJiZvLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uRG93bmxvYWRQcm9ncmVzcyksImZ1bmN0aW9uIj09dHlwZW9mIGUub25VcGxvYWRQcm9ncmVzcyYmby51cGxvYWQmJm8udXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uVXBsb2FkUHJvZ3Jlc3MpLGUuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKChmdW5jdGlvbihlKXtvJiYoby5hYm9ydCgpLG4oZSksbz1udWxsKX0pKSxyfHwocj1udWxsKSxvLnNlbmQocil9KSl9LFM9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifTtmdW5jdGlvbiBiKGUsdCl7IWMuaXNVbmRlZmluZWQoZSkmJmMuaXNVbmRlZmluZWQoZVsiQ29udGVudC1UeXBlIl0pJiYoZVsiQ29udGVudC1UeXBlIl09dCl9dmFyIF8sQT17YWRhcHRlcjooKCJ1bmRlZmluZWQiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3R8fCJ1bmRlZmluZWQiIT10eXBlb2YgcHJvY2VzcyYmIltvYmplY3QgcHJvY2Vzc10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpKSYmKF89ayksXyksdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oZSx0KXtyZXR1cm4gbSh0LCJBY2NlcHQiKSxtKHQsIkNvbnRlbnQtVHlwZSIpLGMuaXNGb3JtRGF0YShlKXx8Yy5pc0FycmF5QnVmZmVyKGUpfHxjLmlzQnVmZmVyKGUpfHxjLmlzU3RyZWFtKGUpfHxjLmlzRmlsZShlKXx8Yy5pc0Jsb2IoZSk/ZTpjLmlzQXJyYXlCdWZmZXJWaWV3KGUpP2UuYnVmZmVyOmMuaXNVUkxTZWFyY2hQYXJhbXMoZSk/KGIodCwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgiKSxlLnRvU3RyaW5nKCkpOmMuaXNPYmplY3QoZSk/KGIodCwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04IiksSlNPTi5zdHJpbmdpZnkoZSkpOmV9XSx0cmFuc2Zvcm1SZXNwb25zZTpbZnVuY3Rpb24oZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXRyeXtlPUpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7fXJldHVybiBlfV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOiJYU1JGLVRPS0VOIix4c3JmSGVhZGVyTmFtZToiWC1YU1JGLVRPS0VOIixtYXhDb250ZW50TGVuZ3RoOi0xLG1heEJvZHlMZW5ndGg6LTEsdmFsaWRhdGVTdGF0dXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTIwMCYmZTwzMDB9fTtBLmhlYWRlcnM9e2NvbW1vbjp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyoifX0sYy5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLChmdW5jdGlvbihlKXtBLmhlYWRlcnNbZV09e319KSksYy5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sKGZ1bmN0aW9uKGUpe0EuaGVhZGVyc1tlXT1jLm1lcmdlKFMpfSkpO3ZhciBFPUE7ZnVuY3Rpb24gUChlKXtlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKX12YXIgQz1mdW5jdGlvbihlKXtyZXR1cm4gUChlKSxlLmhlYWRlcnM9ZS5oZWFkZXJzfHx7fSxlLmRhdGE9cChlLmRhdGEsZS5oZWFkZXJzLGUudHJhbnNmb3JtUmVxdWVzdCksZS5oZWFkZXJzPWMubWVyZ2UoZS5oZWFkZXJzLmNvbW1vbnx8e30sZS5oZWFkZXJzW2UubWV0aG9kXXx8e30sZS5oZWFkZXJzKSxjLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sKGZ1bmN0aW9uKHQpe2RlbGV0ZSBlLmhlYWRlcnNbdF19KSksKGUuYWRhcHRlcnx8RS5hZGFwdGVyKShlKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gUChlKSx0LmRhdGE9cCh0LmRhdGEsdC5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpLHR9KSwoZnVuY3Rpb24odCl7cmV0dXJuIGYodCl8fChQKGUpLHQmJnQucmVzcG9uc2UmJih0LnJlc3BvbnNlLmRhdGE9cCh0LnJlc3BvbnNlLmRhdGEsdC5yZXNwb25zZS5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpKSksUHJvbWlzZS5yZWplY3QodCl9KSl9LEk9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPXt9LHI9WyJ1cmwiLCJtZXRob2QiLCJkYXRhIl0scz1bImhlYWRlcnMiLCJhdXRoIiwicHJveHkiLCJwYXJhbXMiXSxvPVsiYmFzZVVSTCIsInRyYW5zZm9ybVJlcXVlc3QiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInBhcmFtc1NlcmlhbGl6ZXIiLCJ0aW1lb3V0IiwidGltZW91dE1lc3NhZ2UiLCJ3aXRoQ3JlZGVudGlhbHMiLCJhZGFwdGVyIiwicmVzcG9uc2VUeXBlIiwieHNyZkNvb2tpZU5hbWUiLCJ4c3JmSGVhZGVyTmFtZSIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJkZWNvbXByZXNzIiwibWF4Q29udGVudExlbmd0aCIsIm1heEJvZHlMZW5ndGgiLCJtYXhSZWRpcmVjdHMiLCJ0cmFuc3BvcnQiLCJodHRwQWdlbnQiLCJodHRwc0FnZW50IiwiY2FuY2VsVG9rZW4iLCJzb2NrZXRQYXRoIiwicmVzcG9uc2VFbmNvZGluZyJdLGk9WyJ2YWxpZGF0ZVN0YXR1cyJdO2Z1bmN0aW9uIGEoZSx0KXtyZXR1cm4gYy5pc1BsYWluT2JqZWN0KGUpJiZjLmlzUGxhaW5PYmplY3QodCk/Yy5tZXJnZShlLHQpOmMuaXNQbGFpbk9iamVjdCh0KT9jLm1lcmdlKHt9LHQpOmMuaXNBcnJheSh0KT90LnNsaWNlKCk6dH1mdW5jdGlvbiB1KHIpe2MuaXNVbmRlZmluZWQodFtyXSk/Yy5pc1VuZGVmaW5lZChlW3JdKXx8KG5bcl09YSh2b2lkIDAsZVtyXSkpOm5bcl09YShlW3JdLHRbcl0pfWMuZm9yRWFjaChyLChmdW5jdGlvbihlKXtjLmlzVW5kZWZpbmVkKHRbZV0pfHwobltlXT1hKHZvaWQgMCx0W2VdKSl9KSksYy5mb3JFYWNoKHMsdSksYy5mb3JFYWNoKG8sKGZ1bmN0aW9uKHIpe2MuaXNVbmRlZmluZWQodFtyXSk/Yy5pc1VuZGVmaW5lZChlW3JdKXx8KG5bcl09YSh2b2lkIDAsZVtyXSkpOm5bcl09YSh2b2lkIDAsdFtyXSl9KSksYy5mb3JFYWNoKGksKGZ1bmN0aW9uKHIpe3IgaW4gdD9uW3JdPWEoZVtyXSx0W3JdKTpyIGluIGUmJihuW3JdPWEodm9pZCAwLGVbcl0pKX0pKTt2YXIgbD1yLmNvbmNhdChzKS5jb25jYXQobykuY29uY2F0KGkpLGQ9T2JqZWN0LmtleXMoZSkuY29uY2F0KE9iamVjdC5rZXlzKHQpKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09bC5pbmRleE9mKGUpfSkpO3JldHVybiBjLmZvckVhY2goZCx1KSxufTtmdW5jdGlvbiBUKGUpe3RoaXMuZGVmYXVsdHM9ZSx0aGlzLmludGVyY2VwdG9ycz17cmVxdWVzdDpuZXcgaCxyZXNwb25zZTpuZXcgaH19VC5wcm90b3R5cGUucmVxdWVzdD1mdW5jdGlvbihlKXsic3RyaW5nIj09dHlwZW9mIGU/KGU9YXJndW1lbnRzWzFdfHx7fSkudXJsPWFyZ3VtZW50c1swXTplPWV8fHt9LChlPUkodGhpcy5kZWZhdWx0cyxlKSkubWV0aG9kP2UubWV0aG9kPWUubWV0aG9kLnRvTG93ZXJDYXNlKCk6dGhpcy5kZWZhdWx0cy5tZXRob2Q/ZS5tZXRob2Q9dGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTplLm1ldGhvZD0iZ2V0Ijt2YXIgdD1bQyx2b2lkIDBdLG49UHJvbWlzZS5yZXNvbHZlKGUpO2Zvcih0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3QudW5zaGlmdChlLmZ1bGZpbGxlZCxlLnJlamVjdGVkKX0pKSx0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnB1c2goZS5mdWxmaWxsZWQsZS5yZWplY3RlZCl9KSk7dC5sZW5ndGg7KW49bi50aGVuKHQuc2hpZnQoKSx0LnNoaWZ0KCkpO3JldHVybiBufSxULnByb3RvdHlwZS5nZXRVcmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9SSh0aGlzLmRlZmF1bHRzLGUpLGwoZS51cmwsZS5wYXJhbXMsZS5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXD8vLCIiKX0sYy5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSwoZnVuY3Rpb24oZSl7VC5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KEkobnx8e30se21ldGhvZDplLHVybDp0LGRhdGE6KG58fHt9KS5kYXRhfSkpfX0pKSxjLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSwoZnVuY3Rpb24oZSl7VC5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuLHIpe3JldHVybiB0aGlzLnJlcXVlc3QoSShyfHx7fSx7bWV0aG9kOmUsdXJsOnQsZGF0YTpufSkpfX0pKTt2YXIgaj1UO2Z1bmN0aW9uIFIoZSl7dGhpcy5tZXNzYWdlPWV9Ui5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iQ2FuY2VsIisodGhpcy5tZXNzYWdlPyI6ICIrdGhpcy5tZXNzYWdlOiIiKX0sUi5wcm90b3R5cGUuX19DQU5DRUxfXz0hMDt2YXIgeD1SO2Z1bmN0aW9uIE8oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO3ZhciB0O3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dD1lfSkpO3ZhciBuPXRoaXM7ZSgoZnVuY3Rpb24oZSl7bi5yZWFzb258fChuLnJlYXNvbj1uZXcgeChlKSx0KG4ucmVhc29uKSl9KSl9Ty5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZD1mdW5jdGlvbigpe2lmKHRoaXMucmVhc29uKXRocm93IHRoaXMucmVhc29ufSxPLnNvdXJjZT1mdW5jdGlvbigpe3ZhciBlO3JldHVybnt0b2tlbjpuZXcgTygoZnVuY3Rpb24odCl7ZT10fSkpLGNhbmNlbDplfX07dmFyIEg9TztmdW5jdGlvbiBxKHQpe3ZhciBuPW5ldyBqKHQpLHI9ZShqLnByb3RvdHlwZS5yZXF1ZXN0LG4pO3JldHVybiBjLmV4dGVuZChyLGoucHJvdG90eXBlLG4pLGMuZXh0ZW5kKHIsbikscn12YXIgTT1xKEUpO00uQXhpb3M9aixNLmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gcShJKE0uZGVmYXVsdHMsZSkpfSxNLkNhbmNlbD14LE0uQ2FuY2VsVG9rZW49SCxNLmlzQ2FuY2VsPWYsTS5hbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UuYWxsKGUpfSxNLnNwcmVhZD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkobnVsbCx0KX19O3ZhciBVPU0sVz1NO1UuZGVmYXVsdD1XO3ZhciBCPVU7Y29uc3QgRD17YXV0aG9yaXplOiIvb2F1dGgyL2F1dGhvcml6ZSIsandrczoiL29hdXRoMi9qd2tzIixsb2dvdXQ6Ii9vaWRjL2xvZ291dCIsb2lkY1Nlc3Npb25JRnJhbWU6Ii9vaWRjL2NoZWNrc2Vzc2lvbiIscmV2b2tlOiIvb2F1dGgyL3Jldm9rZSIsdG9rZW46Ii9vYXV0aDIvdG9rZW4iLHdlbGxLbm93bjoiL29hdXRoMi90b2tlbi8ud2VsbC1rbm93bi9vcGVuaWQtY29uZmlndXJhdGlvbiJ9LE49ImF1dGhvcml6YXRpb25fZW5kcG9pbnQiLEw9InRva2VuX2VuZHBvaW50IixLPSJyZXZva2VfdG9rZW5fZW5kcG9pbnQiLEo9ImVuZF9zZXNzaW9uX2VuZHBvaW50IixGPSJqd2tzX3VyaSIsJD0ib3BfY29uZmlnX2luaXRpYXRlZCIsej0ic2lnbl9pbl9yZWRpcmVjdF91cmwiLEc9InNpZ25fb3V0X3JlZGlyZWN0X3VybCIsVj0ib2lkY19zZXNzaW9uX2lmcmFtZV9lbmRwb2ludCIsWT0iYWNjZXNzX3Rva2VuIixYPSJleHBpcmVzX2luIixRPSJpc3N1ZWRfYXQiLFo9ImNvZGUiLGVlPSJjbGllbnRfaWQiLHRlPSJpZF90b2tlbiIsbmU9Im9wZW5pZCIscmU9InBrY2VfY29kZV92ZXJpZmllciIsc2U9InJlZnJlc2hfdG9rZW4iLG9lPSJzY29wZSIsaWU9InNlc3Npb25fc3RhdGUiLGFlPSJ0b2tlbl90eXBlIixjZT0icmVxdWVzdF9wYXJhbXMiLHVlPSJ0ZW5hbnRfZG9tYWluIixsZT0iaXNzdWVyIixkZT0icmVmcmVzaF90b2tlbl90aW1lciIsaGU9InVzZXJuYW1lIixwZT0iZW1haWwiLGZlPSJkaXNwbGF5X25hbWUiLG1lPSJzaWduZWQtaW4iLGdlPSJhdXRoLXJlcXVpcmVkIjt2YXIgeWUsdmUsd2Usa2U7IWZ1bmN0aW9uKGUpe2UuTG9jYWxTdG9yYWdlPSJsb2NhbFN0b3JhZ2UiLGUuU2Vzc2lvblN0b3JhZ2U9InNlc3Npb25TdG9yYWdlIixlLldlYldvcmtlcj0id2ViV29ya2VyIn0oeWV8fCh5ZT17fSkpLGZ1bmN0aW9uKGUpe2UuU2lnbkluPSJzaWduLWluIixlLlNpZ25PdXQ9InNpZ24tb3V0IixlLkluaXRpYWxpemU9ImluaXRpYWxpemUiLGUuSHR0cFJlcXVlc3RTdGFydD0iaHR0cC1yZXF1ZXN0LXN0YXJ0IixlLkh0dHBSZXF1ZXN0RmluaXNoPSJodHRwLXJlcXVlc3QtZmluaXNoIixlLkh0dHBSZXF1ZXN0RXJyb3I9Imh0dHAtcmVxdWVzdC1lcnJvciIsZS5IdHRwUmVxdWVzdFN1Y2Nlc3M9Imh0dHAtcmVxdWVzdC1zdWNjZXNzIixlLkVuZFVzZXJTZXNzaW9uPSJlbmQtdXNlci1zZXNzaW9uIixlLkN1c3RvbUdyYW50PSJjdXN0b20tZ3JhbnQifSh2ZXx8KHZlPXt9KSksZnVuY3Rpb24oZSl7ZS5mb3JtUG9zdD0iZm9ybV9wb3N0IixlLnF1ZXJ5PSJxdWVyeSJ9KHdlfHwod2U9e30pKTtsZXQgU2U9a2U9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmluaXQ9dGhpcy5pbml0LmJpbmQodGhpcyl9c3RhdGljIGdldEluc3RhbmNlKCl7cmV0dXJuIHRoaXMuYXhpb3NJbnN0YW5jZXx8KHRoaXMuYXhpb3NJbnN0YW5jZT1CLmNyZWF0ZSh7d2l0aENyZWRlbnRpYWxzOiEwfSksdGhpcy5jbGllbnRJbnN0YW5jZXx8KHRoaXMuY2xpZW50SW5zdGFuY2U9bmV3IGtlKSx0aGlzLmF4aW9zSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKChlPT50aGlzLmNsaWVudEluc3RhbmNlLnJlcXVlc3RIYW5kbGVyKGUpKSksdGhpcy5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoKGU9PnRoaXMuY2xpZW50SW5zdGFuY2Uuc3VjY2Vzc0hhbmRsZXIoZSkpLChlPT50aGlzLmNsaWVudEluc3RhbmNlLmVycm9ySGFuZGxlcihlKSkpLHRoaXMuYXhpb3NJbnN0YW5jZS5hbGw9Qi5hbGwsdGhpcy5heGlvc0luc3RhbmNlLnNwcmVhZD1CLnNwcmVhZCx0aGlzLmF4aW9zSW5zdGFuY2UuaW5pdD10aGlzLmNsaWVudEluc3RhbmNlLmluaXQsdGhpcy5heGlvc0luc3RhbmNlLmVuYWJsZUhhbmRsZXI9dGhpcy5jbGllbnRJbnN0YW5jZS5lbmFibGVIYW5kbGVyLHRoaXMuYXhpb3NJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcj10aGlzLmNsaWVudEluc3RhbmNlLmRpc2FibGVIYW5kbGVyLHRoaXMuYXhpb3NJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0PXRoaXMuY2xpZW50SW5zdGFuY2UuZGlzYWJsZUhhbmRsZXJXaXRoVGltZW91dCksdGhpcy5heGlvc0luc3RhbmNlfXJlcXVlc3RIYW5kbGVyKGUpe3JldHVybiBrZS5pc0hhbmRsZXJFbmFibGVkJiZ0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjayYmdGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjayhlKSxlfWVycm9ySGFuZGxlcihlKXt0aHJvdyBrZS5pc0hhbmRsZXJFbmFibGVkJiYodGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2smJnRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2soZSksdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2soKSksZX1zdWNjZXNzSGFuZGxlcihlKXtyZXR1cm4ga2UuaXNIYW5kbGVyRW5hYmxlZCYmKHRoaXMucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayYmdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrKGUpLHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJnRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrKCkpLGV9aW5pdChlPSEwLHQsbixyLHMpe2tlLmlzSGFuZGxlckVuYWJsZWQ9ZSx0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2smJnRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2smJnRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrfHwodGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFja3x8KHRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2s9dCksdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrfHwodGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPW4pLHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2t8fCh0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrPXIpLHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrfHwodGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2s9cykpfWVuYWJsZUhhbmRsZXIoKXtrZS5pc0hhbmRsZXJFbmFibGVkPSEwfWRpc2FibGVIYW5kbGVyKCl7a2UuaXNIYW5kbGVyRW5hYmxlZD0hMX1kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0KGU9a2UuREVGQVVMVF9IQU5ETEVSX0RJU0FCTEVfVElNRU9VVCl7a2UuaXNIYW5kbGVyRW5hYmxlZD0hMSxzZXRUaW1lb3V0KCgoKT0+e2tlLmlzSGFuZGxlckVuYWJsZWQ9ITB9KSxlKX19O1NlLkRFRkFVTFRfSEFORExFUl9ESVNBQkxFX1RJTUVPVVQ9MWUzLFNlPWtlPQovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4KCiAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLgoKICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSAogIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwKICBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00KICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1IKICBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovCmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBzLG89YXJndW1lbnRzLmxlbmd0aCxpPW88Mz90Om51bGw9PT1yP3I9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOnI7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlpPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4scik7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocz1lW2FdKSYmKGk9KG88Mz9zKGkpOm8+Mz9zKHQsbixpKTpzKHQsbikpfHxpKTtyZXR1cm4gbz4zJiZpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGkpLGl9KFtlPT57fV0sU2UpOyJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmO2Z1bmN0aW9uIGJlKGUsdCxuKXtyZXR1cm4gZShuPXtwYXRoOnQsZXhwb3J0czp7fSxyZXF1aXJlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJEeW5hbWljIHJlcXVpcmVzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSBAcm9sbHVwL3BsdWdpbi1jb21tb25qcyIpfShudWxsPT10JiZuLnBhdGgpfX0sbi5leHBvcnRzKSxuLmV4cG9ydHN9dmFyIF9lPWJlKChmdW5jdGlvbihlLHQpe3ZhciBuO2UuZXhwb3J0cz0obj1ufHxmdW5jdGlvbihlLHQpe3ZhciBuPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuIGUucHJvdG90eXBlPXQsbj1uZXcgZSxlLnByb3RvdHlwZT1udWxsLG59fSgpLHI9e30scz1yLmxpYj17fSxvPXMuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PW4odGhpcyk7cmV0dXJuIGUmJnQubWl4SW4oZSksdC5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT10LmluaXR8fCh0LmluaXQ9ZnVuY3Rpb24oKXt0LiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLHQuaW5pdC5wcm90b3R5cGU9dCx0LiRzdXBlcj10aGlzLHR9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZXh0ZW5kKCk7cmV0dXJuIGUuaW5pdC5hcHBseShlLGFyZ3VtZW50cyksZX0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKHRoaXNbdF09ZVt0XSk7ZS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9ZS50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0saT1zLldvcmRBcnJheT1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4pe2U9dGhpcy53b3Jkcz1lfHxbXSx0aGlzLnNpZ0J5dGVzPW4hPXQ/bjo0KmUubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4oZXx8Yykuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53b3JkcyxuPWUud29yZHMscj10aGlzLnNpZ0J5dGVzLHM9ZS5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksciU0KWZvcih2YXIgbz0wO288cztvKyspe3ZhciBpPW5bbz4+PjJdPj4+MjQtbyU0KjgmMjU1O3RbcitvPj4+Ml18PWk8PDI0LShyK28pJTQqOH1lbHNlIGZvcihvPTA7bzxzO28rPTQpdFtyK28+Pj4yXT1uW28+Pj4yXTtyZXR1cm4gdGhpcy5zaWdCeXRlcys9cyx0aGlzfSxjbGFtcDpmdW5jdGlvbigpe3ZhciB0PXRoaXMud29yZHMsbj10aGlzLnNpZ0J5dGVzO3Rbbj4+PjJdJj00Mjk0OTY3Mjk1PDwzMi1uJTQqOCx0Lmxlbmd0aD1lLmNlaWwobi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZT1vLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGUud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxlfSxyYW5kb206ZnVuY3Rpb24odCl7Zm9yKHZhciBuLHI9W10scz1mdW5jdGlvbih0KXt0PXQ7dmFyIG49OTg3NjU0MzIxLHI9NDI5NDk2NzI5NTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcz0oKG49MzY5NjkqKDY1NTM1Jm4pKyhuPj4xNikmcik8PDE2KSsodD0xOGUzKig2NTUzNSZ0KSsodD4+MTYpJnIpJnI7cmV0dXJuIHMvPTQyOTQ5NjcyOTYsKHMrPS41KSooZS5yYW5kb20oKT4uNT8xOi0xKX19LG89MDtvPHQ7bys9NCl7dmFyIGE9cyg0Mjk0OTY3Mjk2KihufHxlLnJhbmRvbSgpKSk7bj05ODc2NTQwNzEqYSgpLHIucHVzaCg0Mjk0OTY3Mjk2KmEoKXwwKX1yZXR1cm4gbmV3IGkuaW5pdChyLHQpfX0pLGE9ci5lbmM9e30sYz1hLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLndvcmRzLG49ZS5zaWdCeXRlcyxyPVtdLHM9MDtzPG47cysrKXt2YXIgbz10W3M+Pj4yXT4+PjI0LXMlNCo4JjI1NTtyLnB1c2goKG8+Pj40KS50b1N0cmluZygxNikpLHIucHVzaCgoMTUmbykudG9TdHJpbmcoMTYpKX1yZXR1cm4gci5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49W10scj0wO3I8dDtyKz0yKW5bcj4+PjNdfD1wYXJzZUludChlLnN1YnN0cihyLDIpLDE2KTw8MjQtciU4KjQ7cmV0dXJuIG5ldyBpLmluaXQobix0LzIpfX0sdT1hLkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLndvcmRzLG49ZS5zaWdCeXRlcyxyPVtdLHM9MDtzPG47cysrKXt2YXIgbz10W3M+Pj4yXT4+PjI0LXMlNCo4JjI1NTtyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShvKSl9cmV0dXJuIHIuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxuPVtdLHI9MDtyPHQ7cisrKW5bcj4+PjJdfD0oMjU1JmUuY2hhckNvZGVBdChyKSk8PDI0LXIlNCo4O3JldHVybiBuZXcgaS5pbml0KG4sdCl9fSxsPWEuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZSh1LnN0cmluZ2lmeShlKSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiB1LnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlKSkpfX0sZD1zLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09by5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgaS5pbml0LHRoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihlKXsic3RyaW5nIj09dHlwZW9mIGUmJihlPWwucGFyc2UoZSkpLHRoaXMuX2RhdGEuY29uY2F0KGUpLHRoaXMuX25EYXRhQnl0ZXMrPWUuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuX2RhdGEscj1uLndvcmRzLHM9bi5zaWdCeXRlcyxvPXRoaXMuYmxvY2tTaXplLGE9cy8oNCpvKSxjPShhPXQ/ZS5jZWlsKGEpOmUubWF4KCgwfGEpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKm8sdT1lLm1pbig0KmMscyk7aWYoYyl7Zm9yKHZhciBsPTA7bDxjO2wrPW8pdGhpcy5fZG9Qcm9jZXNzQmxvY2socixsKTt2YXIgZD1yLnNwbGljZSgwLGMpO24uc2lnQnl0ZXMtPXV9cmV0dXJuIG5ldyBpLmluaXQoZCx1KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZT1vLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGUuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpLGV9LF9taW5CdWZmZXJTaXplOjB9KSxoPShzLkhhc2hlcj1kLmV4dGVuZCh7Y2ZnOm8uZXh0ZW5kKCksaW5pdDpmdW5jdGlvbihlKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoZSksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2QucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYXBwZW5kKGUpLHRoaXMuX3Byb2Nlc3MoKSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fYXBwZW5kKGUpLHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlLmluaXQobikuZmluYWxpemUodCl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGguSE1BQy5pbml0KGUsbikuZmluYWxpemUodCl9fX0pLHIuYWxnbz17fSk7cmV0dXJuIHJ9KE1hdGgpLG4pfSkpLEFlPWJlKChmdW5jdGlvbihlLHQpe3ZhciBuO2UuZXhwb3J0cz0obj1fZSxmdW5jdGlvbigpe3ZhciBlPW4sdD1lLmxpYi5Xb3JkQXJyYXk7ZnVuY3Rpb24gcihlLG4scil7Zm9yKHZhciBzPVtdLG89MCxpPTA7aTxuO2krKylpZihpJTQpe3ZhciBhPXJbZS5jaGFyQ29kZUF0KGktMSldPDxpJTQqMixjPXJbZS5jaGFyQ29kZUF0KGkpXT4+PjYtaSU0KjI7c1tvPj4+Ml18PShhfGMpPDwyNC1vJTQqOCxvKyt9cmV0dXJuIHQuY3JlYXRlKHMsbyl9ZS5lbmMuQmFzZTY0PXtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53b3JkcyxuPWUuc2lnQnl0ZXMscj10aGlzLl9tYXA7ZS5jbGFtcCgpO2Zvcih2YXIgcz1bXSxvPTA7bzxuO28rPTMpZm9yKHZhciBpPSh0W28+Pj4yXT4+PjI0LW8lNCo4JjI1NSk8PDE2fCh0W28rMT4+PjJdPj4+MjQtKG8rMSklNCo4JjI1NSk8PDh8dFtvKzI+Pj4yXT4+PjI0LShvKzIpJTQqOCYyNTUsYT0wO2E8NCYmbysuNzUqYTxuO2ErKylzLnB1c2goci5jaGFyQXQoaT4+PjYqKDMtYSkmNjMpKTt2YXIgYz1yLmNoYXJBdCg2NCk7aWYoYylmb3IoO3MubGVuZ3RoJTQ7KXMucHVzaChjKTtyZXR1cm4gcy5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGgsbj10aGlzLl9tYXAscz10aGlzLl9yZXZlcnNlTWFwO2lmKCFzKXtzPXRoaXMuX3JldmVyc2VNYXA9W107Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspc1tuLmNoYXJDb2RlQXQobyldPW99dmFyIGk9bi5jaGFyQXQoNjQpO2lmKGkpe3ZhciBhPWUuaW5kZXhPZihpKTstMSE9PWEmJih0PWEpfXJldHVybiByKGUsdCxzKX0sX21hcDoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0ifX0oKSxuLmVuYy5CYXNlNjQpfSkpLEVlPWJlKChmdW5jdGlvbihlLHQpe3ZhciBuO2UuZXhwb3J0cz0obj1fZSxmdW5jdGlvbigpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBBcnJheUJ1ZmZlcil7dmFyIGU9bi5saWIuV29yZEFycmF5LHQ9ZS5pbml0OyhlLmluaXQ9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYoZT1uZXcgVWludDhBcnJheShlKSksKGUgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJmUgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8ZSBpbnN0YW5jZW9mIEludDE2QXJyYXl8fGUgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8ZSBpbnN0YW5jZW9mIEludDMyQXJyYXl8fGUgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8ZSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8ZSBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJihlPW5ldyBVaW50OEFycmF5KGUuYnVmZmVyLGUuYnl0ZU9mZnNldCxlLmJ5dGVMZW5ndGgpKSxlIGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBuPWUuYnl0ZUxlbmd0aCxyPVtdLHM9MDtzPG47cysrKXJbcz4+PjJdfD1lW3NdPDwyNC1zJTQqODt0LmNhbGwodGhpcyxyLG4pfWVsc2UgdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5wcm90b3R5cGU9ZX19KCksbi5saWIuV29yZEFycmF5KX0pKSxQZT1iZSgoZnVuY3Rpb24oZSx0KXt2YXIgbjtlLmV4cG9ydHM9KG49X2UsZnVuY3Rpb24oZSl7dmFyIHQ9bixyPXQubGliLHM9ci5Xb3JkQXJyYXksbz1yLkhhc2hlcixpPXQuYWxnbyxhPVtdLGM9W107IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtmb3IodmFyIG49ZS5zcXJ0KHQpLHI9MjtyPD1uO3IrKylpZighKHQlcikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gbihlKXtyZXR1cm4gNDI5NDk2NzI5NiooZS0oMHxlKSl8MH1mb3IodmFyIHI9MixzPTA7czw2NDspdChyKSYmKHM8OCYmKGFbc109bihlLnBvdyhyLC41KSkpLGNbc109bihlLnBvdyhyLDEvMykpLHMrKykscisrfSgpO3ZhciB1PVtdLGw9aS5TSEEyNTY9by5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgcy5pbml0KGEuc2xpY2UoMCkpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49dGhpcy5faGFzaC53b3JkcyxyPW5bMF0scz1uWzFdLG89blsyXSxpPW5bM10sYT1uWzRdLGw9bls1XSxkPW5bNl0saD1uWzddLHA9MDtwPDY0O3ArKyl7aWYocDwxNil1W3BdPTB8ZVt0K3BdO2Vsc2V7dmFyIGY9dVtwLTE1XSxtPShmPDwyNXxmPj4+NyleKGY8PDE0fGY+Pj4xOCleZj4+PjMsZz11W3AtMl0seT0oZzw8MTV8Zz4+PjE3KV4oZzw8MTN8Zz4+PjE5KV5nPj4+MTA7dVtwXT1tK3VbcC03XSt5K3VbcC0xNl19dmFyIHY9ciZzXnImb15zJm8sdz0ocjw8MzB8cj4+PjIpXihyPDwxOXxyPj4+MTMpXihyPDwxMHxyPj4+MjIpLGs9aCsoKGE8PDI2fGE+Pj42KV4oYTw8MjF8YT4+PjExKV4oYTw8N3xhPj4+MjUpKSsoYSZsXn5hJmQpK2NbcF0rdVtwXTtoPWQsZD1sLGw9YSxhPWkra3wwLGk9byxvPXMscz1yLHI9aysodyt2KXwwfW5bMF09blswXStyfDAsblsxXT1uWzFdK3N8MCxuWzJdPW5bMl0rb3wwLG5bM109blszXStpfDAsbls0XT1uWzRdK2F8MCxuWzVdPW5bNV0rbHwwLG5bNl09bls2XStkfDAsbls3XT1uWzddK2h8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLG49dC53b3JkcyxyPTgqdGhpcy5fbkRhdGFCeXRlcyxzPTgqdC5zaWdCeXRlcztyZXR1cm4gbltzPj4+NV18PTEyODw8MjQtcyUzMixuWzE0KyhzKzY0Pj4+OTw8NCldPWUuZmxvb3Ioci80Mjk0OTY3Mjk2KSxuWzE1KyhzKzY0Pj4+OTw8NCldPXIsdC5zaWdCeXRlcz00Km4ubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPW8uY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX19KTt0LlNIQTI1Nj1vLl9jcmVhdGVIZWxwZXIobCksdC5IbWFjU0hBMjU2PW8uX2NyZWF0ZUhtYWNIZWxwZXIobCl9KE1hdGgpLG4uU0hBMjU2KX0pKTtjb25zdCBDZT1uZXcgVGV4dEVuY29kZXIsSWU9bmV3IFRleHREZWNvZGVyO3ZhciBUZT1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcylyZXR1cm4gZ2xvYmFsVGhpcztpZigidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYpcmV0dXJuIHNlbGY7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cpcmV0dXJuIHdpbmRvdzt0aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCIpfSgpO2NvbnN0IGplPWU9PntsZXQgdD1lO3JldHVybiB0IGluc3RhbmNlb2YgVWludDhBcnJheSYmKHQ9SWUuZGVjb2RlKHQpKSx0PXQucmVwbGFjZSgvLS9nLCIrIikucmVwbGFjZSgvXy9nLCIvIikucmVwbGFjZSgvXHMvZywiIiksbmV3IFVpbnQ4QXJyYXkoVGUuYXRvYih0KS5zcGxpdCgiIikubWFwKChlPT5lLmNoYXJDb2RlQXQoMCkpKSl9O2NsYXNzIFJlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSk9TRV9HRU5FUklDIix0aGlzLm5hbWU9dGhpcy5jb25zdHJ1Y3Rvci5uYW1lLEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRoaXMuY29uc3RydWN0b3IpfX1jbGFzcyB4ZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKGUsdD0idW5zcGVjaWZpZWQiLG49InVuc3BlY2lmaWVkIil7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEIix0aGlzLmNsYWltPXQsdGhpcy5yZWFzb249bn19Y2xhc3MgT2UgZXh0ZW5kcyBSZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSk9TRV9BTEdfTk9UX0FMTE9XRUQifX1jbGFzcyBIZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KT1NFX05PVF9TVVBQT1JURUQifX1jbGFzcyBxZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV1NfSU5WQUxJRCJ9fWNsYXNzIE1lIGV4dGVuZHMgUmV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXVF9JTlZBTElEIn19Y2xhc3MgVWUgZXh0ZW5kcyBSZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldTX1NJR05BVFVSRV9WRVJJRklDQVRJT05fRkFJTEVEIix0aGlzLm1lc3NhZ2U9InNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkIn19Y2xhc3MgV2UgZXh0ZW5kcyB4ZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldUX0VYUElSRUQifX12YXIgQmU9VGUuY3J5cHRvO2Z1bmN0aW9uIERlKCl7aWYoIVRlLmlzU2VjdXJlQ29udGV4dCYmIVRlLmNyeXB0by5zdWJ0bGUpdGhyb3cgbmV3IFJlKCJXZWIgQ3J5cHRvZ3JhcGh5IEFQSSBpcyBhdmFpbGFibGUgb25seSBpbiBTZWN1cmUgQ29udGV4dHMuIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU2VjdXJpdHkvU2VjdXJlX0NvbnRleHRzIil9Y29uc3QgTmU9YXN5bmMgZT0+e3ZhciB0LG47Y29uc3R7YWxnb3JpdGhtOnIsa2V5VXNhZ2VzOnN9PWZ1bmN0aW9uKGUpe2xldCB0LG47c3dpdGNoKGUua3R5KXtjYXNlIm9jdCI6c3dpdGNoKGUuYWxnKXtjYXNlIkhTMjU2IjpjYXNlIkhTMzg0IjpjYXNlIkhTNTEyIjp0PXtuYW1lOiJITUFDIixoYXNoOmBTSEEtJHtlLmFsZy5zdWJzdHIoLTMpfWB9LG49WyJzaWduIiwidmVyaWZ5Il07YnJlYWs7Y2FzZSJBMTI4Q0JDLUhTMjU2IjpjYXNlIkExOTJDQkMtSFMzODQiOmNhc2UiQTI1NkNCQy1IUzUxMiI6dGhyb3cgbmV3IEhlKGAke2UuYWxnfSBrZXlzIGNhbm5vdCBiZSBpbXBvcnRlZCBhcyBDcnlwdG9LZXkgaW5zdGFuY2VzYCk7Y2FzZSJBMTI4R0NNIjpjYXNlIkExOTJHQ00iOmNhc2UiQTI1NkdDTSI6Y2FzZSJBMTI4R0NNS1ciOmNhc2UiQTE5MkdDTUtXIjpjYXNlIkEyNTZHQ01LVyI6dD17bmFtZToiQUVTLUdDTSJ9LG49WyJlbmNyeXB0IiwiZGVjcnlwdCJdO2JyZWFrO2Nhc2UiQTEyOEtXIjpjYXNlIkExOTJLVyI6Y2FzZSJBMjU2S1ciOnQ9e25hbWU6IkFFUy1LVyJ9LG49WyJ3cmFwS2V5IiwidW53cmFwS2V5Il07YnJlYWs7Y2FzZSJQQkVTMi1IUzI1NitBMTI4S1ciOmNhc2UiUEJFUzItSFMzODQrQTE5MktXIjpjYXNlIlBCRVMyLUhTNTEyK0EyNTZLVyI6dD17bmFtZToiUEJLREYyIn0sbj1bImRlcml2ZUJpdHMiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBIZSgndW5zdXBwb3J0ZWQgb3IgaW52YWxpZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSJSU0EiOnN3aXRjaChlLmFsZyl7Y2FzZSJQUzI1NiI6Y2FzZSJQUzM4NCI6Y2FzZSJQUzUxMiI6dD17bmFtZToiUlNBLVBTUyIsaGFzaDpgU0hBLSR7ZS5hbGcuc3Vic3RyKC0zKX1gfSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiUlMyNTYiOmNhc2UiUlMzODQiOmNhc2UiUlM1MTIiOnQ9e25hbWU6IlJTQVNTQS1QS0NTMS12MV81IixoYXNoOmBTSEEtJHtlLmFsZy5zdWJzdHIoLTMpfWB9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJSU0EtT0FFUCI6Y2FzZSJSU0EtT0FFUC0yNTYiOmNhc2UiUlNBLU9BRVAtMzg0IjpjYXNlIlJTQS1PQUVQLTUxMiI6dD17bmFtZToiUlNBLU9BRVAiLGhhc2g6YFNIQS0ke3BhcnNlSW50KGUuYWxnLnN1YnN0cigtMyksMTApfHwxfWB9LG49ZS5kP1siZGVjcnlwdCIsInVud3JhcEtleSJdOlsiZW5jcnlwdCIsIndyYXBLZXkiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBIZSgndW5zdXBwb3J0ZWQgb3IgaW52YWxpZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSJFQyI6c3dpdGNoKGUuYWxnKXtjYXNlIkVTMjU2IjpjYXNlIkVTMzg0IjpjYXNlIkVTNTEyIjp0PXtuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZTplLmNydn0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIkVDREgtRVMiOmNhc2UiRUNESC1FUytBMTI4S1ciOmNhc2UiRUNESC1FUytBMTkyS1ciOmNhc2UiRUNESC1FUytBMjU2S1ciOnQ9e25hbWU6IkVDREgiLG5hbWVkQ3VydmU6ZS5jcnZ9LG49ZS5kP1siZGVyaXZlQml0cyJdOltdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEhlKCd1bnN1cHBvcnRlZCBvciBpbnZhbGlkIEpXSyAiYWxnIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKX1icmVhaztkZWZhdWx0OnRocm93IG5ldyBIZSgndW5zdXBwb3J0ZWQgb3IgaW52YWxpZCBKV0sgImt0eSIgKEtleSBUeXBlKSBQYXJhbWV0ZXIgdmFsdWUnKX1yZXR1cm57YWxnb3JpdGhtOnQsa2V5VXNhZ2VzOm59fShlKTtsZXQgbz0iandrIixpPXsuLi5lfTtyZXR1cm4gZGVsZXRlIGkuYWxnLCJQQktERjIiPT09ci5uYW1lJiYobz0icmF3IixpPWplKGUuaykpLERlKCksQmUuc3VidGxlLmltcG9ydEtleShvLGkscixudWxsIT09KHQ9ZS5leHQpJiZ2b2lkIDAhPT10JiZ0LG51bGwhPT0obj1lLmtleV9vcHMpJiZ2b2lkIDAhPT1uP246cyl9O2Z1bmN0aW9uIExlKGUpe3JldHVybiEhZSYmZS5jb25zdHJ1Y3Rvcj09PU9iamVjdH1hc3luYyBmdW5jdGlvbiBLZShlLHQsbil7aWYoIUxlKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkpXSyBtdXN0IGJlIGFuIG9iamVjdCIpO2lmKHR8fCh0PWUuYWxnKSwic3RyaW5nIiE9dHlwZW9mIHR8fCF0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJhbGciIGFyZ3VtZW50IGlzIHJlcXVpcmVkIHdoZW4gImp3ay5hbGciIGlzIG5vdCBwcmVzZW50Jyk7c3dpdGNoKGUua3R5KXtjYXNlIm9jdCI6aWYoInN0cmluZyIhPXR5cGVvZiBlLmt8fCFlLmspdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyAiayIgKEtleSBWYWx1ZSkgUGFyYW1ldGVyIHZhbHVlJyk7cmV0dXJuIG51bGwhPW58fChuPSEwIT09ZS5leHQpLG4/TmUoey4uLmUsYWxnOnQsZXh0OiExfSk6amUoZS5rKTtjYXNlIlJTQSI6aWYodm9pZCAwIT09ZS5vdGgpdGhyb3cgbmV3IEhlKCdSU0EgSldLICJvdGgiIChPdGhlciBQcmltZXMgSW5mbykgUGFyYW1ldGVyIHZhbHVlIGlzIHVuc3VwcG9ydGVkJyk7Y2FzZSJFQyI6Y2FzZSJPS1AiOnJldHVybiBOZSh7Li4uZSxhbGc6dH0pO2RlZmF1bHQ6dGhyb3cgbmV3IEhlKCd1bnN1cHBvcnRlZCAia3R5IiAoS2V5IFR5cGUpIFBhcmFtZXRlciB2YWx1ZScpfX1jb25zdCBKZT1hc3luYyhlLHQsbixyKT0+e2xldCBzO2lmKERlKCksdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2lmKCFlLnN0YXJ0c1dpdGgoIkhTIikpdGhyb3cgbmV3IFR5cGVFcnJvcigic3ltbWV0cmljIGtleXMgYXJlIG9ubHkgYXBwbGljYWJsZSBmb3IgSE1BQy1iYXNlZCBhbGdvcml0aG1zIik7cz1hd2FpdCBCZS5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLHQse2hhc2g6YFNIQS0ke2Uuc3Vic3RyKC0zKX1gLG5hbWU6IkhNQUMifSwhMSxbInZlcmlmeSJdKX1lbHNlIHM9dDtyZXR1cm4oKGUsdCk9PntpZihlLnN0YXJ0c1dpdGgoIkhTIikpe2NvbnN0IG49cGFyc2VJbnQoZS5zdWJzdHIoLTMpLDEwKSx7bGVuZ3RoOnJ9PXQuYWxnb3JpdGhtO2lmKCJudW1iZXIiIT10eXBlb2Ygcnx8cjxuKXRocm93IG5ldyBUeXBlRXJyb3IoYCR7ZX0gcmVxdWlyZXMgc3ltbWV0cmljIGtleXMgdG8gYmUgJHtufSBiaXRzIG9yIGxhcmdlcmApfWlmKGUuc3RhcnRzV2l0aCgiUlMiKXx8ZS5zdGFydHNXaXRoKCJQUyIpKXtjb25zdHttb2R1bHVzTGVuZ3RoOm59PXQuYWxnb3JpdGhtO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8bjwyMDQ4KXRocm93IG5ldyBUeXBlRXJyb3IoYCR7ZX0gcmVxdWlyZXMga2V5IG1vZHVsdXNMZW5ndGggdG8gYmUgMjA0OCBiaXRzIG9yIGxhcmdlcmApfX0pKGUscyksQmUuc3VidGxlLnZlcmlmeShmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSJIUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IkhNQUMifTtjYXNlIkhTMzg0IjpyZXR1cm57aGFzaDoiU0hBLTM4NCIsbmFtZToiSE1BQyJ9O2Nhc2UiSFM1MTIiOnJldHVybntoYXNoOiJTSEEtNTEyIixuYW1lOiJITUFDIn07Y2FzZSJQUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IlJTQS1QU1MiLHNhbHRMZW5ndGg6MzJ9O2Nhc2UiUFMzODQiOnJldHVybntoYXNoOiJTSEEtMzg0IixuYW1lOiJSU0EtUFNTIixzYWx0TGVuZ3RoOjQ4fTtjYXNlIlBTNTEyIjpyZXR1cm57aGFzaDoiU0hBLTUxMiIsbmFtZToiUlNBLVBTUyIsc2FsdExlbmd0aDo2NH07Y2FzZSJSUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJSUzM4NCI6cmV0dXJue2hhc2g6IlNIQS0zODQiLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJSUzUxMiI6cmV0dXJue2hhc2g6IlNIQS01MTIiLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJFUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IkVDRFNBIixuYW1lZEN1cnZlOiJQLTI1NiJ9O2Nhc2UiRVMzODQiOnJldHVybntoYXNoOiJTSEEtMzg0IixuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZToiUC0zODQifTtjYXNlIkVTNTEyIjpyZXR1cm57aGFzaDoiU0hBLTUxMiIsbmFtZToiRUNEU0EiLG5hbWVkQ3VydmU6IlAtNTIxIn07ZGVmYXVsdDp0aHJvdyBuZXcgSGUoYGFsZyAke2V9IGlzIHVuc3VwcG9ydGVkIGVpdGhlciBieSBKT1NFIG9yIHlvdXIgamF2YXNjcmlwdCBydW50aW1lYCl9fShlKSxzLG4scil9O2NvbnN0IEZlPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKHZvaWQgMCE9PXIuY3JpdCYmdm9pZCAwPT09bi5jcml0KXRocm93IG5ldyBlKCciY3JpdCIgKENyaXRpY2FsKSBIZWFkZXIgUGFyYW1ldGVyIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZCcpO2lmKCFufHx2b2lkIDA9PT1uLmNyaXQpcmV0dXJuIG5ldyBTZXQ7aWYoIUFycmF5LmlzQXJyYXkobi5jcml0KXx8MD09PW4uY3JpdC5sZW5ndGh8fG4uY3JpdC5zb21lKChlPT4ic3RyaW5nIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aCkpKXRocm93IG5ldyBlKCciY3JpdCIgKENyaXRpY2FsKSBIZWFkZXIgUGFyYW1ldGVyIE1VU1QgYmUgYW4gYXJyYXkgb2Ygbm9uLWVtcHR5IHN0cmluZ3Mgd2hlbiBwcmVzZW50Jyk7Zm9yKGNvbnN0IHMgb2Ygbi5jcml0KXtpZighdC5oYXMocykpdGhyb3cgbmV3IEhlKGBFeHRlbnNpb24gSGVhZGVyIFBhcmFtZXRlciAiJHtzfSIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uYCk7aWYodm9pZCAwPT09cltzXSl0aHJvdyBuZXcgZShgRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIiR7c30iIGlzIG1pc3NpbmdgKTtpZih0LmdldChzKSYmdm9pZCAwPT09bltzXSl0aHJvdyBuZXcgZShgRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIiR7c30iIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZGApfXJldHVybiBuZXcgU2V0KG4uY3JpdCl9LmJpbmQodm9pZCAwLHFlLG5ldyBNYXAoW1siYjY0IiwhMF1dKSksJGU9KChlLHQpPT57aWYodm9pZCAwIT09dCYmKCFBcnJheS5pc0FycmF5KHQpfHx0LnNvbWUoKGU9PiJzdHJpbmciIT10eXBlb2YgZSkpKSl0aHJvdyBuZXcgVHlwZUVycm9yKGAiJHtlfSIgb3B0aW9uIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5nc2ApO2lmKHQpcmV0dXJuIG5ldyBTZXQodCl9KS5iaW5kKHZvaWQgMCwiYWxnb3JpdGhtcyIpO2FzeW5jIGZ1bmN0aW9uIHplKGUsdCxuKXtpZighTGUoZSkpdGhyb3cgbmV3IHFlKCJGbGF0dGVuZWQgSldTIG11c3QgYmUgYW4gb2JqZWN0Iik7aWYodm9pZCAwPT09ZS5wcm90ZWN0ZWQmJnZvaWQgMD09PWUuaGVhZGVyKXRocm93IG5ldyBxZSgnRmxhdHRlbmVkIEpXUyBtdXN0IGhhdmUgZWl0aGVyIG9mIHRoZSAicHJvdGVjdGVkIiBvciAiaGVhZGVyIiBtZW1iZXJzJyk7aWYodm9pZCAwIT09ZS5wcm90ZWN0ZWQmJiJzdHJpbmciIT10eXBlb2YgZS5wcm90ZWN0ZWQpdGhyb3cgbmV3IHFlKCJKV1MgUHJvdGVjdGVkIEhlYWRlciBpbmNvcnJlY3QgdHlwZSIpO2lmKHZvaWQgMD09PWUucGF5bG9hZCl0aHJvdyBuZXcgcWUoIkpXUyBQYXlsb2FkIG1pc3NpbmciKTtpZigic3RyaW5nIiE9dHlwZW9mIGUuc2lnbmF0dXJlKXRocm93IG5ldyBxZSgiSldTIFNpZ25hdHVyZSBtaXNzaW5nIG9yIGluY29ycmVjdCB0eXBlIik7aWYodm9pZCAwIT09ZS5oZWFkZXImJiFMZShlLmhlYWRlcikpdGhyb3cgbmV3IHFlKCJKV1MgVW5wcm90ZWN0ZWQgSGVhZGVyIGluY29ycmVjdCB0eXBlIik7bGV0IHI9e307aWYoZS5wcm90ZWN0ZWQpe2NvbnN0IHQ9amUoZS5wcm90ZWN0ZWQpO3I9SlNPTi5wYXJzZShJZS5kZWNvZGUodCkpfWlmKCEoKC4uLmUpPT57Y29uc3QgdD1lLmZpbHRlcihCb29sZWFuKTtpZigwPT09dC5sZW5ndGh8fDE9PT10Lmxlbmd0aClyZXR1cm4hMDtsZXQgbjtmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PU9iamVjdC5rZXlzKGUpO2lmKG4mJjAhPT1uLnNpemUpZm9yKGNvbnN0IGUgb2YgdCl7aWYobi5oYXMoZSkpcmV0dXJuITE7bi5hZGQoZSl9ZWxzZSBuPW5ldyBTZXQodCl9cmV0dXJuITB9KShyLGUuaGVhZGVyKSl0aHJvdyBuZXcgcWUoIkpXUyBQcm90ZWN0ZWQgYW5kIEpXUyBVbnByb3RlY3RlZCBIZWFkZXIgUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgZGlzam9pbnQiKTtjb25zdCBzPXsuLi5yLC4uLmUuaGVhZGVyfTtsZXQgbz0hMDtpZihGZShyLHMpLmhhcygiYjY0IikmJihvPXIuYjY0LCJib29sZWFuIiE9dHlwZW9mIG8pKXRocm93IG5ldyBxZSgnVGhlICJiNjQiIChiYXNlNjR1cmwtZW5jb2RlIHBheWxvYWQpIEhlYWRlciBQYXJhbWV0ZXIgbXVzdCBiZSBhIGJvb2xlYW4nKTtjb25zdHthbGc6aX09cztpZigic3RyaW5nIiE9dHlwZW9mIGl8fCFpKXRocm93IG5ldyBxZSgnSldTICJhbGciIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbWlzc2luZyBvciBpbnZhbGlkJyk7Y29uc3QgYT1uJiYkZShuLmFsZ29yaXRobXMpO2lmKGEmJiFhLmhhcyhpKSl0aHJvdyBuZXcgT2UoJyJhbGciIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbm90IGFsbG93ZWQnKTtpZihvKXtpZigic3RyaW5nIiE9dHlwZW9mIGUucGF5bG9hZCl0aHJvdyBuZXcgcWUoIkpXUyBQYXlsb2FkIG11c3QgYmUgYSBzdHJpbmciKX1lbHNlIGlmKCJzdHJpbmciIT10eXBlb2YgZS5wYXlsb2FkJiYhKGUucGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXRocm93IG5ldyBxZSgiSldTIFBheWxvYWQgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBVaW50OEFycmF5IGluc3RhbmNlIik7ImZ1bmN0aW9uIj09dHlwZW9mIHQmJih0PWF3YWl0IHQocixlKSksKChlLHQpPT57aWYoZS5zdGFydHNXaXRoKCJIUyIpfHwiZGlyIj09PWV8fGUuc3RhcnRzV2l0aCgiUEJFUzIiKXx8ZS5tYXRjaCgvXkFcZHszfSg/OkdDTSlLVyQvKSl7aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fCJzZWNyZXQiPT09dC50eXBlKXJldHVybjt0aHJvdyBuZXcgVHlwZUVycm9yKCdDcnlwdG9LZXkgb3IgS2V5T2JqZWN0IGluc3RhbmNlcyBmb3Igc3ltbWV0cmljIGFsZ29yaXRobXMgbXVzdCBiZSBvZiB0eXBlICJzZWNyZXQiJyl9aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ3J5cHRvS2V5IG9yIEtleU9iamVjdCBpbnN0YW5jZXMgbXVzdCBiZSB1c2VkIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobXMiKTtpZigic2VjcmV0Ij09PXQudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdDcnlwdG9LZXkgb3IgS2V5T2JqZWN0IGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG1zIG11c3Qgbm90IGJlIG9mIHR5cGUgInNlY3JldCInKX0pKGksdCk7Y29uc3QgYz1mdW5jdGlvbiguLi5lKXtjb25zdCB0PWUucmVkdWNlKCgoZSx7bGVuZ3RoOnR9KT0+ZSt0KSwwKSxuPW5ldyBVaW50OEFycmF5KHQpO2xldCByPTA7cmV0dXJuIGUuZm9yRWFjaCgoZT0+e24uc2V0KGUscikscis9ZS5sZW5ndGh9KSksbn0oQ2UuZW5jb2RlKGUucHJvdGVjdGVkfHwiIiksQ2UuZW5jb2RlKCIuIiksInN0cmluZyI9PXR5cGVvZiBlLnBheWxvYWQ/Q2UuZW5jb2RlKGUucGF5bG9hZCk6ZS5wYXlsb2FkKSx1PWplKGUuc2lnbmF0dXJlKTtpZighYXdhaXQgSmUoaSx0LHUsYykpdGhyb3cgbmV3IFVlO2xldCBsO2w9bz9qZShlLnBheWxvYWQpOiJzdHJpbmciPT10eXBlb2YgZS5wYXlsb2FkP0NlLmVuY29kZShlLnBheWxvYWQpOmUucGF5bG9hZDtjb25zdCBkPXtwYXlsb2FkOmx9O3JldHVybiB2b2lkIDAhPT1lLnByb3RlY3RlZCYmKGQucHJvdGVjdGVkSGVhZGVyPXIpLHZvaWQgMCE9PWUuaGVhZGVyJiYoZC51bnByb3RlY3RlZEhlYWRlcj1lLmhlYWRlciksZH1jb25zdCBHZT04NjQwMCxWZT0vXihcZCt8XGQrXC5cZCspID8oc2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KSQvaTt2YXIgWWU9ZT0+e2NvbnN0IHQ9VmUuZXhlYyhlKTtpZighdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIHRpbWUgcGVyaW9kIGZvcm1hdCIpO2NvbnN0IG49cGFyc2VGbG9hdCh0WzFdKTtzd2l0Y2godFsyXS50b0xvd2VyQ2FzZSgpKXtjYXNlInNlYyI6Y2FzZSJzZWNzIjpjYXNlInNlY29uZCI6Y2FzZSJzZWNvbmRzIjpjYXNlInMiOnJldHVybiBNYXRoLnJvdW5kKG4pO2Nhc2UibWludXRlIjpjYXNlIm1pbnV0ZXMiOmNhc2UibWluIjpjYXNlIm1pbnMiOmNhc2UibSI6cmV0dXJuIE1hdGgucm91bmQoNjAqbik7Y2FzZSJob3VyIjpjYXNlImhvdXJzIjpjYXNlImhyIjpjYXNlImhycyI6Y2FzZSJoIjpyZXR1cm4gTWF0aC5yb3VuZCgzNjAwKm4pO2Nhc2UiZGF5IjpjYXNlImRheXMiOmNhc2UiZCI6cmV0dXJuIE1hdGgucm91bmQobipHZSk7Y2FzZSJ3ZWVrIjpjYXNlIndlZWtzIjpjYXNlInciOnJldHVybiBNYXRoLnJvdW5kKDYwNDgwMCpuKTtkZWZhdWx0OnJldHVybiBNYXRoLnJvdW5kKDMxNTU3NjAwKm4pfX07Y29uc3QgWGU9ZT0+ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15hcHBsaWNhdGlvblwvLywiIik7dmFyIFFlPShlLHQsbj17fSk9Pntjb25zdHt0eXA6cn09bjtpZihyJiYoInN0cmluZyIhPXR5cGVvZiBlLnR5cHx8WGUoZS50eXApIT09WGUocikpKXRocm93IG5ldyB4ZSgndW5leHBlY3RlZCAidHlwIiBKV1QgaGVhZGVyIHZhbHVlJywidHlwIiwiY2hlY2tfZmFpbGVkIik7bGV0IHM7dHJ5e3M9SlNPTi5wYXJzZShJZS5kZWNvZGUodCkpfWNhdGNoKGUpe31pZigib2JqZWN0IiE9dHlwZW9mIHN8fCFzfHxBcnJheS5pc0FycmF5KHMpKXRocm93IG5ldyBNZSgiSldUIENsYWltcyBTZXQgbXVzdCBiZSBhIHRvcC1sZXZlbCBKU09OIG9iamVjdCIpO2NvbnN0e2lzc3VlcjpvfT1uO2lmKG8mJiEoInN0cmluZyI9PXR5cGVvZiBvP1tvXTpvKS5pbmNsdWRlcyhzLmlzcykpdGhyb3cgbmV3IHhlKCd1bmV4cGVjdGVkICJpc3MiIGNsYWltIHZhbHVlJywiaXNzIiwiY2hlY2tfZmFpbGVkIik7Y29uc3R7c3ViamVjdDppfT1uO2lmKGkmJnMuc3ViIT09aSl0aHJvdyBuZXcgeGUoJ3VuZXhwZWN0ZWQgInN1YiIgY2xhaW0gdmFsdWUnLCJzdWIiLCJjaGVja19mYWlsZWQiKTtjb25zdHthdWRpZW5jZTphfT1uO2lmKGEmJihjPXMuYXVkLHU9InN0cmluZyI9PXR5cGVvZiBhP1thXTphLCEoInN0cmluZyI9PXR5cGVvZiBjP3UuaW5jbHVkZXMoYyk6dS5zb21lKFNldC5wcm90b3R5cGUuaGFzLmJpbmQobmV3IFNldChjKSkpKSkpdGhyb3cgbmV3IHhlKCd1bmV4cGVjdGVkICJhdWQiIGNsYWltIHZhbHVlJywiYXVkIiwiY2hlY2tfZmFpbGVkIik7dmFyIGMsdTtsZXQgbDtzd2l0Y2godHlwZW9mIG4uY2xvY2tUb2xlcmFuY2Upe2Nhc2Uic3RyaW5nIjpsPVllKG4uY2xvY2tUb2xlcmFuY2UpO2JyZWFrO2Nhc2UibnVtYmVyIjpsPW4uY2xvY2tUb2xlcmFuY2U7YnJlYWs7Y2FzZSJ1bmRlZmluZWQiOmw9MDticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgY2xvY2tUb2xlcmFuY2Ugb3B0aW9uIHR5cGUiKX1jb25zdHtjdXJyZW50RGF0ZTpkfT1uLGg9KHA9ZHx8bmV3IERhdGUsTWF0aC5mbG9vcihwLmdldFRpbWUoKS8xZTMpKTt2YXIgcDtpZih2b2lkIDAhPT1zLmlhdHx8bi5tYXhUb2tlbkFnZSl7aWYoIm51bWJlciIhPXR5cGVvZiBzLmlhdCl0aHJvdyBuZXcgeGUoJyJpYXQiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJpYXQiLCJpbnZhbGlkIik7aWYodm9pZCAwPT09cy5leHAmJnMuaWF0PmgrbCl0aHJvdyBuZXcgeGUoJyJpYXQiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQgKGl0IHNob3VsZCBiZSBpbiB0aGUgcGFzdCknLCJpYXQiLCJjaGVja19mYWlsZWQiKX1pZih2b2lkIDAhPT1zLm5iZil7aWYoIm51bWJlciIhPXR5cGVvZiBzLm5iZil0aHJvdyBuZXcgeGUoJyJuYmYiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJuYmYiLCJpbnZhbGlkIik7aWYocy5uYmY+aCtsKXRocm93IG5ldyB4ZSgnIm5iZiIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsIm5iZiIsImNoZWNrX2ZhaWxlZCIpfWlmKHZvaWQgMCE9PXMuZXhwKXtpZigibnVtYmVyIiE9dHlwZW9mIHMuZXhwKXRocm93IG5ldyB4ZSgnImV4cCIgY2xhaW0gbXVzdCBiZSBhIG51bWJlcicsImV4cCIsImludmFsaWQiKTtpZihzLmV4cDw9aC1sKXRocm93IG5ldyBXZSgnImV4cCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsImV4cCIsImNoZWNrX2ZhaWxlZCIpfWlmKG4ubWF4VG9rZW5BZ2Upe2NvbnN0IGU9aC1zLmlhdDtpZihlLWw+KCJudW1iZXIiPT10eXBlb2Ygbi5tYXhUb2tlbkFnZT9uLm1heFRva2VuQWdlOlllKG4ubWF4VG9rZW5BZ2UpKSl0aHJvdyBuZXcgV2UoJyJpYXQiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQgKHRvbyBmYXIgaW4gdGhlIHBhc3QpJywiaWF0IiwiY2hlY2tfZmFpbGVkIik7aWYoZTwwLWwpdGhyb3cgbmV3IHhlKCciaWF0IiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkIChpdCBzaG91bGQgYmUgaW4gdGhlIHBhc3QpJywiaWF0IiwiY2hlY2tfZmFpbGVkIil9cmV0dXJuIHN9O2FzeW5jIGZ1bmN0aW9uIFplKGUsdCxuKXtjb25zdCByPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCxuKXtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheSYmKGU9SWUuZGVjb2RlKGUpKSwic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IHFlKCJDb21wYWN0IEpXUyBtdXN0IGJlIGEgc3RyaW5nIG9yIFVpbnQ4QXJyYXkiKTtjb25zdHswOnIsMTpzLDI6byxsZW5ndGg6aX09ZS5zcGxpdCgiLiIpO2lmKDMhPT1pKXRocm93IG5ldyBxZSgiSW52YWxpZCBDb21wYWN0IEpXUyIpO2NvbnN0IGE9YXdhaXQgemUoe3BheWxvYWQ6c3x8dm9pZCAwLHByb3RlY3RlZDpyfHx2b2lkIDAsc2lnbmF0dXJlOm98fHZvaWQgMH0sdCxuKTtyZXR1cm57cGF5bG9hZDphLnBheWxvYWQscHJvdGVjdGVkSGVhZGVyOmEucHJvdGVjdGVkSGVhZGVyfX0oZSx0LG4pO3JldHVybntwYXlsb2FkOlFlKHIucHJvdGVjdGVkSGVhZGVyLHIucGF5bG9hZCxuKSxwcm90ZWN0ZWRIZWFkZXI6ci5wcm90ZWN0ZWRIZWFkZXJ9fWNvbnN0IGV0PWU9PkFlLnN0cmluZ2lmeShlKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpLnJlcGxhY2UoLz0vZywiIiksdHQ9ZT0+KHtibG9iOihudWxsPT1lP3ZvaWQgMDplLmRhdGEpaW5zdGFuY2VvZiBCbG9iP251bGw9PWU/dm9pZCAwOmUuZGF0YTpudWxsLGRhdGE6SlNPTi5zdHJpbmdpZnkobnVsbCE9ZT9lOiIiKSxzdWNjZXNzOiEwfSksbnQ9ZT0+KChudWxsPT1lP3ZvaWQgMDplLnRvSlNPTikmJmRlbGV0ZSBlLnRvSlNPTix7ZXJyb3I6SlNPTi5zdHJpbmdpZnkobnVsbCE9ZT9lOiIiKSxzdWNjZXNzOiExfSkscnQ9ZT0+ZS5zdG9yYWdlPT09eWUuV2ViV29ya2VyO2Z1bmN0aW9uIHN0KGUpe2lmKGUmJnJ0KGUpKXtpZihlLnNlc3Npb24uZ2V0KFopKXJldHVybiBlLnNlc3Npb24uZ2V0KFopfWVsc2V7aWYoZSYmZS5yZXNwb25zZU1vZGU9PT13ZS5mb3JtUG9zdClyZXR1cm4gZS5hdXRob3JpemF0aW9uQ29kZTtpZihuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KFopKXJldHVybiBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KFopfXJldHVybiBudWxsfWZ1bmN0aW9uIG90KGUsdCl7Y29uc3Qgbj14dChlKTtpZighbnx8MD09PW4udHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGF1dGhvcml6ZSBlbmRwb2ludCBmb3VuZC4iKSk7bGV0IHI9bisiP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9IitlLmNsaWVudElELHM9bmU7aWYoZS5zY29wZSYmZS5zY29wZS5sZW5ndGg+MCYmKGUuc2NvcGUuaW5jbHVkZXMobmUpfHxlLnNjb3BlLnB1c2gobmUpLHM9ZS5zY29wZS5qb2luKCIgIikpLHIrPSImc2NvcGU9IitzLHIrPSImcmVkaXJlY3RfdXJpPSIrZS5zaWduSW5SZWRpcmVjdFVSTCxlLnJlc3BvbnNlTW9kZSYmKHIrPSImcmVzcG9uc2VfbW9kZT0iK2UucmVzcG9uc2VNb2RlKSxlLmVuYWJsZVBLQ0Upe2NvbnN0IHQ9ZXQoRWUucmFuZG9tKDMyKSksbj1ldChQZSh0KSk7cHQocmUsdCxlKSxyKz0iJmNvZGVfY2hhbGxlbmdlX21ldGhvZD1TMjU2JmNvZGVfY2hhbGxlbmdlPSIrbn1lLnByb21wdCYmKHIrPSImcHJvbXB0PSIrZS5wcm9tcHQpLHQmJihyKz0iJmZpZHA9Iit0KTtjb25zdCBvPWUuY3VzdG9tUGFyYW1zO2lmKG8pZm9yKGNvbnN0W2UsdF1vZiBPYmplY3QuZW50cmllcyhvKSkiIiE9ZSYmIiIhPXQmJihyKz0iJiIrZSsiPSIrdCk7aWYoZS5zdG9yYWdlPT09eWUuV2ViV29ya2VyKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6cixwa2NlOmZ0KHJlLGUpLHR5cGU6Z2V9KTtkb2N1bWVudC5sb2NhdGlvbi5ocmVmPXJ9ZnVuY3Rpb24gaXQoZSx0KXtjb25zdCBuPVV0KHQpO3JldHVybiBuJiYwIT09bi50cmltKCkubGVuZ3RoP0IuZ2V0KG4pLnRoZW4oKHI9PntpZigyMDAhPT1yLnN0YXR1cylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJGYWlsZWQgdG8gbG9hZCBwdWJsaWMga2V5cyBmcm9tIEpXS1MgVVJJOiAiK24pKTtjb25zdCBzPVd0KHQpLG89dC5zZXJ2ZXJPcmlnaW4rRC53ZWxsS25vd24uc3BsaXQoIi8ud2VsbC1rbm93biIpWzBdO3JldHVybiBzJiZzPT09bz8oKGUsdCk9Pntjb25zdCBuPUpTT04ucGFyc2UoYXRvYihlKSk7Zm9yKGNvbnN0IGUgb2YgdClpZihuLmtpZD09PWUua2lkKXJldHVybiBLZSh7YWxnOmUuYWxnLGU6ZS5lLGt0eTplLmt0eSxuOmUubn0pO3JldHVybiBQcm9taXNlLnJlamVjdCgiRmFpbGVkIHRvIGZpbmQgdGhlICdraWQnIHNwZWNpZmllZCBpbiB0aGUgaWRfdG9rZW4uICdraWQnIGZvdW5kIGluIHRoZSBoZWFkZXIgOiAiK24ua2lkKyIsIEV4cGVjdGVkIHZhbHVlczogIit0Lm1hcCgoZT0+ZS5raWQpKS5qb2luKCIsICIpKX0pKGUuc3BsaXQoIi4iKVswXSxyLmRhdGEua2V5cykudGhlbigobj0+KChlLHQsbixyLHMpPT5aZShlLHQse2FsZ29yaXRobXM6WyJSUzI1NiIsIlJTNTEyIiwiUlMzODQiLCJQUzI1NiJdLGF1ZGllbmNlOm4sY2xvY2tUb2xlcmFuY2U6NjAsaXNzdWVyOnIsc3ViamVjdDpzfSkudGhlbigoKCk9PlByb21pc2UucmVzb2x2ZSghMCkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKSkoZSxuLHQuY2xpZW50SUQscyxjdChlKS51c2VybmFtZSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTpQcm9taXNlLnJlc29sdmUoITEpfSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpOlByb21pc2UucmVqZWN0KCJJbnZhbGlkIEpXS1MgVVJJIGZvdW5kLiIpfWZ1bmN0aW9uIGF0KGUsdCl7Y29uc3Qgbj1PdChlKTtpZighbnx8MD09PW4udHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QoIkludmFsaWQgdG9rZW4gZW5kcG9pbnQgZm91bmQuIik7Y29uc3Qgcj1bXTtyZXR1cm4gci5wdXNoKGBjbGllbnRfaWQ9JHtlLmNsaWVudElEfWApLHIucHVzaChgcmVmcmVzaF90b2tlbj0ke3R9YCksci5wdXNoKCJncmFudF90eXBlPXJlZnJlc2hfdG9rZW4iKSxlLmNsaWVudFNlY3JldCYmZS5jbGllbnRTZWNyZXQudHJpbSgpLmxlbmd0aD4wJiZyLnB1c2goYGNsaWVudF9zZWNyZXQ9JHtlLmNsaWVudFNlY3JldH1gKSxCLnBvc3QobixyLmpvaW4oIiYiKSx7aGVhZGVyczp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uIiwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn19KS50aGVuKCh0PT57aWYoMjAwIT09dC5zdGF0dXMpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSByZWNlaXZlZCBpbiB0aGUgcmVmcmVzaCB0b2tlbiByZXNwb25zZTogIit0LnN0YXR1cykpO2lmKGUudmFsaWRhdGVJRFRva2VuKXJldHVybiBpdCh0LmRhdGEuaWRfdG9rZW4sZSkudGhlbigobj0+e2lmKG4pe2NvbnN0IG49e2FjY2Vzc1Rva2VuOnQuZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOnQuZGF0YS5leHBpcmVzX2luLGlkVG9rZW46dC5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjp0LmRhdGEucmVmcmVzaF90b2tlbixzY29wZTp0LmRhdGEuc2NvcGUsdG9rZW5UeXBlOnQuZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gZ3QobixjdCh0LmRhdGEuaWRfdG9rZW4pLGUpLFByb21pc2UucmVzb2x2ZShuKX1yZXR1cm4gUHJvbWlzZS5yZWplY3QoIkludmFsaWQgaWRfdG9rZW4gaW4gdGhlIHRva2VuIHJlc3BvbnNlOiAiK3QuZGF0YS5pZF90b2tlbil9KSk7e2NvbnN0IG49e2FjY2Vzc1Rva2VuOnQuZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOnQuZGF0YS5leHBpcmVzX2luLGlkVG9rZW46dC5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjp0LmRhdGEucmVmcmVzaF90b2tlbixzY29wZTp0LmRhdGEuc2NvcGUsdG9rZW5UeXBlOnQuZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gZ3QobixjdCh0LmRhdGEuaWRfdG9rZW4pLGUpLFByb21pc2UucmVzb2x2ZShuKX19KSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSl9Y29uc3QgY3Q9ZT0+e2NvbnN0IHQ9SlNPTi5wYXJzZShhdG9iKG51bGw9PWU/dm9pZCAwOmUuc3BsaXQoIi4iKVsxXSkpLG49dC5lbWFpbD90LmVtYWlsOm51bGwscj0oKGUsdD0iQCIpPT57aWYoZS50ZW5hbnRfZG9tYWluKXJldHVybiBlLnRlbmFudF9kb21haW47Y29uc3Qgbj1lLnN1Yi5zcGxpdCh0KTtyZXR1cm4gbltuLmxlbmd0aC0xXX0pKHQpO3JldHVybntkaXNwbGF5TmFtZTp0LnByZWZlcnJlZF91c2VybmFtZT90LnByZWZlcnJlZF91c2VybmFtZTp0LnN1YixlbWFpbDpuLHRlbmFudERvbWFpbjpyLHVzZXJuYW1lOnQuc3VifX07ZnVuY3Rpb24gdXQoZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuISFzdChlKX0oZSk/ZnVuY3Rpb24oZSl7Y29uc3QgdD1PdChlKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHRva2VuIGVuZHBvaW50IGZvdW5kLiIpKTtjb25zdCBuPXJ0KGUpP2Uuc2Vzc2lvbi5nZXQoaWUpOm5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoaWUpO251bGwhPT1uJiZuLmxlbmd0aD4wJiZwdChpZSxuLGUpO2NvbnN0IHI9W107ci5wdXNoKGBjbGllbnRfaWQ9JHtlLmNsaWVudElEfWApLGUuY2xpZW50U2VjcmV0JiZlLmNsaWVudFNlY3JldC50cmltKCkubGVuZ3RoPjAmJnIucHVzaChgY2xpZW50X3NlY3JldD0ke2UuY2xpZW50U2VjcmV0fWApO2NvbnN0IHM9cnQoZSk/ZS5zZXNzaW9uLmdldChaKTpzdChlKTtyZXR1cm4gci5wdXNoKGBjb2RlPSR7c31gKSxlLnN0b3JhZ2U9PT15ZS5TZXNzaW9uU3RvcmFnZSYmd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oWikmJndpbmRvdy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFopLHJ0KGUpJiZlLnNlc3Npb24uZ2V0KFopJiZlLnNlc3Npb24uZGVsZXRlKFopLHIucHVzaCgiZ3JhbnRfdHlwZT1hdXRob3JpemF0aW9uX2NvZGUiKSxyLnB1c2goYHJlZGlyZWN0X3VyaT0ke2Uuc2lnbkluUmVkaXJlY3RVUkx9YCksZS5lbmFibGVQS0NFJiYoci5wdXNoKGBjb2RlX3ZlcmlmaWVyPSR7ZnQocmUsZSl9YCksaHQocmUsZSkpLEIucG9zdCh0LHIuam9pbigiJiIpLHtoZWFkZXJzOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifX0pLnRoZW4oKHQ9PntpZigyMDAhPT10LnN0YXR1cylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlIHJlY2VpdmVkIGluIHRoZSB0b2tlbiByZXNwb25zZTogIit0LnN0YXR1cykpO2lmKGUudmFsaWRhdGVJRFRva2VuKXJldHVybiBpdCh0LmRhdGEuaWRfdG9rZW4sZSkudGhlbigobj0+e2lmKG4pe3B0KGNlLEpTT04uc3RyaW5naWZ5KGUpLGUpO2NvbnN0IG49e2FjY2Vzc1Rva2VuOnQuZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOnQuZGF0YS5leHBpcmVzX2luLGlkVG9rZW46dC5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjp0LmRhdGEucmVmcmVzaF90b2tlbixzY29wZTp0LmRhdGEuc2NvcGUsdG9rZW5UeXBlOnQuZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG4pfXJldHVybiBQcm9taXNlLnJlamVjdCgiSW52YWxpZCBpZF90b2tlbiBpbiB0aGUgdG9rZW4gcmVzcG9uc2U6ICIrdC5kYXRhLmlkX3Rva2VuKX0pKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTt7Y29uc3Qgbj17YWNjZXNzVG9rZW46dC5kYXRhLmFjY2Vzc190b2tlbixleHBpcmVzSW46dC5kYXRhLmV4cGlyZXNfaW4saWRUb2tlbjp0LmRhdGEuaWRfdG9rZW4scmVmcmVzaFRva2VuOnQuZGF0YS5yZWZyZXNoX3Rva2VuLHNjb3BlOnQuZGF0YS5zY29wZSx0b2tlblR5cGU6dC5kYXRhLnRva2VuX3R5cGV9O3JldHVybiBwdChjZSxKU09OLnN0cmluZ2lmeShlKSxlKSxQcm9taXNlLnJlc29sdmUobil9fSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfShlKS50aGVuKCh0PT4oZ3QodCxjdCh0LmlkVG9rZW4pLGUpLFByb21pc2UucmVzb2x2ZSh7dHlwZTptZX0pKSkpLmNhdGNoKCh0PT50LnJlc3BvbnNlJiY0MDA9PT10LnJlc3BvbnNlLnN0YXR1cz9vdChlKTpQcm9taXNlLnJlamVjdCh0KSkpOm90KGUsdCl9Y29uc3QgbHQ9KGUsdCk9PntpZighZnQoTCx0KXx8MD09PWZ0KEwsdCkudHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHRva2VuIGVuZHBvaW50IGZvdW5kLiIpKTtsZXQgbj0iIjtPYmplY3QuZW50cmllcyhlLmRhdGEpLm1hcCgoKFtyLHNdLG8pPT57Y29uc3QgaT0oKGUsdCk9PntsZXQgbj1uZTtyZXR1cm4gdC5zY29wZSYmdC5zY29wZS5sZW5ndGg+MCYmKHQuc2NvcGUuaW5jbHVkZXMobmUpfHx0LnNjb3BlLnB1c2gobmUpLG49dC5zY29wZS5qb2luKCIgIikpLGUucmVwbGFjZSgie3t0b2tlbn19IixmdChZLHQpKS5yZXBsYWNlKCJ7e3VzZXJuYW1lfX0iLGZ0KGhlLHQpKS5yZXBsYWNlKCJ7e3Njb3BlfX0iLG4pLnJlcGxhY2UoInt7Y2xpZW50SWR9fSIsdC5jbGllbnRJRCkucmVwbGFjZSgie3tjbGllbnRTZWNyZXR9fSIsdC5jbGllbnRTZWNyZXQpfSkocyx0KTtuKz1gJHtyfT0ke2l9JHtvIT09T2JqZWN0LmVudHJpZXMoZS5kYXRhKS5sZW5ndGgtMT8iJiI6IiJ9YH0pKTtjb25zdCByPXtkYXRhOm4saGVhZGVyczpPYmplY3QuYXNzaWduKHt9LHtBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSksbWV0aG9kOiJQT1NUIix1cmw6ZnQoTCx0KX07cmV0dXJuIGUuYXR0YWNoVG9rZW4mJihyLmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIuaGVhZGVycykse0F1dGhvcml6YXRpb246YEJlYXJlciAke2Z0KFksdCl9YH0pKSxCKHIpLnRoZW4oKG49PntpZigyMDAhPT1uLnN0YXR1cylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlIHJlY2VpdmVkIGluIHRoZSB0b2tlbiByZXNwb25zZTogIituLnN0YXR1cykpO2lmKGUucmV0dXJuc1Nlc3Npb24pe2lmKHQudmFsaWRhdGVJRFRva2VuKXJldHVybiBpdChuLmRhdGEuaWRfdG9rZW4sdCkudGhlbigocj0+e2lmKHIpe2NvbnN0IHI9e2FjY2Vzc1Rva2VuOm4uZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOm4uZGF0YS5leHBpcmVzX2luLGlkVG9rZW46bi5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjpuLmRhdGEucmVmcmVzaF90b2tlbixzY29wZTpuLmRhdGEuc2NvcGUsdG9rZW5UeXBlOm4uZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gZ3QocixjdChyLmlkVG9rZW4pLHQpLGUucmV0dXJuUmVzcG9uc2U/UHJvbWlzZS5yZXNvbHZlKHtkYXRhOmR0KHQpLHR5cGU6bWV9KTpQcm9taXNlLnJlc29sdmUoITApfXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgaWRfdG9rZW4gaW4gdGhlIHRva2VuIHJlc3BvbnNlOiAiK24uZGF0YS5pZF90b2tlbikpfSkpO3tjb25zdCByPXthY2Nlc3NUb2tlbjpuLmRhdGEuYWNjZXNzX3Rva2VuLGV4cGlyZXNJbjpuLmRhdGEuZXhwaXJlc19pbixpZFRva2VuOm4uZGF0YS5pZF90b2tlbixyZWZyZXNoVG9rZW46bi5kYXRhLnJlZnJlc2hfdG9rZW4sc2NvcGU6bi5kYXRhLnNjb3BlLHRva2VuVHlwZTpuLmRhdGEudG9rZW5fdHlwZX07cmV0dXJuIGd0KHIsY3Qoci5pZFRva2VuKSx0KSxlLnJldHVyblJlc3BvbnNlP1Byb21pc2UucmVzb2x2ZSh7ZGF0YTpkdCh0KSx0eXBlOm1lfSk6UHJvbWlzZS5yZXNvbHZlKCEwKX19cmV0dXJuIGUucmV0dXJuUmVzcG9uc2U/UHJvbWlzZS5yZXNvbHZlKG4pOlByb21pc2UucmVzb2x2ZSghMCl9KSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSl9LGR0PWU9Pih7YWxsb3dlZFNjb3BlczpmdChvZSxlKSxkaXNwbGF5TmFtZTpmdChmZSxlKSxlbWFpbDpmdChwZSxlKSxzZXNzaW9uU3RhdGU6ZnQoaWUsZSksdGVuYW50RG9tYWluOmZ0KHVlLGUpLHVzZXJuYW1lOmZ0KGhlLGUpfSk7ZnVuY3Rpb24gaHQoZSx0KXtzd2l0Y2godC5zdG9yYWdlKXtjYXNlIHllLldlYldvcmtlcjp0LnNlc3Npb24uZGVsZXRlKGUpO2JyZWFrO2Nhc2UgeWUuU2Vzc2lvblN0b3JhZ2U6c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShlKTticmVhaztjYXNlIHllLkxvY2FsU3RvcmFnZTpsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShlKTticmVhaztkZWZhdWx0OnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oZSl9fWZ1bmN0aW9uIHB0KGUsdCxuKXtzd2l0Y2gobi5zdG9yYWdlKXtjYXNlIHllLldlYldvcmtlcjpuLnNlc3Npb24uc2V0KGUsdCk7YnJlYWs7Y2FzZSB5ZS5TZXNzaW9uU3RvcmFnZTpzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGUsdCk7YnJlYWs7Y2FzZSB5ZS5Mb2NhbFN0b3JhZ2U6bG9jYWxTdG9yYWdlLnNldEl0ZW0oZSx0KTticmVhaztkZWZhdWx0OnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oZSx0KX19ZnVuY3Rpb24gZnQoZSx0KXt2YXIgbjtzd2l0Y2godC5zdG9yYWdlKXtjYXNlIHllLldlYldvcmtlcjpyZXR1cm4gbnVsbD09PShuPW51bGw9PXQ/dm9pZCAwOnQuc2Vzc2lvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2V0KGUpO2Nhc2UgeWUuU2Vzc2lvblN0b3JhZ2U6cmV0dXJuIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSk7Y2FzZSB5ZS5Mb2NhbFN0b3JhZ2U6cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGUpO2RlZmF1bHQ6cmV0dXJuIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSl9fWZ1bmN0aW9uIG10KGUpe3Z0KGUpLGh0KFksZSksaHQoWCxlKSxodChRLGUpLGh0KGZlLGUpLGh0KHBlLGUpLGh0KHRlLGUpLGh0KHNlLGUpLGh0KG9lLGUpLGh0KHVlLGUpLGh0KGFlLGUpLGh0KGhlLGUpLGh0KGNlLGUpLGh0KGllLGUpfWZ1bmN0aW9uIGd0KGUsdCxuKXtwdChZLGUuYWNjZXNzVG9rZW4sbikscHQoWCxlLmV4cGlyZXNJbixuKSxwdChRLChEYXRlLm5vdygpLzFlMykudG9TdHJpbmcoKSxuKSxwdChmZSx0LmRpc3BsYXlOYW1lLG4pLHB0KHBlLHQuZW1haWwsbikscHQodGUsZS5pZFRva2VuLG4pLHB0KG9lLGUuc2NvcGUsbikscHQoc2UsZS5yZWZyZXNoVG9rZW4sbikscHQodWUsdC50ZW5hbnREb21haW4sbikscHQoYWUsZS50b2tlblR5cGUsbikscHQoaGUsdC51c2VybmFtZSxuKSx5dChuKX1jb25zdCB5dD1lPT57Y29uc3QgdD1wYXJzZUludChmdChYLGUpKSxuPXQ8PTEwP3Q6dC0xMDt2dChlKTtjb25zdCByPXNldFRpbWVvdXQoKCgpPT57YXQoZSxmdChzZSxlKSl9KSwxZTMqbik7cHQoZGUsSlNPTi5zdHJpbmdpZnkociksZSl9LHZ0PWU9PntpZihmdChkZSxlKSl7Y29uc3QgdD1KU09OLnBhcnNlKGZ0KGRlLGUpKTtjbGVhclRpbWVvdXQodCl9fSx3dD0oZSx0KT0+e3B0KE4sZSx0KX0sa3Q9KGUsdCk9PntwdChMLGUsdCl9LFN0PShlLHQpPT57cHQoSixlLHQpfSxidD0oZSx0KT0+e3B0KEYsZSx0KX0sX3Q9KGUsdCk9PntwdChLLGUsdCl9LEF0PWU9PntwdCgkLCJ0cnVlIixlKX0sRXQ9KGUsdCk9PntwdCh6LGUsdCl9LFB0PShlLHQpPT57cHQoRyxlLHQpfSxDdD0oZSx0KT0+e3B0KFYsZSx0KX0sSXQ9KGUsdCk9PntwdChsZSxlLHQpfSxUdD1lPT57cHQoZWUsZS5jbGllbnRJRCxlKX0sanQ9KGUsdCk9PntpZighdCYmRHQoZSkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IG49ZS5zZXJ2ZXJPcmlnaW47cmV0dXJuIEIuZ2V0KG4rRC53ZWxsS25vd24pLnRoZW4oKHQ9PjIwMCE9PXQuc3RhdHVzP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcigiRmFpbGVkIHRvIGxvYWQgT3BlbklEIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gZnJvbTogIituK0Qud2VsbEtub3duKSk6KCgoZSx0KT0+e3B0KCJvcGVuX2lkX2NvbmZpZyIsSlNPTi5zdHJpbmdpZnkoZSksdCl9KSh0LmRhdGEsZSksd3QodC5kYXRhLmF1dGhvcml6YXRpb25fZW5kcG9pbnQsZSksa3QodC5kYXRhLnRva2VuX2VuZHBvaW50LGUpLFN0KHQuZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCxlKSxidCh0LmRhdGEuandrc191cmksZSksX3QodC5kYXRhLnRva2VuX2VuZHBvaW50LnN1YnN0cmluZygwLHQuZGF0YS50b2tlbl9lbmRwb2ludC5sYXN0SW5kZXhPZigidG9rZW4iKSkrInJldm9rZSIsZSksSXQodC5kYXRhLmlzc3VlcixlKSxUdChlKSxDdCh0LmRhdGEuY2hlY2tfc2Vzc2lvbl9pZnJhbWUsZSksRXQoZS5zaWduSW5SZWRpcmVjdFVSTCxlKSxQdChlLnNpZ25PdXRSZWRpcmVjdFVSTCxlKSxBdChlKSxQcm9taXNlLnJlc29sdmUoIkluaXRpYWxpemVkIE9wZW5JRCBQcm92aWRlciBjb25maWd1cmF0aW9uIGZyb206ICIrbitELndlbGxLbm93bikpKSkuY2F0Y2goKCgpPT57dmFyIHQscixzLG8saSxhLGM7cmV0dXJuIHd0KGUuc2VydmVyT3JpZ2luKygobnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5hdXRob3JpemUpfHxELmF1dGhvcml6ZSksZSksa3QoZS5zZXJ2ZXJPcmlnaW4rKChudWxsPT09KHI9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludHMpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnRva2VuKXx8RC50b2tlbiksZSksX3QoZS5zZXJ2ZXJPcmlnaW4rKChudWxsPT09KHM9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludHMpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnJldm9rZSl8fEQucmV2b2tlKSxlKSxTdChlLnNlcnZlck9yaWdpbisoKG51bGw9PT0obz1udWxsPT1lP3ZvaWQgMDplLmVuZHBvaW50cyl8fHZvaWQgMD09PW8/dm9pZCAwOm8ubG9nb3V0KXx8RC5sb2dvdXQpLGUpLGJ0KG4rKChudWxsPT09KGk9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludHMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmp3a3MpfHxELmp3a3MpLGUpLEl0KGUuc2VydmVyT3JpZ2luKygobnVsbD09PShhPW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRzKXx8dm9pZCAwPT09YT92b2lkIDA6YS50b2tlbil8fEQudG9rZW4pLGUpLFR0KGUpLEN0KGUuc2VydmVyT3JpZ2luKygobnVsbD09PShjPW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRzKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5vaWRjU2Vzc2lvbklGcmFtZSl8fEQub2lkY1Nlc3Npb25JRnJhbWUpLGUpLEV0KGUuc2lnbkluUmVkaXJlY3RVUkwsZSksUHQoZS5zaWduT3V0UmVkaXJlY3RVUkwsZSksQXQoZSksUHJvbWlzZS5yZXNvbHZlKG5ldyBFcnJvcigiSW5pdGlhbGl6ZWQgT3BlbklEIFByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gZnJvbSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24uQmVjYXVzZSBmYWlsZWQgdG8gYWNjZXNzIHdlbGxrbm93biBlbmRwb2ludDogIituK0Qud2VsbEtub3duKSl9KSl9LFJ0PWU9PntlLnN0b3JhZ2UhPT15ZS5XZWJXb3JrZXI/KGh0KE4sZSksaHQoTCxlKSxodChKLGUpLGh0KEYsZSksaHQoSyxlKSxodCgkLGUpLGh0KGxlLGUpLGh0KGVlLGUpLGh0KCJ0ZW5hbnQiLGUpLGh0KHosZSksaHQoRyxlKSxodChWLGUpKTplLnNlc3Npb24uY2xlYXIoKX0seHQ9ZT0+ZnQoTixlKSxPdD1lPT5mdChMLGUpLEh0PWU9PmZ0KEssZSkscXQ9ZT0+ZnQoVixlKSxNdD1lPT5mdChKLGUpLFV0PWU9PmZ0KEYsZSksV3Q9ZT0+ZnQobGUsZSksQnQ9ZT0+ZnQoZWUsZSksRHQ9ZT0+KGU9PmUuc3RvcmFnZSE9PXllLldlYldvcmtlcj9mdCgkLGUpJiYidHJ1ZSI9PT1mdCgkLGUpOmUuc2Vzc2lvbi5nZXQoJCkmJiJ0cnVlIj09PWUuc2Vzc2lvbi5nZXQoJCkpKGUpJiYhIUJ0KGUpJiZCdChlKT09PWUuY2xpZW50SUQ7ZnVuY3Rpb24gTnQoZSl7dmFyIHQ7cmV0dXJuIGUuc3RvcmFnZT09PXllLlNlc3Npb25TdG9yYWdlJiYwPT09c2Vzc2lvblN0b3JhZ2UubGVuZ3RofHxlLnN0b3JhZ2U9PT15ZS5Mb2NhbFN0b3JhZ2UmJjA9PT1sb2NhbFN0b3JhZ2UubGVuZ3RofHxydChlKSYmMD09PShudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5zZXNzaW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zaXplKT9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIGxvZ2luIHNlc3Npb25zLiIpKTpmdW5jdGlvbihlKXtjb25zdCB0PU10KGUpO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIGxvZ291dCBlbmRwb2ludCBmb3VuZCBpbiB0aGUgc2Vzc2lvbi4iKSk7Y29uc3Qgbj1mdCh0ZSxlKTtpZighbnx8MD09PW4udHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGlkX3Rva2VuIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTtjb25zdCByPWZ0KEcsZSk7aWYoIXJ8fDA9PT1yLnRyaW0oKS5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiTm8gY2FsbGJhY2sgVVJMIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTttdChlKSxSdChlKTtjb25zdCBzPWAke3R9P2lkX3Rva2VuX2hpbnQ9JHtufSZwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9JHtyfSZzdGF0ZT1sb2dvdXRfc3VjY2Vzc2A7cmV0dXJuIHJ0KGUpP1Byb21pc2UucmVzb2x2ZShzKTood2luZG93LmxvY2F0aW9uLmhyZWY9cyxQcm9taXNlLnJlc29sdmUoITApKX0oZSl9Y29uc3QgTHQ9KCgpPT57bGV0IGUsdCxuO2NvbnN0IHI9bmV3IE1hcCxzPSgpPT4hIXIuZ2V0KFkpLG89KCk9PiEhci5nZXQoWSksaT10PT5mdW5jdGlvbihlLHQpe3JldHVybiBmdChZLGUpP0R0KGUpP1Byb21pc2UucmVzb2x2ZSh7dHlwZTptZX0pOihtdChlKSxSdChlKSxodCgiYXV0aF9jYWxsYmFja191cmwiLGUpLGp0KGUsITApLnRoZW4oKCgpPT51dChlLHQpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSkpOmp0KGUsITEpLnRoZW4oKCgpPT51dChlLHQpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSl9KGUsdCkudGhlbigodD0+e2lmKHQudHlwZT09PW1lKXtjb25zdCBuPU10KGUpO2lmKCFufHwwPT09bi50cmltKCkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIGxvZ291dCBlbmRwb2ludCBmb3VuZCBpbiB0aGUgc2Vzc2lvbi4iKSk7Y29uc3Qgcz1mdCh0ZSxlKTtpZighc3x8MD09PXMudHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGlkX3Rva2VuIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTtjb25zdCBvPWZ0KEcsZSk7aWYoIW98fDA9PT1vLnRyaW0oKS5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiTm8gY2FsbGJhY2sgVVJMIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTtjb25zdCBpPWAke259P2lkX3Rva2VuX2hpbnQ9JHtzfSZwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9JHtvfWA7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7ZGF0YTp7YWxsb3dlZFNjb3BlczpyLmdldChvZSksZGlzcGxheU5hbWU6ci5nZXQoZmUpLGVtYWlsOnIuZ2V0KHBlKSxsb2dvdXRVcmw6aSxzZXNzaW9uU3RhdGU6ci5nZXQoaWUpLHRlbmFudERvbWFpbjpyLmdldCh1ZSksdXNlcm5hbWU6ci5nZXQoaGUpfSx0eXBlOnQudHlwZX0pfXJldHVybiBQcm9taXNlLnJlc29sdmUodCl9KSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSksYT0oKT0+YXQoZSxyLmdldChZKSksYz0oKT0+TnQoZSksdT0oKT0+ZnVuY3Rpb24oZSx0KXtjb25zdCBuPUh0KGUpO2lmKCFufHwwPT09bi50cmltKCkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlamVjdCgiSW52YWxpZCByZXZva2UgdG9rZW4gZW5kcG9pbnQgZm91bmQuIik7Y29uc3Qgcj1bXTtyZXR1cm4gci5wdXNoKGBjbGllbnRfaWQ9JHtlLmNsaWVudElEfWApLHIucHVzaChgdG9rZW49JHt0fWApLHIucHVzaCgidG9rZW5fdHlwZV9oaW50PWFjY2Vzc190b2tlbiIpLEIucG9zdChuLHIuam9pbigiJiIpLHtoZWFkZXJzOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSx3aXRoQ3JlZGVudGlhbHM6ITB9KS50aGVuKChlPT4yMDAhPT1lLnN0YXR1cz9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUgcmVjZWl2ZWQgaW4gdGhlIHJldm9rZSB0b2tlbiByZXNwb25zZTogIitlLnN0YXR1cykpOlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfShlLHIuZ2V0KFkpKS50aGVuKCgoKT0+KG10KGUpLFJ0KGUpLFByb21pc2UucmVzb2x2ZSghMCkpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSksbD0oZSx0LG4pPT57ZSYmci5zZXQoWixlKSx0JiZyLnNldChpZSx0KSxyLnNldChyZSxuKX0sZD1uPT57bGV0IHI9ITE7cmV0dXJuIGUuYmFzZVVybHMuZm9yRWFjaCgoZT0+e3ZhciB0OyhudWxsPT09KHQ9bnVsbD09bj92b2lkIDA6bi51cmwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnN0YXJ0c1dpdGgoZSkpJiYocj0hMCl9KSkscj90LnJlcXVlc3QobikudGhlbigoZT0+UHJvbWlzZS5yZXNvbHZlKGUpKSkuY2F0Y2goKGU9Pnt2YXIgcjtyZXR1cm4gNDAxPT09KG51bGw9PT0ocj1udWxsPT1lP3ZvaWQgMDplLnJlc3BvbnNlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zdGF0dXMpP2EoKS50aGVuKCgoKT0+dChuKS50aGVuKChlPT5Qcm9taXNlLnJlc29sdmUoZSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKSkpLmNhdGNoKCgoKT0+UHJvbWlzZS5yZWplY3QoIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlZnJlc2hpbmcgdGhlIGFjY2VzcyB0b2tlbi4gVGhlIGFjY2VzcyB0b2tlbiBpcyBubyBtb3JlIHZhbGlkIGFuZCByZS1hdXRoZW50aWNhdGlvbiBpcyByZXF1aXJlZC4iKSkpOlByb21pc2UucmVqZWN0KGUpfSkpOlByb21pc2UucmVqZWN0KCJUaGUgcHJvdmlkZWQgVVJMIGlzIGlsbGVnYWwuIil9LGg9bj0+e2xldCByPSExO2UuYmFzZVVybHMuZm9yRWFjaCgoZT0+e24uZXZlcnkoKHQ9PnQudXJsLnN0YXJ0c1dpdGgoZSkpKSYmKHI9ITApfSkpO2NvbnN0IHM9bi5tYXAoKGU9PnQucmVxdWVzdChlKSkpO3JldHVybiByP0IuYWxsKHMpLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChlPT57dmFyIHQ7cmV0dXJuIDQwMT09PShudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5yZXNwb25zZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc3RhdHVzKT9hKCkudGhlbigoKCk9PkIuYWxsKHMpLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpKSkuY2F0Y2goKCgpPT5Qcm9taXNlLnJlamVjdCgiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVmcmVzaGluZyB0aGUgYWNjZXNzIHRva2VuLiBUaGUgYWNjZXNzIHRva2VuIGlzIG5vIG1vcmUgdmFsaWQgYW5kIHJlLWF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkLiIpKSk6UHJvbWlzZS5yZWplY3QoZSl9KSk6UHJvbWlzZS5yZWplY3QoIlRoZSBwcm92aWRlZCBVUkwgaXMgaWxsZWdhbC4iKX0scD10PT5sdCh0LGUpLGY9KCk9PmR0KGUpLG09KCk9PlByb21pc2UucmVzb2x2ZSgoZT0+KHthdXRob3JpemU6eHQoZSksandrczpVdChlKSxsb2dvdXQ6TXQoZSksb2lkY1Nlc3Npb25JRnJhbWU6cXQoZSkscmV2b2tlOkh0KGUpLHRva2VuOk90KGUpLHdlbGxLbm93bjpELndlbGxLbm93bn0pKShlKSksZz0oKT0+KGU9Pntjb25zdCB0PWZ0KHRlLGUpO3JldHVybiBKU09OLnBhcnNlKGF0b2IodC5zcGxpdCgiLiIpWzFdKSl9KShlKTtyZXR1cm57Z2V0SW5zdGFuY2U6eT0+bnx8KG49ZnVuY3Rpb24obil7dmFyIHksdix3LGssUyxiO3JldHVybiBlPU9iamVjdC5hc3NpZ24oe30sbiksci5jbGVhcigpLGUuc2Vzc2lvbj1yLGUuYXV0aG9yaXphdGlvbkNvZGUmJnIuc2V0KFosZS5hdXRob3JpemF0aW9uQ29kZSksZS5zZXNzaW9uU3RhdGUmJnIuc2V0KGllLGUuc2Vzc2lvblN0YXRlKSx0PVNlLmdldEluc3RhbmNlKCksdC5pbml0KCEwLChlPT57dmFyIHQscztlLmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUuaGVhZGVycykse0F1dGhvcml6YXRpb246YEJlYXJlciAke251bGw9PXI/dm9pZCAwOnIuZ2V0KFkpfWB9KSwobnVsbD09PSh0PW4uaHR0cENsaWVudCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucmVxdWVzdFN0YXJ0Q2FsbGJhY2spJiYobnVsbD09PShzPW4uaHR0cENsaWVudCl8fHZvaWQgMD09PXN8fHMucmVxdWVzdFN0YXJ0Q2FsbGJhY2soKSl9KSxudWxsIT09KHY9bnVsbD09PSh5PW4uaHR0cENsaWVudCl8fHZvaWQgMD09PXk/dm9pZCAwOnkucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaykmJnZvaWQgMCE9PXY/djpudWxsLG51bGwhPT0oaz1udWxsPT09KHc9bi5odHRwQ2xpZW50KXx8dm9pZCAwPT09dz92b2lkIDA6dy5yZXF1ZXN0RXJyb3JDYWxsYmFjaykmJnZvaWQgMCE9PWs/azpudWxsLG51bGwhPT0oYj1udWxsPT09KFM9bi5odHRwQ2xpZW50KXx8dm9pZCAwPT09Uz92b2lkIDA6Uy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2spJiZ2b2lkIDAhPT1iP2I6bnVsbCkse2N1c3RvbUdyYW50OnAsZG9lc1Rva2VuRXhpc3Q6byxlbmRVc2VyU2Vzc2lvbjp1LGdldERlY29kZWRJRFRva2VuOmcsZ2V0U2VydmljZUVuZHBvaW50czptLGdldFVzZXJJbmZvOmYsaHR0cFJlcXVlc3Q6ZCxodHRwUmVxdWVzdEFsbDpoLGlzU2lnbmVkSW46cyxyZWZyZXNoQWNjZXNzVG9rZW46YSxzZXRBdXRoQ29kZTpsLHNpZ25JbjppLHNpZ25PdXQ6Y319KHkpLG4pfX0pKCksS3Q9c2VsZjtsZXQgSnQ7S3Qub25tZXNzYWdlPSh7ZGF0YTplLHBvcnRzOnR9KT0+e3ZhciBuLHIscyxvO2NvbnN0IGk9dFswXTtzd2l0Y2goZS50eXBlKXtjYXNlImluaXQiOnRyeXtjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sZS5kYXRhKTt0Lmh0dHBDbGllbnQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQuaHR0cENsaWVudCkse3JlcXVlc3RFcnJvckNhbGxiYWNrOkd0LHJlcXVlc3RGaW5pc2hDYWxsYmFjazp6dCxyZXF1ZXN0U3RhcnRDYWxsYmFjazpGdCxyZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrOiR0fSksSnQ9THQuZ2V0SW5zdGFuY2UodCksaS5wb3N0TWVzc2FnZSh0dCgpKX1jYXRjaChlKXtpLnBvc3RNZXNzYWdlKG50KGUpKX1icmVhaztjYXNlInNpZ24taW4iOkp0PygoKG51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLmRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGUpfHwobnVsbD09PShyPW51bGw9PWU/dm9pZCAwOmUuZGF0YSl8fHZvaWQgMD09PXI/dm9pZCAwOnIucGtjZSkpJiZKdC5zZXRBdXRoQ29kZShlLmRhdGEuY29kZSxudWxsPT09KHM9bnVsbD09ZT92b2lkIDA6ZS5kYXRhKXx8dm9pZCAwPT09cz92b2lkIDA6cy5zZXNzaW9uU3RhdGUsbnVsbD09PShvPW51bGw9PWU/dm9pZCAwOmUuZGF0YSl8fHZvaWQgMD09PW8/dm9pZCAwOm8ucGtjZSksSnQuc2lnbkluKCJzdHJpbmciPT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5kYXRhKSYmKG51bGw9PWU/dm9pZCAwOmUuZGF0YSkpLnRoZW4oKGU9PntlLnR5cGU9PT1tZT9pLnBvc3RNZXNzYWdlKHR0KHtkYXRhOmUuZGF0YSx0eXBlOm1lfSkpOmkucG9zdE1lc3NhZ2UodHQoe2NvZGU6ZS5jb2RlLHBrY2U6ZS5wa2NlLHR5cGU6Z2V9KSl9KSkuY2F0Y2goKGU9PntpLnBvc3RNZXNzYWdlKG50KGUpKX0pKSk6aS5wb3N0TWVzc2FnZShudCgiV29ya2VyIGhhcyBub3QgYmVlbiBpbml0aWF0ZWQuIikpO2JyZWFrO2Nhc2UiYXBpLWNhbGwiOmlmKCFKdCl7aS5wb3N0TWVzc2FnZShudCgiV29ya2VyIGhhcyBub3QgYmVlbiBpbml0aWF0ZWQuIikpO2JyZWFrfUp0LmlzU2lnbmVkSW4oKT9KdC5odHRwUmVxdWVzdChlLmRhdGEpLnRoZW4oKGU9PntpLnBvc3RNZXNzYWdlKHR0KGUpKX0pKS5jYXRjaCgoZT0+e2kucG9zdE1lc3NhZ2UobnQoZSkpfSkpOmkucG9zdE1lc3NhZ2UobnQoIllvdSBoYXZlIG5vdCBzaWduZWQgaW4geWV0LiIpKTticmVhaztjYXNlImFwaS1jYWxsLWFsbCI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9SnQuaXNTaWduZWRJbigpP0p0Lmh0dHBSZXF1ZXN0QWxsKGUuZGF0YSkudGhlbigoZT0+e2kucG9zdE1lc3NhZ2UodHQoZSkpfSkpLmNhdGNoKChlPT57aS5wb3N0TWVzc2FnZShudChlKSl9KSk6aS5wb3N0TWVzc2FnZShudCgiWW91IGhhdmUgbm90IHNpZ25lZCBpbiB5ZXQuIikpO2JyZWFrO2Nhc2UibG9nb3V0IjppZighSnQpe2kucG9zdE1lc3NhZ2UobnQoIldvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhdGVkLiIpKTticmVha31KdC5pc1NpZ25lZEluKCk/SnQuc2lnbk91dCgpLnRoZW4oKGU9PntlP2kucG9zdE1lc3NhZ2UodHQoZSkpOmkucG9zdE1lc3NhZ2UobnQoIlJlY2VpdmVkIG5vIHJlc3BvbnNlIikpfSkpLmNhdGNoKChlPT57aS5wb3N0TWVzc2FnZShudChlKSl9KSk6aS5wb3N0TWVzc2FnZShudCgiWW91IGhhdmUgbm90IHNpZ25lZCBpbiB5ZXQuIikpO2JyZWFrO2Nhc2UiY3VzdG9tLWdyYW50IjppZighSnQpe2kucG9zdE1lc3NhZ2UobnQoIldvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhdGVkLiIpKTticmVha31pZighSnQuaXNTaWduZWRJbigpJiZlLmRhdGEuc2lnbkluUmVxdWlyZWQpe2kucG9zdE1lc3NhZ2UobnQoIllvdSBoYXZlIG5vdCBzaWduZWQgaW4geWV0LiIpKTticmVha31KdC5jdXN0b21HcmFudChlLmRhdGEpLnRoZW4oKGU9PntpLnBvc3RNZXNzYWdlKHR0KGUpKX0pKS5jYXRjaCgoZT0+e2kucG9zdE1lc3NhZ2UobnQoZSkpfSkpO2JyZWFrO2Nhc2UiZW5kLXVzZXItc2Vzc2lvbiI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9aWYoIUp0LmlzU2lnbmVkSW4oKSYmZS5kYXRhLnNpZ25JblJlcXVpcmVkKXtpLnBvc3RNZXNzYWdlKG50KCJZb3UgaGF2ZSBub3Qgc2lnbmVkIGluIHlldC4iKSk7YnJlYWt9SnQuZW5kVXNlclNlc3Npb24oKS50aGVuKChlPT57aS5wb3N0TWVzc2FnZSh0dChlKSl9KSkuY2F0Y2goKGU9PntpLnBvc3RNZXNzYWdlKG50KGUpKX0pKTticmVhaztjYXNlImdldC1zZXJ2aWNlLWVuZHBvaW50cyI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9SnQuZ2V0U2VydmljZUVuZHBvaW50cygpLnRoZW4oKGU9PntpLnBvc3RNZXNzYWdlKHR0KGUpKX0pKS5jYXRjaCgoZT0+e2kucG9zdE1lc3NhZ2UobnQoZSkpfSkpO2JyZWFrO2Nhc2UiZ2V0LXVzZXItaW5mbyI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9aWYoIUp0LmlzU2lnbmVkSW4oKSYmZS5kYXRhLnNpZ25JblJlcXVpcmVkKXtpLnBvc3RNZXNzYWdlKG50KCJZb3UgaGF2ZSBub3Qgc2lnbmVkIGluIHlldC4iKSk7YnJlYWt9dHJ5e2kucG9zdE1lc3NhZ2UodHQoSnQuZ2V0VXNlckluZm8oKSkpfWNhdGNoKGUpe2kucG9zdE1lc3NhZ2UobnQoZSkpfWJyZWFrO2Nhc2UiZ2V0LWRlY29kZWQtaWQtdG9rZW4iOmlmKCFKdCl7aS5wb3N0TWVzc2FnZShudCgiV29ya2VyIGhhcyBub3QgYmVlbiBpbml0aWF0ZWQuIikpO2JyZWFrfWlmKCFKdC5pc1NpZ25lZEluKCkmJmUuZGF0YS5zaWduSW5SZXF1aXJlZCl7aS5wb3N0TWVzc2FnZShudCgiWW91IGhhdmUgbm90IHNpZ25lZCBpbiB5ZXQuIikpO2JyZWFrfXRyeXtpLnBvc3RNZXNzYWdlKHR0KEp0LmdldERlY29kZWRJRFRva2VuKCkpKX1jYXRjaChlKXtpLnBvc3RNZXNzYWdlKG50KGUpKX1icmVhaztkZWZhdWx0Om51bGw9PWl8fGkucG9zdE1lc3NhZ2UobnQoYFVua25vd24gbWVzc2FnZSB0eXBlICR7bnVsbD09ZT92b2lkIDA6ZS50eXBlfWApKX19O2NvbnN0IEZ0PSgpPT57S3QucG9zdE1lc3NhZ2Uoe3R5cGU6InJlcXVlc3Qtc3RhcnQifSl9LCR0PWU9PntLdC5wb3N0TWVzc2FnZSh7ZGF0YTpKU09OLnN0cmluZ2lmeShudWxsIT1lP2U6IiIpLHR5cGU6InJlcXVlc3Qtc3VjY2VzcyJ9KX0senQ9KCk9PntLdC5wb3N0TWVzc2FnZSh7dHlwZToicmVxdWVzdC1maW5pc2gifSl9LEd0PWU9Pntjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sZSk7ZGVsZXRlIHQudG9KU09OLEt0LnBvc3RNZXNzYWdlKHtkYXRhOkpTT04uc3RyaW5naWZ5KG51bGwhPXQ/dDoiIiksdHlwZToicmVxdWVzdC1lcnJvciJ9KX07cmV0dXJue319KCk7Cgo=",null,!1,function(l){return Bc=Bc||function(l,c,e){var i=void 0===c?null:c,t=function(l,c){var e=atob(l);if(c){for(var i=new Uint8Array(e.length),t=0,n=e.length;t<n;++t)i[t]=e.charCodeAt(t);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return e}(l,void 0!==e&&e),n=t.indexOf("\n",10)+1,d=t.substring(n)+(i?"//# sourceMappingURL="+i:""),Z=new Blob([d],{type:"application/javascript"});return URL.createObjectURL(Z)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLHI9MDtyPG4ubGVuZ3RoO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gZS5hcHBseSh0LG4pfX0sdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PXQuY2FsbChlKX1mdW5jdGlvbiByKGUpe3JldHVybiB2b2lkIDA9PT1lfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9ZnVuY3Rpb24gbyhlKXtpZigiW29iamVjdCBPYmplY3RdIiE9PXQuY2FsbChlKSlyZXR1cm4hMTt2YXIgbj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1ufHxuPT09T2JqZWN0LnByb3RvdHlwZX1mdW5jdGlvbiBpKGUpe3JldHVybiJbb2JqZWN0IEZ1bmN0aW9uXSI9PT10LmNhbGwoZSl9ZnVuY3Rpb24gYShlLHQpe2lmKG51bGwhPWUpaWYoIm9iamVjdCIhPXR5cGVvZiBlJiYoZT1bZV0pLG4oZSkpZm9yKHZhciByPTAscz1lLmxlbmd0aDtyPHM7cisrKXQuY2FsbChudWxsLGVbcl0scixlKTtlbHNlIGZvcih2YXIgbyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZ0LmNhbGwobnVsbCxlW29dLG8sZSl9dmFyIGM9e2lzQXJyYXk6bixpc0FycmF5QnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT10LmNhbGwoZSl9LGlzQnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZSYmIXIoZSkmJm51bGwhPT1lLmNvbnN0cnVjdG9yJiYhcihlLmNvbnN0cnVjdG9yKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3IuaXNCdWZmZXImJmUuY29uc3RydWN0b3IuaXNCdWZmZXIoZSl9LGlzRm9ybURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBGb3JtRGF0YSYmZSBpbnN0YW5jZW9mIEZvcm1EYXRhfSxpc0FycmF5QnVmZmVyVmlldzpmdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZBcnJheUJ1ZmZlci5pc1ZpZXc/QXJyYXlCdWZmZXIuaXNWaWV3KGUpOmUmJmUuYnVmZmVyJiZlLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfSxpc1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV9LGlzTnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZX0saXNPYmplY3Q6cyxpc1BsYWluT2JqZWN0Om8saXNVbmRlZmluZWQ6cixpc0RhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgRGF0ZV0iPT09dC5jYWxsKGUpfSxpc0ZpbGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgRmlsZV0iPT09dC5jYWxsKGUpfSxpc0Jsb2I6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQmxvYl0iPT09dC5jYWxsKGUpfSxpc0Z1bmN0aW9uOmksaXNTdHJlYW06ZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSkmJmkoZS5waXBlKX0saXNVUkxTZWFyY2hQYXJhbXM6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBVUkxTZWFyY2hQYXJhbXMmJmUgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXN9LGlzU3RhbmRhcmRCcm93c2VyRW52OmZ1bmN0aW9uKCl7cmV0dXJuKCJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yfHwiUmVhY3ROYXRpdmUiIT09bmF2aWdhdG9yLnByb2R1Y3QmJiJOYXRpdmVTY3JpcHQiIT09bmF2aWdhdG9yLnByb2R1Y3QmJiJOUyIhPT1uYXZpZ2F0b3IucHJvZHVjdCkmJigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl9LGZvckVhY2g6YSxtZXJnZTpmdW5jdGlvbiBlKCl7dmFyIHQ9e307ZnVuY3Rpb24gcihyLHMpe28odFtzXSkmJm8ocik/dFtzXT1lKHRbc10scik6byhyKT90W3NdPWUoe30scik6bihyKT90W3NdPXIuc2xpY2UoKTp0W3NdPXJ9Zm9yKHZhciBzPTAsaT1hcmd1bWVudHMubGVuZ3RoO3M8aTtzKyspYShhcmd1bWVudHNbc10scik7cmV0dXJuIHR9LGV4dGVuZDpmdW5jdGlvbih0LG4scil7cmV0dXJuIGEobiwoZnVuY3Rpb24obixzKXt0W3NdPXImJiJmdW5jdGlvbiI9PXR5cGVvZiBuP2UobixyKTpufSkpLHR9LHRyaW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXlxzKi8sIiIpLnJlcGxhY2UoL1xzKiQvLCIiKX0sc3RyaXBCT006ZnVuY3Rpb24oZSl7cmV0dXJuIDY1Mjc5PT09ZS5jaGFyQ29kZUF0KDApJiYoZT1lLnNsaWNlKDEpKSxlfX07ZnVuY3Rpb24gdShlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGUpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTIwL2csIisiKS5yZXBsYWNlKC8lNUIvZ2ksIlsiKS5yZXBsYWNlKC8lNUQvZ2ksIl0iKX12YXIgbD1mdW5jdGlvbihlLHQsbil7aWYoIXQpcmV0dXJuIGU7dmFyIHI7aWYobilyPW4odCk7ZWxzZSBpZihjLmlzVVJMU2VhcmNoUGFyYW1zKHQpKXI9dC50b1N0cmluZygpO2Vsc2V7dmFyIHM9W107Yy5mb3JFYWNoKHQsKGZ1bmN0aW9uKGUsdCl7bnVsbCE9ZSYmKGMuaXNBcnJheShlKT90Kz0iW10iOmU9W2VdLGMuZm9yRWFjaChlLChmdW5jdGlvbihlKXtjLmlzRGF0ZShlKT9lPWUudG9JU09TdHJpbmcoKTpjLmlzT2JqZWN0KGUpJiYoZT1KU09OLnN0cmluZ2lmeShlKSkscy5wdXNoKHUodCkrIj0iK3UoZSkpfSkpKX0pKSxyPXMuam9pbigiJiIpfWlmKHIpe3ZhciBvPWUuaW5kZXhPZigiIyIpOy0xIT09byYmKGU9ZS5zbGljZSgwLG8pKSxlKz0oLTE9PT1lLmluZGV4T2YoIj8iKT8iPyI6IiYiKStyfXJldHVybiBlfTtmdW5jdGlvbiBkKCl7dGhpcy5oYW5kbGVycz1bXX1kLnByb3RvdHlwZS51c2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6ZSxyZWplY3RlZDp0fSksdGhpcy5oYW5kbGVycy5sZW5ndGgtMX0sZC5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LGQucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7Yy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsKGZ1bmN0aW9uKHQpe251bGwhPT10JiZlKHQpfSkpfTt2YXIgaD1kLHA9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjLmZvckVhY2gobiwoZnVuY3Rpb24obil7ZT1uKGUsdCl9KSksZX0sZj1mdW5jdGlvbihlKXtyZXR1cm4hKCFlfHwhZS5fX0NBTkNFTF9fKX0sbT1mdW5jdGlvbihlLHQpe2MuZm9yRWFjaChlLChmdW5jdGlvbihuLHIpe3IhPT10JiZyLnRvVXBwZXJDYXNlKCk9PT10LnRvVXBwZXJDYXNlKCkmJihlW3RdPW4sZGVsZXRlIGVbcl0pfSkpfSxnPWZ1bmN0aW9uKGUsdCxuLHIscyl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuLHIscyl7cmV0dXJuIGUuY29uZmlnPXQsbiYmKGUuY29kZT1uKSxlLnJlcXVlc3Q9cixlLnJlc3BvbnNlPXMsZS5pc0F4aW9zRXJyb3I9ITAsZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGV9fSxlfShuZXcgRXJyb3IoZSksdCxuLHIscyl9LHk9Yy5pc1N0YW5kYXJkQnJvd3NlckVudigpP3t3cml0ZTpmdW5jdGlvbihlLHQsbixyLHMsbyl7dmFyIGk9W107aS5wdXNoKGUrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KSksYy5pc051bWJlcihuKSYmaS5wdXNoKCJleHBpcmVzPSIrbmV3IERhdGUobikudG9HTVRTdHJpbmcoKSksYy5pc1N0cmluZyhyKSYmaS5wdXNoKCJwYXRoPSIrciksYy5pc1N0cmluZyhzKSYmaS5wdXNoKCJkb21haW49IitzKSwhMD09PW8mJmkucHVzaCgic2VjdXJlIiksZG9jdW1lbnQuY29va2llPWkuam9pbigiOyAiKX0scmVhZDpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58O1xccyopKCIrZSsiKT0oW147XSopIikpO3JldHVybiB0P2RlY29kZVVSSUNvbXBvbmVudCh0WzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dGhpcy53cml0ZShlLCIiLERhdGUubm93KCktODY0ZTUpfX06e3dyaXRlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbigpe319LHY9WyJhZ2UiLCJhdXRob3JpemF0aW9uIiwiY29udGVudC1sZW5ndGgiLCJjb250ZW50LXR5cGUiLCJldGFnIiwiZXhwaXJlcyIsImZyb20iLCJob3N0IiwiaWYtbW9kaWZpZWQtc2luY2UiLCJpZi11bm1vZGlmaWVkLXNpbmNlIiwibGFzdC1tb2RpZmllZCIsImxvY2F0aW9uIiwibWF4LWZvcndhcmRzIiwicHJveHktYXV0aG9yaXphdGlvbiIsInJlZmVyZXIiLCJyZXRyeS1hZnRlciIsInVzZXItYWdlbnQiXSx3PWMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKT9mdW5jdGlvbigpe3ZhciBlLHQ9Lyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtmdW5jdGlvbiByKGUpe3ZhciByPWU7cmV0dXJuIHQmJihuLnNldEF0dHJpYnV0ZSgiaHJlZiIscikscj1uLmhyZWYpLG4uc2V0QXR0cmlidXRlKCJocmVmIixyKSx7aHJlZjpuLmhyZWYscHJvdG9jb2w6bi5wcm90b2NvbD9uLnByb3RvY29sLnJlcGxhY2UoLzokLywiIik6IiIsaG9zdDpuLmhvc3Qsc2VhcmNoOm4uc2VhcmNoP24uc2VhcmNoLnJlcGxhY2UoL15cPy8sIiIpOiIiLGhhc2g6bi5oYXNoP24uaGFzaC5yZXBsYWNlKC9eIy8sIiIpOiIiLGhvc3RuYW1lOm4uaG9zdG5hbWUscG9ydDpuLnBvcnQscGF0aG5hbWU6Ii8iPT09bi5wYXRobmFtZS5jaGFyQXQoMCk/bi5wYXRobmFtZToiLyIrbi5wYXRobmFtZX19cmV0dXJuIGU9cih3aW5kb3cubG9jYXRpb24uaHJlZiksZnVuY3Rpb24odCl7dmFyIG49Yy5pc1N0cmluZyh0KT9yKHQpOnQ7cmV0dXJuIG4ucHJvdG9jb2w9PT1lLnByb3RvY29sJiZuLmhvc3Q9PT1lLmhvc3R9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGs9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciByPWUuZGF0YSxzPWUuaGVhZGVycztjLmlzRm9ybURhdGEocikmJmRlbGV0ZSBzWyJDb250ZW50LVR5cGUiXTt2YXIgbz1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoZS5hdXRoKXt2YXIgaT1lLmF1dGgudXNlcm5hbWV8fCIiLGE9ZS5hdXRoLnBhc3N3b3JkP3VuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlLmF1dGgucGFzc3dvcmQpKToiIjtzLkF1dGhvcml6YXRpb249IkJhc2ljICIrYnRvYShpKyI6IithKX12YXIgdSxkLGg9KHU9ZS5iYXNlVVJMLGQ9ZS51cmwsdSYmIS9eKFthLXpdW2EtelxkXCtcLVwuXSo6KT9cL1wvL2kudGVzdChkKT9mdW5jdGlvbihlLHQpe3JldHVybiB0P2UucmVwbGFjZSgvXC8rJC8sIiIpKyIvIit0LnJlcGxhY2UoL15cLysvLCIiKTplfSh1LGQpOmQpO2lmKG8ub3BlbihlLm1ldGhvZC50b1VwcGVyQ2FzZSgpLGwoaCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLCEwKSxvLnRpbWVvdXQ9ZS50aW1lb3V0LG8ub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYobyYmND09PW8ucmVhZHlTdGF0ZSYmKDAhPT1vLnN0YXR1c3x8by5yZXNwb25zZVVSTCYmMD09PW8ucmVzcG9uc2VVUkwuaW5kZXhPZigiZmlsZToiKSkpe3ZhciByLHMsaSxhLHUsbD0iZ2V0QWxsUmVzcG9uc2VIZWFkZXJzImluIG8/KHI9by5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSx1PXt9LHI/KGMuZm9yRWFjaChyLnNwbGl0KCJcbiIpLChmdW5jdGlvbihlKXtpZihhPWUuaW5kZXhPZigiOiIpLHM9Yy50cmltKGUuc3Vic3RyKDAsYSkpLnRvTG93ZXJDYXNlKCksaT1jLnRyaW0oZS5zdWJzdHIoYSsxKSkscyl7aWYodVtzXSYmdi5pbmRleE9mKHMpPj0wKXJldHVybjt1W3NdPSJzZXQtY29va2llIj09PXM/KHVbc10/dVtzXTpbXSkuY29uY2F0KFtpXSk6dVtzXT91W3NdKyIsICIraTppfX0pKSx1KTp1KTpudWxsLGQ9e2RhdGE6ZS5yZXNwb25zZVR5cGUmJiJ0ZXh0IiE9PWUucmVzcG9uc2VUeXBlP28ucmVzcG9uc2U6by5yZXNwb25zZVRleHQsc3RhdHVzOm8uc3RhdHVzLHN0YXR1c1RleHQ6by5zdGF0dXNUZXh0LGhlYWRlcnM6bCxjb25maWc6ZSxyZXF1ZXN0Om99OyFmdW5jdGlvbihlLHQsbil7dmFyIHI9bi5jb25maWcudmFsaWRhdGVTdGF0dXM7bi5zdGF0dXMmJnImJiFyKG4uc3RhdHVzKT90KGcoIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgIituLnN0YXR1cyxuLmNvbmZpZyxudWxsLG4ucmVxdWVzdCxuKSk6ZShuKX0odCxuLGQpLG89bnVsbH19LG8ub25hYm9ydD1mdW5jdGlvbigpe28mJihuKGcoIlJlcXVlc3QgYWJvcnRlZCIsZSwiRUNPTk5BQk9SVEVEIixvKSksbz1udWxsKX0sby5vbmVycm9yPWZ1bmN0aW9uKCl7bihnKCJOZXR3b3JrIEVycm9yIixlLG51bGwsbykpLG89bnVsbH0sby5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgdD0idGltZW91dCBvZiAiK2UudGltZW91dCsibXMgZXhjZWVkZWQiO2UudGltZW91dEVycm9yTWVzc2FnZSYmKHQ9ZS50aW1lb3V0RXJyb3JNZXNzYWdlKSxuKGcodCxlLCJFQ09OTkFCT1JURUQiLG8pKSxvPW51bGx9LGMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIHA9KGUud2l0aENyZWRlbnRpYWxzfHx3KGgpKSYmZS54c3JmQ29va2llTmFtZT95LnJlYWQoZS54c3JmQ29va2llTmFtZSk6dm9pZCAwO3AmJihzW2UueHNyZkhlYWRlck5hbWVdPXApfWlmKCJzZXRSZXF1ZXN0SGVhZGVyImluIG8mJmMuZm9yRWFjaChzLChmdW5jdGlvbihlLHQpe3ZvaWQgMD09PXImJiJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpP2RlbGV0ZSBzW3RdOm8uc2V0UmVxdWVzdEhlYWRlcih0LGUpfSkpLGMuaXNVbmRlZmluZWQoZS53aXRoQ3JlZGVudGlhbHMpfHwoby53aXRoQ3JlZGVudGlhbHM9ISFlLndpdGhDcmVkZW50aWFscyksZS5yZXNwb25zZVR5cGUpdHJ5e28ucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlfWNhdGNoKHQpe2lmKCJqc29uIiE9PWUucmVzcG9uc2VUeXBlKXRocm93IHR9ImZ1bmN0aW9uIj09dHlwZW9mIGUub25Eb3dubG9hZFByb2dyZXNzJiZvLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uRG93bmxvYWRQcm9ncmVzcyksImZ1bmN0aW9uIj09dHlwZW9mIGUub25VcGxvYWRQcm9ncmVzcyYmby51cGxvYWQmJm8udXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uVXBsb2FkUHJvZ3Jlc3MpLGUuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKChmdW5jdGlvbihlKXtvJiYoby5hYm9ydCgpLG4oZSksbz1udWxsKX0pKSxyfHwocj1udWxsKSxvLnNlbmQocil9KSl9LFM9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifTtmdW5jdGlvbiBiKGUsdCl7IWMuaXNVbmRlZmluZWQoZSkmJmMuaXNVbmRlZmluZWQoZVsiQ29udGVudC1UeXBlIl0pJiYoZVsiQ29udGVudC1UeXBlIl09dCl9dmFyIF8sQT17YWRhcHRlcjooKCJ1bmRlZmluZWQiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3R8fCJ1bmRlZmluZWQiIT10eXBlb2YgcHJvY2VzcyYmIltvYmplY3QgcHJvY2Vzc10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpKSYmKF89ayksXyksdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oZSx0KXtyZXR1cm4gbSh0LCJBY2NlcHQiKSxtKHQsIkNvbnRlbnQtVHlwZSIpLGMuaXNGb3JtRGF0YShlKXx8Yy5pc0FycmF5QnVmZmVyKGUpfHxjLmlzQnVmZmVyKGUpfHxjLmlzU3RyZWFtKGUpfHxjLmlzRmlsZShlKXx8Yy5pc0Jsb2IoZSk/ZTpjLmlzQXJyYXlCdWZmZXJWaWV3KGUpP2UuYnVmZmVyOmMuaXNVUkxTZWFyY2hQYXJhbXMoZSk/KGIodCwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgiKSxlLnRvU3RyaW5nKCkpOmMuaXNPYmplY3QoZSk/KGIodCwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04IiksSlNPTi5zdHJpbmdpZnkoZSkpOmV9XSx0cmFuc2Zvcm1SZXNwb25zZTpbZnVuY3Rpb24oZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXRyeXtlPUpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7fXJldHVybiBlfV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOiJYU1JGLVRPS0VOIix4c3JmSGVhZGVyTmFtZToiWC1YU1JGLVRPS0VOIixtYXhDb250ZW50TGVuZ3RoOi0xLG1heEJvZHlMZW5ndGg6LTEsdmFsaWRhdGVTdGF0dXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTIwMCYmZTwzMDB9fTtBLmhlYWRlcnM9e2NvbW1vbjp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyoifX0sYy5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLChmdW5jdGlvbihlKXtBLmhlYWRlcnNbZV09e319KSksYy5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sKGZ1bmN0aW9uKGUpe0EuaGVhZGVyc1tlXT1jLm1lcmdlKFMpfSkpO3ZhciBFPUE7ZnVuY3Rpb24gUChlKXtlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKX12YXIgQz1mdW5jdGlvbihlKXtyZXR1cm4gUChlKSxlLmhlYWRlcnM9ZS5oZWFkZXJzfHx7fSxlLmRhdGE9cChlLmRhdGEsZS5oZWFkZXJzLGUudHJhbnNmb3JtUmVxdWVzdCksZS5oZWFkZXJzPWMubWVyZ2UoZS5oZWFkZXJzLmNvbW1vbnx8e30sZS5oZWFkZXJzW2UubWV0aG9kXXx8e30sZS5oZWFkZXJzKSxjLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sKGZ1bmN0aW9uKHQpe2RlbGV0ZSBlLmhlYWRlcnNbdF19KSksKGUuYWRhcHRlcnx8RS5hZGFwdGVyKShlKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gUChlKSx0LmRhdGE9cCh0LmRhdGEsdC5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpLHR9KSwoZnVuY3Rpb24odCl7cmV0dXJuIGYodCl8fChQKGUpLHQmJnQucmVzcG9uc2UmJih0LnJlc3BvbnNlLmRhdGE9cCh0LnJlc3BvbnNlLmRhdGEsdC5yZXNwb25zZS5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpKSksUHJvbWlzZS5yZWplY3QodCl9KSl9LEk9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPXt9LHI9WyJ1cmwiLCJtZXRob2QiLCJkYXRhIl0scz1bImhlYWRlcnMiLCJhdXRoIiwicHJveHkiLCJwYXJhbXMiXSxvPVsiYmFzZVVSTCIsInRyYW5zZm9ybVJlcXVlc3QiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInBhcmFtc1NlcmlhbGl6ZXIiLCJ0aW1lb3V0IiwidGltZW91dE1lc3NhZ2UiLCJ3aXRoQ3JlZGVudGlhbHMiLCJhZGFwdGVyIiwicmVzcG9uc2VUeXBlIiwieHNyZkNvb2tpZU5hbWUiLCJ4c3JmSGVhZGVyTmFtZSIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJkZWNvbXByZXNzIiwibWF4Q29udGVudExlbmd0aCIsIm1heEJvZHlMZW5ndGgiLCJtYXhSZWRpcmVjdHMiLCJ0cmFuc3BvcnQiLCJodHRwQWdlbnQiLCJodHRwc0FnZW50IiwiY2FuY2VsVG9rZW4iLCJzb2NrZXRQYXRoIiwicmVzcG9uc2VFbmNvZGluZyJdLGk9WyJ2YWxpZGF0ZVN0YXR1cyJdO2Z1bmN0aW9uIGEoZSx0KXtyZXR1cm4gYy5pc1BsYWluT2JqZWN0KGUpJiZjLmlzUGxhaW5PYmplY3QodCk/Yy5tZXJnZShlLHQpOmMuaXNQbGFpbk9iamVjdCh0KT9jLm1lcmdlKHt9LHQpOmMuaXNBcnJheSh0KT90LnNsaWNlKCk6dH1mdW5jdGlvbiB1KHIpe2MuaXNVbmRlZmluZWQodFtyXSk/Yy5pc1VuZGVmaW5lZChlW3JdKXx8KG5bcl09YSh2b2lkIDAsZVtyXSkpOm5bcl09YShlW3JdLHRbcl0pfWMuZm9yRWFjaChyLChmdW5jdGlvbihlKXtjLmlzVW5kZWZpbmVkKHRbZV0pfHwobltlXT1hKHZvaWQgMCx0W2VdKSl9KSksYy5mb3JFYWNoKHMsdSksYy5mb3JFYWNoKG8sKGZ1bmN0aW9uKHIpe2MuaXNVbmRlZmluZWQodFtyXSk/Yy5pc1VuZGVmaW5lZChlW3JdKXx8KG5bcl09YSh2b2lkIDAsZVtyXSkpOm5bcl09YSh2b2lkIDAsdFtyXSl9KSksYy5mb3JFYWNoKGksKGZ1bmN0aW9uKHIpe3IgaW4gdD9uW3JdPWEoZVtyXSx0W3JdKTpyIGluIGUmJihuW3JdPWEodm9pZCAwLGVbcl0pKX0pKTt2YXIgbD1yLmNvbmNhdChzKS5jb25jYXQobykuY29uY2F0KGkpLGQ9T2JqZWN0LmtleXMoZSkuY29uY2F0KE9iamVjdC5rZXlzKHQpKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi0xPT09bC5pbmRleE9mKGUpfSkpO3JldHVybiBjLmZvckVhY2goZCx1KSxufTtmdW5jdGlvbiBUKGUpe3RoaXMuZGVmYXVsdHM9ZSx0aGlzLmludGVyY2VwdG9ycz17cmVxdWVzdDpuZXcgaCxyZXNwb25zZTpuZXcgaH19VC5wcm90b3R5cGUucmVxdWVzdD1mdW5jdGlvbihlKXsic3RyaW5nIj09dHlwZW9mIGU/KGU9YXJndW1lbnRzWzFdfHx7fSkudXJsPWFyZ3VtZW50c1swXTplPWV8fHt9LChlPUkodGhpcy5kZWZhdWx0cyxlKSkubWV0aG9kP2UubWV0aG9kPWUubWV0aG9kLnRvTG93ZXJDYXNlKCk6dGhpcy5kZWZhdWx0cy5tZXRob2Q/ZS5tZXRob2Q9dGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTplLm1ldGhvZD0iZ2V0Ijt2YXIgdD1bQyx2b2lkIDBdLG49UHJvbWlzZS5yZXNvbHZlKGUpO2Zvcih0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3QudW5zaGlmdChlLmZ1bGZpbGxlZCxlLnJlamVjdGVkKX0pKSx0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnB1c2goZS5mdWxmaWxsZWQsZS5yZWplY3RlZCl9KSk7dC5sZW5ndGg7KW49bi50aGVuKHQuc2hpZnQoKSx0LnNoaWZ0KCkpO3JldHVybiBufSxULnByb3RvdHlwZS5nZXRVcmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9SSh0aGlzLmRlZmF1bHRzLGUpLGwoZS51cmwsZS5wYXJhbXMsZS5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXD8vLCIiKX0sYy5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSwoZnVuY3Rpb24oZSl7VC5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KEkobnx8e30se21ldGhvZDplLHVybDp0LGRhdGE6KG58fHt9KS5kYXRhfSkpfX0pKSxjLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSwoZnVuY3Rpb24oZSl7VC5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuLHIpe3JldHVybiB0aGlzLnJlcXVlc3QoSShyfHx7fSx7bWV0aG9kOmUsdXJsOnQsZGF0YTpufSkpfX0pKTt2YXIgaj1UO2Z1bmN0aW9uIFIoZSl7dGhpcy5tZXNzYWdlPWV9Ui5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iQ2FuY2VsIisodGhpcy5tZXNzYWdlPyI6ICIrdGhpcy5tZXNzYWdlOiIiKX0sUi5wcm90b3R5cGUuX19DQU5DRUxfXz0hMDt2YXIgeD1SO2Z1bmN0aW9uIE8oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO3ZhciB0O3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dD1lfSkpO3ZhciBuPXRoaXM7ZSgoZnVuY3Rpb24oZSl7bi5yZWFzb258fChuLnJlYXNvbj1uZXcgeChlKSx0KG4ucmVhc29uKSl9KSl9Ty5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZD1mdW5jdGlvbigpe2lmKHRoaXMucmVhc29uKXRocm93IHRoaXMucmVhc29ufSxPLnNvdXJjZT1mdW5jdGlvbigpe3ZhciBlO3JldHVybnt0b2tlbjpuZXcgTygoZnVuY3Rpb24odCl7ZT10fSkpLGNhbmNlbDplfX07dmFyIEg9TztmdW5jdGlvbiBxKHQpe3ZhciBuPW5ldyBqKHQpLHI9ZShqLnByb3RvdHlwZS5yZXF1ZXN0LG4pO3JldHVybiBjLmV4dGVuZChyLGoucHJvdG90eXBlLG4pLGMuZXh0ZW5kKHIsbikscn12YXIgTT1xKEUpO00uQXhpb3M9aixNLmNyZWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gcShJKE0uZGVmYXVsdHMsZSkpfSxNLkNhbmNlbD14LE0uQ2FuY2VsVG9rZW49SCxNLmlzQ2FuY2VsPWYsTS5hbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UuYWxsKGUpfSxNLnNwcmVhZD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkobnVsbCx0KX19O3ZhciBVPU0sVz1NO1UuZGVmYXVsdD1XO3ZhciBCPVU7Y29uc3QgRD17YXV0aG9yaXplOiIvb2F1dGgyL2F1dGhvcml6ZSIsandrczoiL29hdXRoMi9qd2tzIixsb2dvdXQ6Ii9vaWRjL2xvZ291dCIsb2lkY1Nlc3Npb25JRnJhbWU6Ii9vaWRjL2NoZWNrc2Vzc2lvbiIscmV2b2tlOiIvb2F1dGgyL3Jldm9rZSIsdG9rZW46Ii9vYXV0aDIvdG9rZW4iLHdlbGxLbm93bjoiL29hdXRoMi90b2tlbi8ud2VsbC1rbm93bi9vcGVuaWQtY29uZmlndXJhdGlvbiJ9LE49ImF1dGhvcml6YXRpb25fZW5kcG9pbnQiLEw9InRva2VuX2VuZHBvaW50IixLPSJyZXZva2VfdG9rZW5fZW5kcG9pbnQiLEo9ImVuZF9zZXNzaW9uX2VuZHBvaW50IixGPSJqd2tzX3VyaSIsJD0ib3BfY29uZmlnX2luaXRpYXRlZCIsej0ic2lnbl9pbl9yZWRpcmVjdF91cmwiLEc9InNpZ25fb3V0X3JlZGlyZWN0X3VybCIsVj0ib2lkY19zZXNzaW9uX2lmcmFtZV9lbmRwb2ludCIsWT0iYWNjZXNzX3Rva2VuIixYPSJleHBpcmVzX2luIixRPSJpc3N1ZWRfYXQiLFo9ImNvZGUiLGVlPSJjbGllbnRfaWQiLHRlPSJpZF90b2tlbiIsbmU9Im9wZW5pZCIscmU9InBrY2VfY29kZV92ZXJpZmllciIsc2U9InJlZnJlc2hfdG9rZW4iLG9lPSJzY29wZSIsaWU9InNlc3Npb25fc3RhdGUiLGFlPSJ0b2tlbl90eXBlIixjZT0icmVxdWVzdF9wYXJhbXMiLHVlPSJ0ZW5hbnRfZG9tYWluIixsZT0iaXNzdWVyIixkZT0icmVmcmVzaF90b2tlbl90aW1lciIsaGU9InVzZXJuYW1lIixwZT0iZW1haWwiLGZlPSJkaXNwbGF5X25hbWUiLG1lPSJzaWduZWQtaW4iLGdlPSJhdXRoLXJlcXVpcmVkIjt2YXIgeWUsdmUsd2Usa2U7IWZ1bmN0aW9uKGUpe2UuTG9jYWxTdG9yYWdlPSJsb2NhbFN0b3JhZ2UiLGUuU2Vzc2lvblN0b3JhZ2U9InNlc3Npb25TdG9yYWdlIixlLldlYldvcmtlcj0id2ViV29ya2VyIn0oeWV8fCh5ZT17fSkpLGZ1bmN0aW9uKGUpe2UuU2lnbkluPSJzaWduLWluIixlLlNpZ25PdXQ9InNpZ24tb3V0IixlLkluaXRpYWxpemU9ImluaXRpYWxpemUiLGUuSHR0cFJlcXVlc3RTdGFydD0iaHR0cC1yZXF1ZXN0LXN0YXJ0IixlLkh0dHBSZXF1ZXN0RmluaXNoPSJodHRwLXJlcXVlc3QtZmluaXNoIixlLkh0dHBSZXF1ZXN0RXJyb3I9Imh0dHAtcmVxdWVzdC1lcnJvciIsZS5IdHRwUmVxdWVzdFN1Y2Nlc3M9Imh0dHAtcmVxdWVzdC1zdWNjZXNzIixlLkVuZFVzZXJTZXNzaW9uPSJlbmQtdXNlci1zZXNzaW9uIixlLkN1c3RvbUdyYW50PSJjdXN0b20tZ3JhbnQifSh2ZXx8KHZlPXt9KSksZnVuY3Rpb24oZSl7ZS5mb3JtUG9zdD0iZm9ybV9wb3N0IixlLnF1ZXJ5PSJxdWVyeSJ9KHdlfHwod2U9e30pKTtsZXQgU2U9a2U9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmluaXQ9dGhpcy5pbml0LmJpbmQodGhpcyl9c3RhdGljIGdldEluc3RhbmNlKCl7cmV0dXJuIHRoaXMuYXhpb3NJbnN0YW5jZXx8KHRoaXMuYXhpb3NJbnN0YW5jZT1CLmNyZWF0ZSh7d2l0aENyZWRlbnRpYWxzOiEwfSksdGhpcy5jbGllbnRJbnN0YW5jZXx8KHRoaXMuY2xpZW50SW5zdGFuY2U9bmV3IGtlKSx0aGlzLmF4aW9zSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKChlPT50aGlzLmNsaWVudEluc3RhbmNlLnJlcXVlc3RIYW5kbGVyKGUpKSksdGhpcy5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoKGU9PnRoaXMuY2xpZW50SW5zdGFuY2Uuc3VjY2Vzc0hhbmRsZXIoZSkpLChlPT50aGlzLmNsaWVudEluc3RhbmNlLmVycm9ySGFuZGxlcihlKSkpLHRoaXMuYXhpb3NJbnN0YW5jZS5hbGw9Qi5hbGwsdGhpcy5heGlvc0luc3RhbmNlLnNwcmVhZD1CLnNwcmVhZCx0aGlzLmF4aW9zSW5zdGFuY2UuaW5pdD10aGlzLmNsaWVudEluc3RhbmNlLmluaXQsdGhpcy5heGlvc0luc3RhbmNlLmVuYWJsZUhhbmRsZXI9dGhpcy5jbGllbnRJbnN0YW5jZS5lbmFibGVIYW5kbGVyLHRoaXMuYXhpb3NJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcj10aGlzLmNsaWVudEluc3RhbmNlLmRpc2FibGVIYW5kbGVyLHRoaXMuYXhpb3NJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0PXRoaXMuY2xpZW50SW5zdGFuY2UuZGlzYWJsZUhhbmRsZXJXaXRoVGltZW91dCksdGhpcy5heGlvc0luc3RhbmNlfXJlcXVlc3RIYW5kbGVyKGUpe3JldHVybiBrZS5pc0hhbmRsZXJFbmFibGVkJiZ0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjayYmdGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjayhlKSxlfWVycm9ySGFuZGxlcihlKXt0aHJvdyBrZS5pc0hhbmRsZXJFbmFibGVkJiYodGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2smJnRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2soZSksdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2soKSksZX1zdWNjZXNzSGFuZGxlcihlKXtyZXR1cm4ga2UuaXNIYW5kbGVyRW5hYmxlZCYmKHRoaXMucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayYmdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrKGUpLHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJnRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrKCkpLGV9aW5pdChlPSEwLHQsbixyLHMpe2tlLmlzSGFuZGxlckVuYWJsZWQ9ZSx0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2smJnRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2smJnRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrfHwodGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFja3x8KHRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2s9dCksdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrfHwodGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPW4pLHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2t8fCh0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrPXIpLHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrfHwodGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2s9cykpfWVuYWJsZUhhbmRsZXIoKXtrZS5pc0hhbmRsZXJFbmFibGVkPSEwfWRpc2FibGVIYW5kbGVyKCl7a2UuaXNIYW5kbGVyRW5hYmxlZD0hMX1kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0KGU9a2UuREVGQVVMVF9IQU5ETEVSX0RJU0FCTEVfVElNRU9VVCl7a2UuaXNIYW5kbGVyRW5hYmxlZD0hMSxzZXRUaW1lb3V0KCgoKT0+e2tlLmlzSGFuZGxlckVuYWJsZWQ9ITB9KSxlKX19O1NlLkRFRkFVTFRfSEFORExFUl9ESVNBQkxFX1RJTUVPVVQ9MWUzLFNlPWtlPQovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4KCiAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLgoKICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSAogIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwKICBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00KICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1IKICBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLgogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovCmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBzLG89YXJndW1lbnRzLmxlbmd0aCxpPW88Mz90Om51bGw9PT1yP3I9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOnI7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlpPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4scik7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocz1lW2FdKSYmKGk9KG88Mz9zKGkpOm8+Mz9zKHQsbixpKTpzKHQsbikpfHxpKTtyZXR1cm4gbz4zJiZpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGkpLGl9KFtlPT57fV0sU2UpOyJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmO2Z1bmN0aW9uIGJlKGUsdCxuKXtyZXR1cm4gZShuPXtwYXRoOnQsZXhwb3J0czp7fSxyZXF1aXJlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJEeW5hbWljIHJlcXVpcmVzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSBAcm9sbHVwL3BsdWdpbi1jb21tb25qcyIpfShudWxsPT10JiZuLnBhdGgpfX0sbi5leHBvcnRzKSxuLmV4cG9ydHN9dmFyIF9lPWJlKChmdW5jdGlvbihlLHQpe3ZhciBuO2UuZXhwb3J0cz0obj1ufHxmdW5jdGlvbihlLHQpe3ZhciBuPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuIGUucHJvdG90eXBlPXQsbj1uZXcgZSxlLnByb3RvdHlwZT1udWxsLG59fSgpLHI9e30scz1yLmxpYj17fSxvPXMuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PW4odGhpcyk7cmV0dXJuIGUmJnQubWl4SW4oZSksdC5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT10LmluaXR8fCh0LmluaXQ9ZnVuY3Rpb24oKXt0LiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLHQuaW5pdC5wcm90b3R5cGU9dCx0LiRzdXBlcj10aGlzLHR9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZXh0ZW5kKCk7cmV0dXJuIGUuaW5pdC5hcHBseShlLGFyZ3VtZW50cyksZX0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKHRoaXNbdF09ZVt0XSk7ZS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9ZS50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0saT1zLldvcmRBcnJheT1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4pe2U9dGhpcy53b3Jkcz1lfHxbXSx0aGlzLnNpZ0J5dGVzPW4hPXQ/bjo0KmUubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4oZXx8Yykuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53b3JkcyxuPWUud29yZHMscj10aGlzLnNpZ0J5dGVzLHM9ZS5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksciU0KWZvcih2YXIgbz0wO288cztvKyspe3ZhciBpPW5bbz4+PjJdPj4+MjQtbyU0KjgmMjU1O3RbcitvPj4+Ml18PWk8PDI0LShyK28pJTQqOH1lbHNlIGZvcihvPTA7bzxzO28rPTQpdFtyK28+Pj4yXT1uW28+Pj4yXTtyZXR1cm4gdGhpcy5zaWdCeXRlcys9cyx0aGlzfSxjbGFtcDpmdW5jdGlvbigpe3ZhciB0PXRoaXMud29yZHMsbj10aGlzLnNpZ0J5dGVzO3Rbbj4+PjJdJj00Mjk0OTY3Mjk1PDwzMi1uJTQqOCx0Lmxlbmd0aD1lLmNlaWwobi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZT1vLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGUud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxlfSxyYW5kb206ZnVuY3Rpb24odCl7Zm9yKHZhciBuLHI9W10scz1mdW5jdGlvbih0KXt0PXQ7dmFyIG49OTg3NjU0MzIxLHI9NDI5NDk2NzI5NTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcz0oKG49MzY5NjkqKDY1NTM1Jm4pKyhuPj4xNikmcik8PDE2KSsodD0xOGUzKig2NTUzNSZ0KSsodD4+MTYpJnIpJnI7cmV0dXJuIHMvPTQyOTQ5NjcyOTYsKHMrPS41KSooZS5yYW5kb20oKT4uNT8xOi0xKX19LG89MDtvPHQ7bys9NCl7dmFyIGE9cyg0Mjk0OTY3Mjk2KihufHxlLnJhbmRvbSgpKSk7bj05ODc2NTQwNzEqYSgpLHIucHVzaCg0Mjk0OTY3Mjk2KmEoKXwwKX1yZXR1cm4gbmV3IGkuaW5pdChyLHQpfX0pLGE9ci5lbmM9e30sYz1hLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLndvcmRzLG49ZS5zaWdCeXRlcyxyPVtdLHM9MDtzPG47cysrKXt2YXIgbz10W3M+Pj4yXT4+PjI0LXMlNCo4JjI1NTtyLnB1c2goKG8+Pj40KS50b1N0cmluZygxNikpLHIucHVzaCgoMTUmbykudG9TdHJpbmcoMTYpKX1yZXR1cm4gci5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49W10scj0wO3I8dDtyKz0yKW5bcj4+PjNdfD1wYXJzZUludChlLnN1YnN0cihyLDIpLDE2KTw8MjQtciU4KjQ7cmV0dXJuIG5ldyBpLmluaXQobix0LzIpfX0sdT1hLkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLndvcmRzLG49ZS5zaWdCeXRlcyxyPVtdLHM9MDtzPG47cysrKXt2YXIgbz10W3M+Pj4yXT4+PjI0LXMlNCo4JjI1NTtyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShvKSl9cmV0dXJuIHIuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxuPVtdLHI9MDtyPHQ7cisrKW5bcj4+PjJdfD0oMjU1JmUuY2hhckNvZGVBdChyKSk8PDI0LXIlNCo4O3JldHVybiBuZXcgaS5pbml0KG4sdCl9fSxsPWEuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZSh1LnN0cmluZ2lmeShlKSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiB1LnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlKSkpfX0sZD1zLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09by5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgaS5pbml0LHRoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihlKXsic3RyaW5nIj09dHlwZW9mIGUmJihlPWwucGFyc2UoZSkpLHRoaXMuX2RhdGEuY29uY2F0KGUpLHRoaXMuX25EYXRhQnl0ZXMrPWUuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuX2RhdGEscj1uLndvcmRzLHM9bi5zaWdCeXRlcyxvPXRoaXMuYmxvY2tTaXplLGE9cy8oNCpvKSxjPShhPXQ/ZS5jZWlsKGEpOmUubWF4KCgwfGEpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKm8sdT1lLm1pbig0KmMscyk7aWYoYyl7Zm9yKHZhciBsPTA7bDxjO2wrPW8pdGhpcy5fZG9Qcm9jZXNzQmxvY2socixsKTt2YXIgZD1yLnNwbGljZSgwLGMpO24uc2lnQnl0ZXMtPXV9cmV0dXJuIG5ldyBpLmluaXQoZCx1KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZT1vLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGUuX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpLGV9LF9taW5CdWZmZXJTaXplOjB9KSxoPShzLkhhc2hlcj1kLmV4dGVuZCh7Y2ZnOm8uZXh0ZW5kKCksaW5pdDpmdW5jdGlvbihlKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoZSksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2QucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHVwZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYXBwZW5kKGUpLHRoaXMuX3Byb2Nlc3MoKSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5fYXBwZW5kKGUpLHRoaXMuX2RvRmluYWxpemUoKX0sYmxvY2tTaXplOjE2LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlLmluaXQobikuZmluYWxpemUodCl9fSxfY3JlYXRlSG1hY0hlbHBlcjpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGguSE1BQy5pbml0KGUsbikuZmluYWxpemUodCl9fX0pLHIuYWxnbz17fSk7cmV0dXJuIHJ9KE1hdGgpLG4pfSkpLEFlPWJlKChmdW5jdGlvbihlLHQpe3ZhciBuO2UuZXhwb3J0cz0obj1fZSxmdW5jdGlvbigpe3ZhciBlPW4sdD1lLmxpYi5Xb3JkQXJyYXk7ZnVuY3Rpb24gcihlLG4scil7Zm9yKHZhciBzPVtdLG89MCxpPTA7aTxuO2krKylpZihpJTQpe3ZhciBhPXJbZS5jaGFyQ29kZUF0KGktMSldPDxpJTQqMixjPXJbZS5jaGFyQ29kZUF0KGkpXT4+PjYtaSU0KjI7c1tvPj4+Ml18PShhfGMpPDwyNC1vJTQqOCxvKyt9cmV0dXJuIHQuY3JlYXRlKHMsbyl9ZS5lbmMuQmFzZTY0PXtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53b3JkcyxuPWUuc2lnQnl0ZXMscj10aGlzLl9tYXA7ZS5jbGFtcCgpO2Zvcih2YXIgcz1bXSxvPTA7bzxuO28rPTMpZm9yKHZhciBpPSh0W28+Pj4yXT4+PjI0LW8lNCo4JjI1NSk8PDE2fCh0W28rMT4+PjJdPj4+MjQtKG8rMSklNCo4JjI1NSk8PDh8dFtvKzI+Pj4yXT4+PjI0LShvKzIpJTQqOCYyNTUsYT0wO2E8NCYmbysuNzUqYTxuO2ErKylzLnB1c2goci5jaGFyQXQoaT4+PjYqKDMtYSkmNjMpKTt2YXIgYz1yLmNoYXJBdCg2NCk7aWYoYylmb3IoO3MubGVuZ3RoJTQ7KXMucHVzaChjKTtyZXR1cm4gcy5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGgsbj10aGlzLl9tYXAscz10aGlzLl9yZXZlcnNlTWFwO2lmKCFzKXtzPXRoaXMuX3JldmVyc2VNYXA9W107Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspc1tuLmNoYXJDb2RlQXQobyldPW99dmFyIGk9bi5jaGFyQXQoNjQpO2lmKGkpe3ZhciBhPWUuaW5kZXhPZihpKTstMSE9PWEmJih0PWEpfXJldHVybiByKGUsdCxzKX0sX21hcDoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0ifX0oKSxuLmVuYy5CYXNlNjQpfSkpLEVlPWJlKChmdW5jdGlvbihlLHQpe3ZhciBuO2UuZXhwb3J0cz0obj1fZSxmdW5jdGlvbigpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBBcnJheUJ1ZmZlcil7dmFyIGU9bi5saWIuV29yZEFycmF5LHQ9ZS5pbml0OyhlLmluaXQ9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYoZT1uZXcgVWludDhBcnJheShlKSksKGUgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJmUgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8ZSBpbnN0YW5jZW9mIEludDE2QXJyYXl8fGUgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8ZSBpbnN0YW5jZW9mIEludDMyQXJyYXl8fGUgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8ZSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8ZSBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJihlPW5ldyBVaW50OEFycmF5KGUuYnVmZmVyLGUuYnl0ZU9mZnNldCxlLmJ5dGVMZW5ndGgpKSxlIGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBuPWUuYnl0ZUxlbmd0aCxyPVtdLHM9MDtzPG47cysrKXJbcz4+PjJdfD1lW3NdPDwyNC1zJTQqODt0LmNhbGwodGhpcyxyLG4pfWVsc2UgdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5wcm90b3R5cGU9ZX19KCksbi5saWIuV29yZEFycmF5KX0pKSxQZT1iZSgoZnVuY3Rpb24oZSx0KXt2YXIgbjtlLmV4cG9ydHM9KG49X2UsZnVuY3Rpb24oZSl7dmFyIHQ9bixyPXQubGliLHM9ci5Xb3JkQXJyYXksbz1yLkhhc2hlcixpPXQuYWxnbyxhPVtdLGM9W107IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtmb3IodmFyIG49ZS5zcXJ0KHQpLHI9MjtyPD1uO3IrKylpZighKHQlcikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gbihlKXtyZXR1cm4gNDI5NDk2NzI5NiooZS0oMHxlKSl8MH1mb3IodmFyIHI9MixzPTA7czw2NDspdChyKSYmKHM8OCYmKGFbc109bihlLnBvdyhyLC41KSkpLGNbc109bihlLnBvdyhyLDEvMykpLHMrKykscisrfSgpO3ZhciB1PVtdLGw9aS5TSEEyNTY9by5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgcy5pbml0KGEuc2xpY2UoMCkpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49dGhpcy5faGFzaC53b3JkcyxyPW5bMF0scz1uWzFdLG89blsyXSxpPW5bM10sYT1uWzRdLGw9bls1XSxkPW5bNl0saD1uWzddLHA9MDtwPDY0O3ArKyl7aWYocDwxNil1W3BdPTB8ZVt0K3BdO2Vsc2V7dmFyIGY9dVtwLTE1XSxtPShmPDwyNXxmPj4+NyleKGY8PDE0fGY+Pj4xOCleZj4+PjMsZz11W3AtMl0seT0oZzw8MTV8Zz4+PjE3KV4oZzw8MTN8Zz4+PjE5KV5nPj4+MTA7dVtwXT1tK3VbcC03XSt5K3VbcC0xNl19dmFyIHY9ciZzXnImb15zJm8sdz0ocjw8MzB8cj4+PjIpXihyPDwxOXxyPj4+MTMpXihyPDwxMHxyPj4+MjIpLGs9aCsoKGE8PDI2fGE+Pj42KV4oYTw8MjF8YT4+PjExKV4oYTw8N3xhPj4+MjUpKSsoYSZsXn5hJmQpK2NbcF0rdVtwXTtoPWQsZD1sLGw9YSxhPWkra3wwLGk9byxvPXMscz1yLHI9aysodyt2KXwwfW5bMF09blswXStyfDAsblsxXT1uWzFdK3N8MCxuWzJdPW5bMl0rb3wwLG5bM109blszXStpfDAsbls0XT1uWzRdK2F8MCxuWzVdPW5bNV0rbHwwLG5bNl09bls2XStkfDAsbls3XT1uWzddK2h8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLG49dC53b3JkcyxyPTgqdGhpcy5fbkRhdGFCeXRlcyxzPTgqdC5zaWdCeXRlcztyZXR1cm4gbltzPj4+NV18PTEyODw8MjQtcyUzMixuWzE0KyhzKzY0Pj4+OTw8NCldPWUuZmxvb3Ioci80Mjk0OTY3Mjk2KSxuWzE1KyhzKzY0Pj4+OTw8NCldPXIsdC5zaWdCeXRlcz00Km4ubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPW8uY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gZS5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksZX19KTt0LlNIQTI1Nj1vLl9jcmVhdGVIZWxwZXIobCksdC5IbWFjU0hBMjU2PW8uX2NyZWF0ZUhtYWNIZWxwZXIobCl9KE1hdGgpLG4uU0hBMjU2KX0pKTtjb25zdCBDZT1uZXcgVGV4dEVuY29kZXIsSWU9bmV3IFRleHREZWNvZGVyO3ZhciBUZT1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcylyZXR1cm4gZ2xvYmFsVGhpcztpZigidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYpcmV0dXJuIHNlbGY7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cpcmV0dXJuIHdpbmRvdzt0aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCIpfSgpO2NvbnN0IGplPWU9PntsZXQgdD1lO3JldHVybiB0IGluc3RhbmNlb2YgVWludDhBcnJheSYmKHQ9SWUuZGVjb2RlKHQpKSx0PXQucmVwbGFjZSgvLS9nLCIrIikucmVwbGFjZSgvXy9nLCIvIikucmVwbGFjZSgvXHMvZywiIiksbmV3IFVpbnQ4QXJyYXkoVGUuYXRvYih0KS5zcGxpdCgiIikubWFwKChlPT5lLmNoYXJDb2RlQXQoMCkpKSl9O2NsYXNzIFJlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSk9TRV9HRU5FUklDIix0aGlzLm5hbWU9dGhpcy5jb25zdHJ1Y3Rvci5uYW1lLEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRoaXMuY29uc3RydWN0b3IpfX1jbGFzcyB4ZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKGUsdD0idW5zcGVjaWZpZWQiLG49InVuc3BlY2lmaWVkIil7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEIix0aGlzLmNsYWltPXQsdGhpcy5yZWFzb249bn19Y2xhc3MgT2UgZXh0ZW5kcyBSZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSk9TRV9BTEdfTk9UX0FMTE9XRUQifX1jbGFzcyBIZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KT1NFX05PVF9TVVBQT1JURUQifX1jbGFzcyBxZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV1NfSU5WQUxJRCJ9fWNsYXNzIE1lIGV4dGVuZHMgUmV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXVF9JTlZBTElEIn19Y2xhc3MgVWUgZXh0ZW5kcyBSZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldTX1NJR05BVFVSRV9WRVJJRklDQVRJT05fRkFJTEVEIix0aGlzLm1lc3NhZ2U9InNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkIn19Y2xhc3MgV2UgZXh0ZW5kcyB4ZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldUX0VYUElSRUQifX12YXIgQmU9VGUuY3J5cHRvO2Z1bmN0aW9uIERlKCl7aWYoIVRlLmlzU2VjdXJlQ29udGV4dCYmIVRlLmNyeXB0by5zdWJ0bGUpdGhyb3cgbmV3IFJlKCJXZWIgQ3J5cHRvZ3JhcGh5IEFQSSBpcyBhdmFpbGFibGUgb25seSBpbiBTZWN1cmUgQ29udGV4dHMuIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU2VjdXJpdHkvU2VjdXJlX0NvbnRleHRzIil9Y29uc3QgTmU9YXN5bmMgZT0+e3ZhciB0LG47Y29uc3R7YWxnb3JpdGhtOnIsa2V5VXNhZ2VzOnN9PWZ1bmN0aW9uKGUpe2xldCB0LG47c3dpdGNoKGUua3R5KXtjYXNlIm9jdCI6c3dpdGNoKGUuYWxnKXtjYXNlIkhTMjU2IjpjYXNlIkhTMzg0IjpjYXNlIkhTNTEyIjp0PXtuYW1lOiJITUFDIixoYXNoOmBTSEEtJHtlLmFsZy5zdWJzdHIoLTMpfWB9LG49WyJzaWduIiwidmVyaWZ5Il07YnJlYWs7Y2FzZSJBMTI4Q0JDLUhTMjU2IjpjYXNlIkExOTJDQkMtSFMzODQiOmNhc2UiQTI1NkNCQy1IUzUxMiI6dGhyb3cgbmV3IEhlKGAke2UuYWxnfSBrZXlzIGNhbm5vdCBiZSBpbXBvcnRlZCBhcyBDcnlwdG9LZXkgaW5zdGFuY2VzYCk7Y2FzZSJBMTI4R0NNIjpjYXNlIkExOTJHQ00iOmNhc2UiQTI1NkdDTSI6Y2FzZSJBMTI4R0NNS1ciOmNhc2UiQTE5MkdDTUtXIjpjYXNlIkEyNTZHQ01LVyI6dD17bmFtZToiQUVTLUdDTSJ9LG49WyJlbmNyeXB0IiwiZGVjcnlwdCJdO2JyZWFrO2Nhc2UiQTEyOEtXIjpjYXNlIkExOTJLVyI6Y2FzZSJBMjU2S1ciOnQ9e25hbWU6IkFFUy1LVyJ9LG49WyJ3cmFwS2V5IiwidW53cmFwS2V5Il07YnJlYWs7Y2FzZSJQQkVTMi1IUzI1NitBMTI4S1ciOmNhc2UiUEJFUzItSFMzODQrQTE5MktXIjpjYXNlIlBCRVMyLUhTNTEyK0EyNTZLVyI6dD17bmFtZToiUEJLREYyIn0sbj1bImRlcml2ZUJpdHMiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBIZSgndW5zdXBwb3J0ZWQgb3IgaW52YWxpZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSJSU0EiOnN3aXRjaChlLmFsZyl7Y2FzZSJQUzI1NiI6Y2FzZSJQUzM4NCI6Y2FzZSJQUzUxMiI6dD17bmFtZToiUlNBLVBTUyIsaGFzaDpgU0hBLSR7ZS5hbGcuc3Vic3RyKC0zKX1gfSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiUlMyNTYiOmNhc2UiUlMzODQiOmNhc2UiUlM1MTIiOnQ9e25hbWU6IlJTQVNTQS1QS0NTMS12MV81IixoYXNoOmBTSEEtJHtlLmFsZy5zdWJzdHIoLTMpfWB9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJSU0EtT0FFUCI6Y2FzZSJSU0EtT0FFUC0yNTYiOmNhc2UiUlNBLU9BRVAtMzg0IjpjYXNlIlJTQS1PQUVQLTUxMiI6dD17bmFtZToiUlNBLU9BRVAiLGhhc2g6YFNIQS0ke3BhcnNlSW50KGUuYWxnLnN1YnN0cigtMyksMTApfHwxfWB9LG49ZS5kP1siZGVjcnlwdCIsInVud3JhcEtleSJdOlsiZW5jcnlwdCIsIndyYXBLZXkiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBIZSgndW5zdXBwb3J0ZWQgb3IgaW52YWxpZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSJFQyI6c3dpdGNoKGUuYWxnKXtjYXNlIkVTMjU2IjpjYXNlIkVTMzg0IjpjYXNlIkVTNTEyIjp0PXtuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZTplLmNydn0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIkVDREgtRVMiOmNhc2UiRUNESC1FUytBMTI4S1ciOmNhc2UiRUNESC1FUytBMTkyS1ciOmNhc2UiRUNESC1FUytBMjU2S1ciOnQ9e25hbWU6IkVDREgiLG5hbWVkQ3VydmU6ZS5jcnZ9LG49ZS5kP1siZGVyaXZlQml0cyJdOltdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEhlKCd1bnN1cHBvcnRlZCBvciBpbnZhbGlkIEpXSyAiYWxnIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKX1icmVhaztkZWZhdWx0OnRocm93IG5ldyBIZSgndW5zdXBwb3J0ZWQgb3IgaW52YWxpZCBKV0sgImt0eSIgKEtleSBUeXBlKSBQYXJhbWV0ZXIgdmFsdWUnKX1yZXR1cm57YWxnb3JpdGhtOnQsa2V5VXNhZ2VzOm59fShlKTtsZXQgbz0iandrIixpPXsuLi5lfTtyZXR1cm4gZGVsZXRlIGkuYWxnLCJQQktERjIiPT09ci5uYW1lJiYobz0icmF3IixpPWplKGUuaykpLERlKCksQmUuc3VidGxlLmltcG9ydEtleShvLGkscixudWxsIT09KHQ9ZS5leHQpJiZ2b2lkIDAhPT10JiZ0LG51bGwhPT0obj1lLmtleV9vcHMpJiZ2b2lkIDAhPT1uP246cyl9O2Z1bmN0aW9uIExlKGUpe3JldHVybiEhZSYmZS5jb25zdHJ1Y3Rvcj09PU9iamVjdH1hc3luYyBmdW5jdGlvbiBLZShlLHQsbil7aWYoIUxlKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkpXSyBtdXN0IGJlIGFuIG9iamVjdCIpO2lmKHR8fCh0PWUuYWxnKSwic3RyaW5nIiE9dHlwZW9mIHR8fCF0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJhbGciIGFyZ3VtZW50IGlzIHJlcXVpcmVkIHdoZW4gImp3ay5hbGciIGlzIG5vdCBwcmVzZW50Jyk7c3dpdGNoKGUua3R5KXtjYXNlIm9jdCI6aWYoInN0cmluZyIhPXR5cGVvZiBlLmt8fCFlLmspdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyAiayIgKEtleSBWYWx1ZSkgUGFyYW1ldGVyIHZhbHVlJyk7cmV0dXJuIG51bGwhPW58fChuPSEwIT09ZS5leHQpLG4/TmUoey4uLmUsYWxnOnQsZXh0OiExfSk6amUoZS5rKTtjYXNlIlJTQSI6aWYodm9pZCAwIT09ZS5vdGgpdGhyb3cgbmV3IEhlKCdSU0EgSldLICJvdGgiIChPdGhlciBQcmltZXMgSW5mbykgUGFyYW1ldGVyIHZhbHVlIGlzIHVuc3VwcG9ydGVkJyk7Y2FzZSJFQyI6Y2FzZSJPS1AiOnJldHVybiBOZSh7Li4uZSxhbGc6dH0pO2RlZmF1bHQ6dGhyb3cgbmV3IEhlKCd1bnN1cHBvcnRlZCAia3R5IiAoS2V5IFR5cGUpIFBhcmFtZXRlciB2YWx1ZScpfX1jb25zdCBKZT1hc3luYyhlLHQsbixyKT0+e2xldCBzO2lmKERlKCksdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2lmKCFlLnN0YXJ0c1dpdGgoIkhTIikpdGhyb3cgbmV3IFR5cGVFcnJvcigic3ltbWV0cmljIGtleXMgYXJlIG9ubHkgYXBwbGljYWJsZSBmb3IgSE1BQy1iYXNlZCBhbGdvcml0aG1zIik7cz1hd2FpdCBCZS5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLHQse2hhc2g6YFNIQS0ke2Uuc3Vic3RyKC0zKX1gLG5hbWU6IkhNQUMifSwhMSxbInZlcmlmeSJdKX1lbHNlIHM9dDtyZXR1cm4oKGUsdCk9PntpZihlLnN0YXJ0c1dpdGgoIkhTIikpe2NvbnN0IG49cGFyc2VJbnQoZS5zdWJzdHIoLTMpLDEwKSx7bGVuZ3RoOnJ9PXQuYWxnb3JpdGhtO2lmKCJudW1iZXIiIT10eXBlb2Ygcnx8cjxuKXRocm93IG5ldyBUeXBlRXJyb3IoYCR7ZX0gcmVxdWlyZXMgc3ltbWV0cmljIGtleXMgdG8gYmUgJHtufSBiaXRzIG9yIGxhcmdlcmApfWlmKGUuc3RhcnRzV2l0aCgiUlMiKXx8ZS5zdGFydHNXaXRoKCJQUyIpKXtjb25zdHttb2R1bHVzTGVuZ3RoOm59PXQuYWxnb3JpdGhtO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8bjwyMDQ4KXRocm93IG5ldyBUeXBlRXJyb3IoYCR7ZX0gcmVxdWlyZXMga2V5IG1vZHVsdXNMZW5ndGggdG8gYmUgMjA0OCBiaXRzIG9yIGxhcmdlcmApfX0pKGUscyksQmUuc3VidGxlLnZlcmlmeShmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSJIUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IkhNQUMifTtjYXNlIkhTMzg0IjpyZXR1cm57aGFzaDoiU0hBLTM4NCIsbmFtZToiSE1BQyJ9O2Nhc2UiSFM1MTIiOnJldHVybntoYXNoOiJTSEEtNTEyIixuYW1lOiJITUFDIn07Y2FzZSJQUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IlJTQS1QU1MiLHNhbHRMZW5ndGg6MzJ9O2Nhc2UiUFMzODQiOnJldHVybntoYXNoOiJTSEEtMzg0IixuYW1lOiJSU0EtUFNTIixzYWx0TGVuZ3RoOjQ4fTtjYXNlIlBTNTEyIjpyZXR1cm57aGFzaDoiU0hBLTUxMiIsbmFtZToiUlNBLVBTUyIsc2FsdExlbmd0aDo2NH07Y2FzZSJSUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJSUzM4NCI6cmV0dXJue2hhc2g6IlNIQS0zODQiLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJSUzUxMiI6cmV0dXJue2hhc2g6IlNIQS01MTIiLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJFUzI1NiI6cmV0dXJue2hhc2g6IlNIQS0yNTYiLG5hbWU6IkVDRFNBIixuYW1lZEN1cnZlOiJQLTI1NiJ9O2Nhc2UiRVMzODQiOnJldHVybntoYXNoOiJTSEEtMzg0IixuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZToiUC0zODQifTtjYXNlIkVTNTEyIjpyZXR1cm57aGFzaDoiU0hBLTUxMiIsbmFtZToiRUNEU0EiLG5hbWVkQ3VydmU6IlAtNTIxIn07ZGVmYXVsdDp0aHJvdyBuZXcgSGUoYGFsZyAke2V9IGlzIHVuc3VwcG9ydGVkIGVpdGhlciBieSBKT1NFIG9yIHlvdXIgamF2YXNjcmlwdCBydW50aW1lYCl9fShlKSxzLG4scil9O2NvbnN0IEZlPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKHZvaWQgMCE9PXIuY3JpdCYmdm9pZCAwPT09bi5jcml0KXRocm93IG5ldyBlKCciY3JpdCIgKENyaXRpY2FsKSBIZWFkZXIgUGFyYW1ldGVyIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZCcpO2lmKCFufHx2b2lkIDA9PT1uLmNyaXQpcmV0dXJuIG5ldyBTZXQ7aWYoIUFycmF5LmlzQXJyYXkobi5jcml0KXx8MD09PW4uY3JpdC5sZW5ndGh8fG4uY3JpdC5zb21lKChlPT4ic3RyaW5nIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aCkpKXRocm93IG5ldyBlKCciY3JpdCIgKENyaXRpY2FsKSBIZWFkZXIgUGFyYW1ldGVyIE1VU1QgYmUgYW4gYXJyYXkgb2Ygbm9uLWVtcHR5IHN0cmluZ3Mgd2hlbiBwcmVzZW50Jyk7Zm9yKGNvbnN0IHMgb2Ygbi5jcml0KXtpZighdC5oYXMocykpdGhyb3cgbmV3IEhlKGBFeHRlbnNpb24gSGVhZGVyIFBhcmFtZXRlciAiJHtzfSIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uYCk7aWYodm9pZCAwPT09cltzXSl0aHJvdyBuZXcgZShgRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIiR7c30iIGlzIG1pc3NpbmdgKTtpZih0LmdldChzKSYmdm9pZCAwPT09bltzXSl0aHJvdyBuZXcgZShgRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIiR7c30iIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZGApfXJldHVybiBuZXcgU2V0KG4uY3JpdCl9LmJpbmQodm9pZCAwLHFlLG5ldyBNYXAoW1siYjY0IiwhMF1dKSksJGU9KChlLHQpPT57aWYodm9pZCAwIT09dCYmKCFBcnJheS5pc0FycmF5KHQpfHx0LnNvbWUoKGU9PiJzdHJpbmciIT10eXBlb2YgZSkpKSl0aHJvdyBuZXcgVHlwZUVycm9yKGAiJHtlfSIgb3B0aW9uIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5nc2ApO2lmKHQpcmV0dXJuIG5ldyBTZXQodCl9KS5iaW5kKHZvaWQgMCwiYWxnb3JpdGhtcyIpO2FzeW5jIGZ1bmN0aW9uIHplKGUsdCxuKXtpZighTGUoZSkpdGhyb3cgbmV3IHFlKCJGbGF0dGVuZWQgSldTIG11c3QgYmUgYW4gb2JqZWN0Iik7aWYodm9pZCAwPT09ZS5wcm90ZWN0ZWQmJnZvaWQgMD09PWUuaGVhZGVyKXRocm93IG5ldyBxZSgnRmxhdHRlbmVkIEpXUyBtdXN0IGhhdmUgZWl0aGVyIG9mIHRoZSAicHJvdGVjdGVkIiBvciAiaGVhZGVyIiBtZW1iZXJzJyk7aWYodm9pZCAwIT09ZS5wcm90ZWN0ZWQmJiJzdHJpbmciIT10eXBlb2YgZS5wcm90ZWN0ZWQpdGhyb3cgbmV3IHFlKCJKV1MgUHJvdGVjdGVkIEhlYWRlciBpbmNvcnJlY3QgdHlwZSIpO2lmKHZvaWQgMD09PWUucGF5bG9hZCl0aHJvdyBuZXcgcWUoIkpXUyBQYXlsb2FkIG1pc3NpbmciKTtpZigic3RyaW5nIiE9dHlwZW9mIGUuc2lnbmF0dXJlKXRocm93IG5ldyBxZSgiSldTIFNpZ25hdHVyZSBtaXNzaW5nIG9yIGluY29ycmVjdCB0eXBlIik7aWYodm9pZCAwIT09ZS5oZWFkZXImJiFMZShlLmhlYWRlcikpdGhyb3cgbmV3IHFlKCJKV1MgVW5wcm90ZWN0ZWQgSGVhZGVyIGluY29ycmVjdCB0eXBlIik7bGV0IHI9e307aWYoZS5wcm90ZWN0ZWQpe2NvbnN0IHQ9amUoZS5wcm90ZWN0ZWQpO3I9SlNPTi5wYXJzZShJZS5kZWNvZGUodCkpfWlmKCEoKC4uLmUpPT57Y29uc3QgdD1lLmZpbHRlcihCb29sZWFuKTtpZigwPT09dC5sZW5ndGh8fDE9PT10Lmxlbmd0aClyZXR1cm4hMDtsZXQgbjtmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PU9iamVjdC5rZXlzKGUpO2lmKG4mJjAhPT1uLnNpemUpZm9yKGNvbnN0IGUgb2YgdCl7aWYobi5oYXMoZSkpcmV0dXJuITE7bi5hZGQoZSl9ZWxzZSBuPW5ldyBTZXQodCl9cmV0dXJuITB9KShyLGUuaGVhZGVyKSl0aHJvdyBuZXcgcWUoIkpXUyBQcm90ZWN0ZWQgYW5kIEpXUyBVbnByb3RlY3RlZCBIZWFkZXIgUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgZGlzam9pbnQiKTtjb25zdCBzPXsuLi5yLC4uLmUuaGVhZGVyfTtsZXQgbz0hMDtpZihGZShyLHMpLmhhcygiYjY0IikmJihvPXIuYjY0LCJib29sZWFuIiE9dHlwZW9mIG8pKXRocm93IG5ldyBxZSgnVGhlICJiNjQiIChiYXNlNjR1cmwtZW5jb2RlIHBheWxvYWQpIEhlYWRlciBQYXJhbWV0ZXIgbXVzdCBiZSBhIGJvb2xlYW4nKTtjb25zdHthbGc6aX09cztpZigic3RyaW5nIiE9dHlwZW9mIGl8fCFpKXRocm93IG5ldyBxZSgnSldTICJhbGciIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbWlzc2luZyBvciBpbnZhbGlkJyk7Y29uc3QgYT1uJiYkZShuLmFsZ29yaXRobXMpO2lmKGEmJiFhLmhhcyhpKSl0aHJvdyBuZXcgT2UoJyJhbGciIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbm90IGFsbG93ZWQnKTtpZihvKXtpZigic3RyaW5nIiE9dHlwZW9mIGUucGF5bG9hZCl0aHJvdyBuZXcgcWUoIkpXUyBQYXlsb2FkIG11c3QgYmUgYSBzdHJpbmciKX1lbHNlIGlmKCJzdHJpbmciIT10eXBlb2YgZS5wYXlsb2FkJiYhKGUucGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXRocm93IG5ldyBxZSgiSldTIFBheWxvYWQgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBVaW50OEFycmF5IGluc3RhbmNlIik7ImZ1bmN0aW9uIj09dHlwZW9mIHQmJih0PWF3YWl0IHQocixlKSksKChlLHQpPT57aWYoZS5zdGFydHNXaXRoKCJIUyIpfHwiZGlyIj09PWV8fGUuc3RhcnRzV2l0aCgiUEJFUzIiKXx8ZS5tYXRjaCgvXkFcZHszfSg/OkdDTSlLVyQvKSl7aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fCJzZWNyZXQiPT09dC50eXBlKXJldHVybjt0aHJvdyBuZXcgVHlwZUVycm9yKCdDcnlwdG9LZXkgb3IgS2V5T2JqZWN0IGluc3RhbmNlcyBmb3Igc3ltbWV0cmljIGFsZ29yaXRobXMgbXVzdCBiZSBvZiB0eXBlICJzZWNyZXQiJyl9aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ3J5cHRvS2V5IG9yIEtleU9iamVjdCBpbnN0YW5jZXMgbXVzdCBiZSB1c2VkIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobXMiKTtpZigic2VjcmV0Ij09PXQudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdDcnlwdG9LZXkgb3IgS2V5T2JqZWN0IGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG1zIG11c3Qgbm90IGJlIG9mIHR5cGUgInNlY3JldCInKX0pKGksdCk7Y29uc3QgYz1mdW5jdGlvbiguLi5lKXtjb25zdCB0PWUucmVkdWNlKCgoZSx7bGVuZ3RoOnR9KT0+ZSt0KSwwKSxuPW5ldyBVaW50OEFycmF5KHQpO2xldCByPTA7cmV0dXJuIGUuZm9yRWFjaCgoZT0+e24uc2V0KGUscikscis9ZS5sZW5ndGh9KSksbn0oQ2UuZW5jb2RlKGUucHJvdGVjdGVkfHwiIiksQ2UuZW5jb2RlKCIuIiksInN0cmluZyI9PXR5cGVvZiBlLnBheWxvYWQ/Q2UuZW5jb2RlKGUucGF5bG9hZCk6ZS5wYXlsb2FkKSx1PWplKGUuc2lnbmF0dXJlKTtpZighYXdhaXQgSmUoaSx0LHUsYykpdGhyb3cgbmV3IFVlO2xldCBsO2w9bz9qZShlLnBheWxvYWQpOiJzdHJpbmciPT10eXBlb2YgZS5wYXlsb2FkP0NlLmVuY29kZShlLnBheWxvYWQpOmUucGF5bG9hZDtjb25zdCBkPXtwYXlsb2FkOmx9O3JldHVybiB2b2lkIDAhPT1lLnByb3RlY3RlZCYmKGQucHJvdGVjdGVkSGVhZGVyPXIpLHZvaWQgMCE9PWUuaGVhZGVyJiYoZC51bnByb3RlY3RlZEhlYWRlcj1lLmhlYWRlciksZH1jb25zdCBHZT04NjQwMCxWZT0vXihcZCt8XGQrXC5cZCspID8oc2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KSQvaTt2YXIgWWU9ZT0+e2NvbnN0IHQ9VmUuZXhlYyhlKTtpZighdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIHRpbWUgcGVyaW9kIGZvcm1hdCIpO2NvbnN0IG49cGFyc2VGbG9hdCh0WzFdKTtzd2l0Y2godFsyXS50b0xvd2VyQ2FzZSgpKXtjYXNlInNlYyI6Y2FzZSJzZWNzIjpjYXNlInNlY29uZCI6Y2FzZSJzZWNvbmRzIjpjYXNlInMiOnJldHVybiBNYXRoLnJvdW5kKG4pO2Nhc2UibWludXRlIjpjYXNlIm1pbnV0ZXMiOmNhc2UibWluIjpjYXNlIm1pbnMiOmNhc2UibSI6cmV0dXJuIE1hdGgucm91bmQoNjAqbik7Y2FzZSJob3VyIjpjYXNlImhvdXJzIjpjYXNlImhyIjpjYXNlImhycyI6Y2FzZSJoIjpyZXR1cm4gTWF0aC5yb3VuZCgzNjAwKm4pO2Nhc2UiZGF5IjpjYXNlImRheXMiOmNhc2UiZCI6cmV0dXJuIE1hdGgucm91bmQobipHZSk7Y2FzZSJ3ZWVrIjpjYXNlIndlZWtzIjpjYXNlInciOnJldHVybiBNYXRoLnJvdW5kKDYwNDgwMCpuKTtkZWZhdWx0OnJldHVybiBNYXRoLnJvdW5kKDMxNTU3NjAwKm4pfX07Y29uc3QgWGU9ZT0+ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15hcHBsaWNhdGlvblwvLywiIik7dmFyIFFlPShlLHQsbj17fSk9Pntjb25zdHt0eXA6cn09bjtpZihyJiYoInN0cmluZyIhPXR5cGVvZiBlLnR5cHx8WGUoZS50eXApIT09WGUocikpKXRocm93IG5ldyB4ZSgndW5leHBlY3RlZCAidHlwIiBKV1QgaGVhZGVyIHZhbHVlJywidHlwIiwiY2hlY2tfZmFpbGVkIik7bGV0IHM7dHJ5e3M9SlNPTi5wYXJzZShJZS5kZWNvZGUodCkpfWNhdGNoKGUpe31pZigib2JqZWN0IiE9dHlwZW9mIHN8fCFzfHxBcnJheS5pc0FycmF5KHMpKXRocm93IG5ldyBNZSgiSldUIENsYWltcyBTZXQgbXVzdCBiZSBhIHRvcC1sZXZlbCBKU09OIG9iamVjdCIpO2NvbnN0e2lzc3VlcjpvfT1uO2lmKG8mJiEoInN0cmluZyI9PXR5cGVvZiBvP1tvXTpvKS5pbmNsdWRlcyhzLmlzcykpdGhyb3cgbmV3IHhlKCd1bmV4cGVjdGVkICJpc3MiIGNsYWltIHZhbHVlJywiaXNzIiwiY2hlY2tfZmFpbGVkIik7Y29uc3R7c3ViamVjdDppfT1uO2lmKGkmJnMuc3ViIT09aSl0aHJvdyBuZXcgeGUoJ3VuZXhwZWN0ZWQgInN1YiIgY2xhaW0gdmFsdWUnLCJzdWIiLCJjaGVja19mYWlsZWQiKTtjb25zdHthdWRpZW5jZTphfT1uO2lmKGEmJihjPXMuYXVkLHU9InN0cmluZyI9PXR5cGVvZiBhP1thXTphLCEoInN0cmluZyI9PXR5cGVvZiBjP3UuaW5jbHVkZXMoYyk6dS5zb21lKFNldC5wcm90b3R5cGUuaGFzLmJpbmQobmV3IFNldChjKSkpKSkpdGhyb3cgbmV3IHhlKCd1bmV4cGVjdGVkICJhdWQiIGNsYWltIHZhbHVlJywiYXVkIiwiY2hlY2tfZmFpbGVkIik7dmFyIGMsdTtsZXQgbDtzd2l0Y2godHlwZW9mIG4uY2xvY2tUb2xlcmFuY2Upe2Nhc2Uic3RyaW5nIjpsPVllKG4uY2xvY2tUb2xlcmFuY2UpO2JyZWFrO2Nhc2UibnVtYmVyIjpsPW4uY2xvY2tUb2xlcmFuY2U7YnJlYWs7Y2FzZSJ1bmRlZmluZWQiOmw9MDticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgY2xvY2tUb2xlcmFuY2Ugb3B0aW9uIHR5cGUiKX1jb25zdHtjdXJyZW50RGF0ZTpkfT1uLGg9KHA9ZHx8bmV3IERhdGUsTWF0aC5mbG9vcihwLmdldFRpbWUoKS8xZTMpKTt2YXIgcDtpZih2b2lkIDAhPT1zLmlhdHx8bi5tYXhUb2tlbkFnZSl7aWYoIm51bWJlciIhPXR5cGVvZiBzLmlhdCl0aHJvdyBuZXcgeGUoJyJpYXQiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJpYXQiLCJpbnZhbGlkIik7aWYodm9pZCAwPT09cy5leHAmJnMuaWF0PmgrbCl0aHJvdyBuZXcgeGUoJyJpYXQiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQgKGl0IHNob3VsZCBiZSBpbiB0aGUgcGFzdCknLCJpYXQiLCJjaGVja19mYWlsZWQiKX1pZih2b2lkIDAhPT1zLm5iZil7aWYoIm51bWJlciIhPXR5cGVvZiBzLm5iZil0aHJvdyBuZXcgeGUoJyJuYmYiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJuYmYiLCJpbnZhbGlkIik7aWYocy5uYmY+aCtsKXRocm93IG5ldyB4ZSgnIm5iZiIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsIm5iZiIsImNoZWNrX2ZhaWxlZCIpfWlmKHZvaWQgMCE9PXMuZXhwKXtpZigibnVtYmVyIiE9dHlwZW9mIHMuZXhwKXRocm93IG5ldyB4ZSgnImV4cCIgY2xhaW0gbXVzdCBiZSBhIG51bWJlcicsImV4cCIsImludmFsaWQiKTtpZihzLmV4cDw9aC1sKXRocm93IG5ldyBXZSgnImV4cCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsImV4cCIsImNoZWNrX2ZhaWxlZCIpfWlmKG4ubWF4VG9rZW5BZ2Upe2NvbnN0IGU9aC1zLmlhdDtpZihlLWw+KCJudW1iZXIiPT10eXBlb2Ygbi5tYXhUb2tlbkFnZT9uLm1heFRva2VuQWdlOlllKG4ubWF4VG9rZW5BZ2UpKSl0aHJvdyBuZXcgV2UoJyJpYXQiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQgKHRvbyBmYXIgaW4gdGhlIHBhc3QpJywiaWF0IiwiY2hlY2tfZmFpbGVkIik7aWYoZTwwLWwpdGhyb3cgbmV3IHhlKCciaWF0IiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkIChpdCBzaG91bGQgYmUgaW4gdGhlIHBhc3QpJywiaWF0IiwiY2hlY2tfZmFpbGVkIil9cmV0dXJuIHN9O2FzeW5jIGZ1bmN0aW9uIFplKGUsdCxuKXtjb25zdCByPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCxuKXtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheSYmKGU9SWUuZGVjb2RlKGUpKSwic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IHFlKCJDb21wYWN0IEpXUyBtdXN0IGJlIGEgc3RyaW5nIG9yIFVpbnQ4QXJyYXkiKTtjb25zdHswOnIsMTpzLDI6byxsZW5ndGg6aX09ZS5zcGxpdCgiLiIpO2lmKDMhPT1pKXRocm93IG5ldyBxZSgiSW52YWxpZCBDb21wYWN0IEpXUyIpO2NvbnN0IGE9YXdhaXQgemUoe3BheWxvYWQ6c3x8dm9pZCAwLHByb3RlY3RlZDpyfHx2b2lkIDAsc2lnbmF0dXJlOm98fHZvaWQgMH0sdCxuKTtyZXR1cm57cGF5bG9hZDphLnBheWxvYWQscHJvdGVjdGVkSGVhZGVyOmEucHJvdGVjdGVkSGVhZGVyfX0oZSx0LG4pO3JldHVybntwYXlsb2FkOlFlKHIucHJvdGVjdGVkSGVhZGVyLHIucGF5bG9hZCxuKSxwcm90ZWN0ZWRIZWFkZXI6ci5wcm90ZWN0ZWRIZWFkZXJ9fWNvbnN0IGV0PWU9PkFlLnN0cmluZ2lmeShlKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpLnJlcGxhY2UoLz0vZywiIiksdHQ9ZT0+KHtibG9iOihudWxsPT1lP3ZvaWQgMDplLmRhdGEpaW5zdGFuY2VvZiBCbG9iP251bGw9PWU/dm9pZCAwOmUuZGF0YTpudWxsLGRhdGE6SlNPTi5zdHJpbmdpZnkobnVsbCE9ZT9lOiIiKSxzdWNjZXNzOiEwfSksbnQ9ZT0+KChudWxsPT1lP3ZvaWQgMDplLnRvSlNPTikmJmRlbGV0ZSBlLnRvSlNPTix7ZXJyb3I6SlNPTi5zdHJpbmdpZnkobnVsbCE9ZT9lOiIiKSxzdWNjZXNzOiExfSkscnQ9ZT0+ZS5zdG9yYWdlPT09eWUuV2ViV29ya2VyO2Z1bmN0aW9uIHN0KGUpe2lmKGUmJnJ0KGUpKXtpZihlLnNlc3Npb24uZ2V0KFopKXJldHVybiBlLnNlc3Npb24uZ2V0KFopfWVsc2V7aWYoZSYmZS5yZXNwb25zZU1vZGU9PT13ZS5mb3JtUG9zdClyZXR1cm4gZS5hdXRob3JpemF0aW9uQ29kZTtpZihuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KFopKXJldHVybiBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KFopfXJldHVybiBudWxsfWZ1bmN0aW9uIG90KGUsdCl7Y29uc3Qgbj14dChlKTtpZighbnx8MD09PW4udHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGF1dGhvcml6ZSBlbmRwb2ludCBmb3VuZC4iKSk7bGV0IHI9bisiP3Jlc3BvbnNlX3R5cGU9Y29kZSZjbGllbnRfaWQ9IitlLmNsaWVudElELHM9bmU7aWYoZS5zY29wZSYmZS5zY29wZS5sZW5ndGg+MCYmKGUuc2NvcGUuaW5jbHVkZXMobmUpfHxlLnNjb3BlLnB1c2gobmUpLHM9ZS5zY29wZS5qb2luKCIgIikpLHIrPSImc2NvcGU9IitzLHIrPSImcmVkaXJlY3RfdXJpPSIrZS5zaWduSW5SZWRpcmVjdFVSTCxlLnJlc3BvbnNlTW9kZSYmKHIrPSImcmVzcG9uc2VfbW9kZT0iK2UucmVzcG9uc2VNb2RlKSxlLmVuYWJsZVBLQ0Upe2NvbnN0IHQ9ZXQoRWUucmFuZG9tKDMyKSksbj1ldChQZSh0KSk7cHQocmUsdCxlKSxyKz0iJmNvZGVfY2hhbGxlbmdlX21ldGhvZD1TMjU2JmNvZGVfY2hhbGxlbmdlPSIrbn1lLnByb21wdCYmKHIrPSImcHJvbXB0PSIrZS5wcm9tcHQpLHQmJihyKz0iJmZpZHA9Iit0KTtjb25zdCBvPWUuY3VzdG9tUGFyYW1zO2lmKG8pZm9yKGNvbnN0W2UsdF1vZiBPYmplY3QuZW50cmllcyhvKSkiIiE9ZSYmIiIhPXQmJihyKz0iJiIrZSsiPSIrdCk7aWYoZS5zdG9yYWdlPT09eWUuV2ViV29ya2VyKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6cixwa2NlOmZ0KHJlLGUpLHR5cGU6Z2V9KTtkb2N1bWVudC5sb2NhdGlvbi5ocmVmPXJ9ZnVuY3Rpb24gaXQoZSx0KXtjb25zdCBuPVV0KHQpO3JldHVybiBuJiYwIT09bi50cmltKCkubGVuZ3RoP0IuZ2V0KG4pLnRoZW4oKHI9PntpZigyMDAhPT1yLnN0YXR1cylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJGYWlsZWQgdG8gbG9hZCBwdWJsaWMga2V5cyBmcm9tIEpXS1MgVVJJOiAiK24pKTtjb25zdCBzPVd0KHQpLG89dC5zZXJ2ZXJPcmlnaW4rRC53ZWxsS25vd24uc3BsaXQoIi8ud2VsbC1rbm93biIpWzBdO3JldHVybiBzJiZzPT09bz8oKGUsdCk9Pntjb25zdCBuPUpTT04ucGFyc2UoYXRvYihlKSk7Zm9yKGNvbnN0IGUgb2YgdClpZihuLmtpZD09PWUua2lkKXJldHVybiBLZSh7YWxnOmUuYWxnLGU6ZS5lLGt0eTplLmt0eSxuOmUubn0pO3JldHVybiBQcm9taXNlLnJlamVjdCgiRmFpbGVkIHRvIGZpbmQgdGhlICdraWQnIHNwZWNpZmllZCBpbiB0aGUgaWRfdG9rZW4uICdraWQnIGZvdW5kIGluIHRoZSBoZWFkZXIgOiAiK24ua2lkKyIsIEV4cGVjdGVkIHZhbHVlczogIit0Lm1hcCgoZT0+ZS5raWQpKS5qb2luKCIsICIpKX0pKGUuc3BsaXQoIi4iKVswXSxyLmRhdGEua2V5cykudGhlbigobj0+KChlLHQsbixyLHMpPT5aZShlLHQse2FsZ29yaXRobXM6WyJSUzI1NiIsIlJTNTEyIiwiUlMzODQiLCJQUzI1NiJdLGF1ZGllbmNlOm4sY2xvY2tUb2xlcmFuY2U6NjAsaXNzdWVyOnIsc3ViamVjdDpzfSkudGhlbigoKCk9PlByb21pc2UucmVzb2x2ZSghMCkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKSkoZSxuLHQuY2xpZW50SUQscyxjdChlKS51c2VybmFtZSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTpQcm9taXNlLnJlc29sdmUoITEpfSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpOlByb21pc2UucmVqZWN0KCJJbnZhbGlkIEpXS1MgVVJJIGZvdW5kLiIpfWZ1bmN0aW9uIGF0KGUsdCl7Y29uc3Qgbj1PdChlKTtpZighbnx8MD09PW4udHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QoIkludmFsaWQgdG9rZW4gZW5kcG9pbnQgZm91bmQuIik7Y29uc3Qgcj1bXTtyZXR1cm4gci5wdXNoKGBjbGllbnRfaWQ9JHtlLmNsaWVudElEfWApLHIucHVzaChgcmVmcmVzaF90b2tlbj0ke3R9YCksci5wdXNoKCJncmFudF90eXBlPXJlZnJlc2hfdG9rZW4iKSxlLmNsaWVudFNlY3JldCYmZS5jbGllbnRTZWNyZXQudHJpbSgpLmxlbmd0aD4wJiZyLnB1c2goYGNsaWVudF9zZWNyZXQ9JHtlLmNsaWVudFNlY3JldH1gKSxCLnBvc3QobixyLmpvaW4oIiYiKSx7aGVhZGVyczp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uIiwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn19KS50aGVuKCh0PT57aWYoMjAwIT09dC5zdGF0dXMpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSByZWNlaXZlZCBpbiB0aGUgcmVmcmVzaCB0b2tlbiByZXNwb25zZTogIit0LnN0YXR1cykpO2lmKGUudmFsaWRhdGVJRFRva2VuKXJldHVybiBpdCh0LmRhdGEuaWRfdG9rZW4sZSkudGhlbigobj0+e2lmKG4pe2NvbnN0IG49e2FjY2Vzc1Rva2VuOnQuZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOnQuZGF0YS5leHBpcmVzX2luLGlkVG9rZW46dC5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjp0LmRhdGEucmVmcmVzaF90b2tlbixzY29wZTp0LmRhdGEuc2NvcGUsdG9rZW5UeXBlOnQuZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gZ3QobixjdCh0LmRhdGEuaWRfdG9rZW4pLGUpLFByb21pc2UucmVzb2x2ZShuKX1yZXR1cm4gUHJvbWlzZS5yZWplY3QoIkludmFsaWQgaWRfdG9rZW4gaW4gdGhlIHRva2VuIHJlc3BvbnNlOiAiK3QuZGF0YS5pZF90b2tlbil9KSk7e2NvbnN0IG49e2FjY2Vzc1Rva2VuOnQuZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOnQuZGF0YS5leHBpcmVzX2luLGlkVG9rZW46dC5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjp0LmRhdGEucmVmcmVzaF90b2tlbixzY29wZTp0LmRhdGEuc2NvcGUsdG9rZW5UeXBlOnQuZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gZ3QobixjdCh0LmRhdGEuaWRfdG9rZW4pLGUpLFByb21pc2UucmVzb2x2ZShuKX19KSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSl9Y29uc3QgY3Q9ZT0+e2NvbnN0IHQ9SlNPTi5wYXJzZShhdG9iKG51bGw9PWU/dm9pZCAwOmUuc3BsaXQoIi4iKVsxXSkpLG49dC5lbWFpbD90LmVtYWlsOm51bGwscj0oKGUsdD0iQCIpPT57aWYoZS50ZW5hbnRfZG9tYWluKXJldHVybiBlLnRlbmFudF9kb21haW47Y29uc3Qgbj1lLnN1Yi5zcGxpdCh0KTtyZXR1cm4gbltuLmxlbmd0aC0xXX0pKHQpO3JldHVybntkaXNwbGF5TmFtZTp0LnByZWZlcnJlZF91c2VybmFtZT90LnByZWZlcnJlZF91c2VybmFtZTp0LnN1YixlbWFpbDpuLHRlbmFudERvbWFpbjpyLHVzZXJuYW1lOnQuc3VifX07ZnVuY3Rpb24gdXQoZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuISFzdChlKX0oZSk/ZnVuY3Rpb24oZSl7Y29uc3QgdD1PdChlKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHRva2VuIGVuZHBvaW50IGZvdW5kLiIpKTtjb25zdCBuPXJ0KGUpP2Uuc2Vzc2lvbi5nZXQoaWUpOm5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoaWUpO251bGwhPT1uJiZuLmxlbmd0aD4wJiZwdChpZSxuLGUpO2NvbnN0IHI9W107ci5wdXNoKGBjbGllbnRfaWQ9JHtlLmNsaWVudElEfWApLGUuY2xpZW50U2VjcmV0JiZlLmNsaWVudFNlY3JldC50cmltKCkubGVuZ3RoPjAmJnIucHVzaChgY2xpZW50X3NlY3JldD0ke2UuY2xpZW50U2VjcmV0fWApO2NvbnN0IHM9cnQoZSk/ZS5zZXNzaW9uLmdldChaKTpzdChlKTtyZXR1cm4gci5wdXNoKGBjb2RlPSR7c31gKSxlLnN0b3JhZ2U9PT15ZS5TZXNzaW9uU3RvcmFnZSYmd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oWikmJndpbmRvdy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFopLHJ0KGUpJiZlLnNlc3Npb24uZ2V0KFopJiZlLnNlc3Npb24uZGVsZXRlKFopLHIucHVzaCgiZ3JhbnRfdHlwZT1hdXRob3JpemF0aW9uX2NvZGUiKSxyLnB1c2goYHJlZGlyZWN0X3VyaT0ke2Uuc2lnbkluUmVkaXJlY3RVUkx9YCksZS5lbmFibGVQS0NFJiYoci5wdXNoKGBjb2RlX3ZlcmlmaWVyPSR7ZnQocmUsZSl9YCksaHQocmUsZSkpLEIucG9zdCh0LHIuam9pbigiJiIpLHtoZWFkZXJzOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifX0pLnRoZW4oKHQ9PntpZigyMDAhPT10LnN0YXR1cylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlIHJlY2VpdmVkIGluIHRoZSB0b2tlbiByZXNwb25zZTogIit0LnN0YXR1cykpO2lmKGUudmFsaWRhdGVJRFRva2VuKXJldHVybiBpdCh0LmRhdGEuaWRfdG9rZW4sZSkudGhlbigobj0+e2lmKG4pe3B0KGNlLEpTT04uc3RyaW5naWZ5KGUpLGUpO2NvbnN0IG49e2FjY2Vzc1Rva2VuOnQuZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOnQuZGF0YS5leHBpcmVzX2luLGlkVG9rZW46dC5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjp0LmRhdGEucmVmcmVzaF90b2tlbixzY29wZTp0LmRhdGEuc2NvcGUsdG9rZW5UeXBlOnQuZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG4pfXJldHVybiBQcm9taXNlLnJlamVjdCgiSW52YWxpZCBpZF90b2tlbiBpbiB0aGUgdG9rZW4gcmVzcG9uc2U6ICIrdC5kYXRhLmlkX3Rva2VuKX0pKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTt7Y29uc3Qgbj17YWNjZXNzVG9rZW46dC5kYXRhLmFjY2Vzc190b2tlbixleHBpcmVzSW46dC5kYXRhLmV4cGlyZXNfaW4saWRUb2tlbjp0LmRhdGEuaWRfdG9rZW4scmVmcmVzaFRva2VuOnQuZGF0YS5yZWZyZXNoX3Rva2VuLHNjb3BlOnQuZGF0YS5zY29wZSx0b2tlblR5cGU6dC5kYXRhLnRva2VuX3R5cGV9O3JldHVybiBwdChjZSxKU09OLnN0cmluZ2lmeShlKSxlKSxQcm9taXNlLnJlc29sdmUobil9fSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfShlKS50aGVuKCh0PT4oZ3QodCxjdCh0LmlkVG9rZW4pLGUpLFByb21pc2UucmVzb2x2ZSh7dHlwZTptZX0pKSkpLmNhdGNoKCh0PT50LnJlc3BvbnNlJiY0MDA9PT10LnJlc3BvbnNlLnN0YXR1cz9vdChlKTpQcm9taXNlLnJlamVjdCh0KSkpOm90KGUsdCl9Y29uc3QgbHQ9KGUsdCk9PntpZighZnQoTCx0KXx8MD09PWZ0KEwsdCkudHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHRva2VuIGVuZHBvaW50IGZvdW5kLiIpKTtsZXQgbj0iIjtPYmplY3QuZW50cmllcyhlLmRhdGEpLm1hcCgoKFtyLHNdLG8pPT57Y29uc3QgaT0oKGUsdCk9PntsZXQgbj1uZTtyZXR1cm4gdC5zY29wZSYmdC5zY29wZS5sZW5ndGg+MCYmKHQuc2NvcGUuaW5jbHVkZXMobmUpfHx0LnNjb3BlLnB1c2gobmUpLG49dC5zY29wZS5qb2luKCIgIikpLGUucmVwbGFjZSgie3t0b2tlbn19IixmdChZLHQpKS5yZXBsYWNlKCJ7e3VzZXJuYW1lfX0iLGZ0KGhlLHQpKS5yZXBsYWNlKCJ7e3Njb3BlfX0iLG4pLnJlcGxhY2UoInt7Y2xpZW50SWR9fSIsdC5jbGllbnRJRCkucmVwbGFjZSgie3tjbGllbnRTZWNyZXR9fSIsdC5jbGllbnRTZWNyZXQpfSkocyx0KTtuKz1gJHtyfT0ke2l9JHtvIT09T2JqZWN0LmVudHJpZXMoZS5kYXRhKS5sZW5ndGgtMT8iJiI6IiJ9YH0pKTtjb25zdCByPXtkYXRhOm4saGVhZGVyczpPYmplY3QuYXNzaWduKHt9LHtBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSksbWV0aG9kOiJQT1NUIix1cmw6ZnQoTCx0KX07cmV0dXJuIGUuYXR0YWNoVG9rZW4mJihyLmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIuaGVhZGVycykse0F1dGhvcml6YXRpb246YEJlYXJlciAke2Z0KFksdCl9YH0pKSxCKHIpLnRoZW4oKG49PntpZigyMDAhPT1uLnN0YXR1cylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlIHJlY2VpdmVkIGluIHRoZSB0b2tlbiByZXNwb25zZTogIituLnN0YXR1cykpO2lmKGUucmV0dXJuc1Nlc3Npb24pe2lmKHQudmFsaWRhdGVJRFRva2VuKXJldHVybiBpdChuLmRhdGEuaWRfdG9rZW4sdCkudGhlbigocj0+e2lmKHIpe2NvbnN0IHI9e2FjY2Vzc1Rva2VuOm4uZGF0YS5hY2Nlc3NfdG9rZW4sZXhwaXJlc0luOm4uZGF0YS5leHBpcmVzX2luLGlkVG9rZW46bi5kYXRhLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjpuLmRhdGEucmVmcmVzaF90b2tlbixzY29wZTpuLmRhdGEuc2NvcGUsdG9rZW5UeXBlOm4uZGF0YS50b2tlbl90eXBlfTtyZXR1cm4gZ3QocixjdChyLmlkVG9rZW4pLHQpLGUucmV0dXJuUmVzcG9uc2U/UHJvbWlzZS5yZXNvbHZlKHtkYXRhOmR0KHQpLHR5cGU6bWV9KTpQcm9taXNlLnJlc29sdmUoITApfXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgaWRfdG9rZW4gaW4gdGhlIHRva2VuIHJlc3BvbnNlOiAiK24uZGF0YS5pZF90b2tlbikpfSkpO3tjb25zdCByPXthY2Nlc3NUb2tlbjpuLmRhdGEuYWNjZXNzX3Rva2VuLGV4cGlyZXNJbjpuLmRhdGEuZXhwaXJlc19pbixpZFRva2VuOm4uZGF0YS5pZF90b2tlbixyZWZyZXNoVG9rZW46bi5kYXRhLnJlZnJlc2hfdG9rZW4sc2NvcGU6bi5kYXRhLnNjb3BlLHRva2VuVHlwZTpuLmRhdGEudG9rZW5fdHlwZX07cmV0dXJuIGd0KHIsY3Qoci5pZFRva2VuKSx0KSxlLnJldHVyblJlc3BvbnNlP1Byb21pc2UucmVzb2x2ZSh7ZGF0YTpkdCh0KSx0eXBlOm1lfSk6UHJvbWlzZS5yZXNvbHZlKCEwKX19cmV0dXJuIGUucmV0dXJuUmVzcG9uc2U/UHJvbWlzZS5yZXNvbHZlKG4pOlByb21pc2UucmVzb2x2ZSghMCl9KSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSl9LGR0PWU9Pih7YWxsb3dlZFNjb3BlczpmdChvZSxlKSxkaXNwbGF5TmFtZTpmdChmZSxlKSxlbWFpbDpmdChwZSxlKSxzZXNzaW9uU3RhdGU6ZnQoaWUsZSksdGVuYW50RG9tYWluOmZ0KHVlLGUpLHVzZXJuYW1lOmZ0KGhlLGUpfSk7ZnVuY3Rpb24gaHQoZSx0KXtzd2l0Y2godC5zdG9yYWdlKXtjYXNlIHllLldlYldvcmtlcjp0LnNlc3Npb24uZGVsZXRlKGUpO2JyZWFrO2Nhc2UgeWUuU2Vzc2lvblN0b3JhZ2U6c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShlKTticmVhaztjYXNlIHllLkxvY2FsU3RvcmFnZTpsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShlKTticmVhaztkZWZhdWx0OnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oZSl9fWZ1bmN0aW9uIHB0KGUsdCxuKXtzd2l0Y2gobi5zdG9yYWdlKXtjYXNlIHllLldlYldvcmtlcjpuLnNlc3Npb24uc2V0KGUsdCk7YnJlYWs7Y2FzZSB5ZS5TZXNzaW9uU3RvcmFnZTpzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGUsdCk7YnJlYWs7Y2FzZSB5ZS5Mb2NhbFN0b3JhZ2U6bG9jYWxTdG9yYWdlLnNldEl0ZW0oZSx0KTticmVhaztkZWZhdWx0OnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oZSx0KX19ZnVuY3Rpb24gZnQoZSx0KXt2YXIgbjtzd2l0Y2godC5zdG9yYWdlKXtjYXNlIHllLldlYldvcmtlcjpyZXR1cm4gbnVsbD09PShuPW51bGw9PXQ/dm9pZCAwOnQuc2Vzc2lvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2V0KGUpO2Nhc2UgeWUuU2Vzc2lvblN0b3JhZ2U6cmV0dXJuIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSk7Y2FzZSB5ZS5Mb2NhbFN0b3JhZ2U6cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGUpO2RlZmF1bHQ6cmV0dXJuIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSl9fWZ1bmN0aW9uIG10KGUpe3Z0KGUpLGh0KFksZSksaHQoWCxlKSxodChRLGUpLGh0KGZlLGUpLGh0KHBlLGUpLGh0KHRlLGUpLGh0KHNlLGUpLGh0KG9lLGUpLGh0KHVlLGUpLGh0KGFlLGUpLGh0KGhlLGUpLGh0KGNlLGUpLGh0KGllLGUpfWZ1bmN0aW9uIGd0KGUsdCxuKXtwdChZLGUuYWNjZXNzVG9rZW4sbikscHQoWCxlLmV4cGlyZXNJbixuKSxwdChRLChEYXRlLm5vdygpLzFlMykudG9TdHJpbmcoKSxuKSxwdChmZSx0LmRpc3BsYXlOYW1lLG4pLHB0KHBlLHQuZW1haWwsbikscHQodGUsZS5pZFRva2VuLG4pLHB0KG9lLGUuc2NvcGUsbikscHQoc2UsZS5yZWZyZXNoVG9rZW4sbikscHQodWUsdC50ZW5hbnREb21haW4sbikscHQoYWUsZS50b2tlblR5cGUsbikscHQoaGUsdC51c2VybmFtZSxuKSx5dChuKX1jb25zdCB5dD1lPT57Y29uc3QgdD1wYXJzZUludChmdChYLGUpKSxuPXQ8PTEwP3Q6dC0xMDt2dChlKTtjb25zdCByPXNldFRpbWVvdXQoKCgpPT57YXQoZSxmdChzZSxlKSl9KSwxZTMqbik7cHQoZGUsSlNPTi5zdHJpbmdpZnkociksZSl9LHZ0PWU9PntpZihmdChkZSxlKSl7Y29uc3QgdD1KU09OLnBhcnNlKGZ0KGRlLGUpKTtjbGVhclRpbWVvdXQodCl9fSx3dD0oZSx0KT0+e3B0KE4sZSx0KX0sa3Q9KGUsdCk9PntwdChMLGUsdCl9LFN0PShlLHQpPT57cHQoSixlLHQpfSxidD0oZSx0KT0+e3B0KEYsZSx0KX0sX3Q9KGUsdCk9PntwdChLLGUsdCl9LEF0PWU9PntwdCgkLCJ0cnVlIixlKX0sRXQ9KGUsdCk9PntwdCh6LGUsdCl9LFB0PShlLHQpPT57cHQoRyxlLHQpfSxDdD0oZSx0KT0+e3B0KFYsZSx0KX0sSXQ9KGUsdCk9PntwdChsZSxlLHQpfSxUdD1lPT57cHQoZWUsZS5jbGllbnRJRCxlKX0sanQ9KGUsdCk9PntpZighdCYmRHQoZSkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IG49ZS5zZXJ2ZXJPcmlnaW47cmV0dXJuIEIuZ2V0KG4rRC53ZWxsS25vd24pLnRoZW4oKHQ9PjIwMCE9PXQuc3RhdHVzP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcigiRmFpbGVkIHRvIGxvYWQgT3BlbklEIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gZnJvbTogIituK0Qud2VsbEtub3duKSk6KCgoZSx0KT0+e3B0KCJvcGVuX2lkX2NvbmZpZyIsSlNPTi5zdHJpbmdpZnkoZSksdCl9KSh0LmRhdGEsZSksd3QodC5kYXRhLmF1dGhvcml6YXRpb25fZW5kcG9pbnQsZSksa3QodC5kYXRhLnRva2VuX2VuZHBvaW50LGUpLFN0KHQuZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCxlKSxidCh0LmRhdGEuandrc191cmksZSksX3QodC5kYXRhLnRva2VuX2VuZHBvaW50LnN1YnN0cmluZygwLHQuZGF0YS50b2tlbl9lbmRwb2ludC5sYXN0SW5kZXhPZigidG9rZW4iKSkrInJldm9rZSIsZSksSXQodC5kYXRhLmlzc3VlcixlKSxUdChlKSxDdCh0LmRhdGEuY2hlY2tfc2Vzc2lvbl9pZnJhbWUsZSksRXQoZS5zaWduSW5SZWRpcmVjdFVSTCxlKSxQdChlLnNpZ25PdXRSZWRpcmVjdFVSTCxlKSxBdChlKSxQcm9taXNlLnJlc29sdmUoIkluaXRpYWxpemVkIE9wZW5JRCBQcm92aWRlciBjb25maWd1cmF0aW9uIGZyb206ICIrbitELndlbGxLbm93bikpKSkuY2F0Y2goKCgpPT57dmFyIHQscixzLG8saSxhLGM7cmV0dXJuIHd0KGUuc2VydmVyT3JpZ2luKygobnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5hdXRob3JpemUpfHxELmF1dGhvcml6ZSksZSksa3QoZS5zZXJ2ZXJPcmlnaW4rKChudWxsPT09KHI9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludHMpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnRva2VuKXx8RC50b2tlbiksZSksX3QoZS5zZXJ2ZXJPcmlnaW4rKChudWxsPT09KHM9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludHMpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnJldm9rZSl8fEQucmV2b2tlKSxlKSxTdChlLnNlcnZlck9yaWdpbisoKG51bGw9PT0obz1udWxsPT1lP3ZvaWQgMDplLmVuZHBvaW50cyl8fHZvaWQgMD09PW8/dm9pZCAwOm8ubG9nb3V0KXx8RC5sb2dvdXQpLGUpLGJ0KG4rKChudWxsPT09KGk9bnVsbD09ZT92b2lkIDA6ZS5lbmRwb2ludHMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmp3a3MpfHxELmp3a3MpLGUpLEl0KGUuc2VydmVyT3JpZ2luKygobnVsbD09PShhPW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRzKXx8dm9pZCAwPT09YT92b2lkIDA6YS50b2tlbil8fEQudG9rZW4pLGUpLFR0KGUpLEN0KGUuc2VydmVyT3JpZ2luKygobnVsbD09PShjPW51bGw9PWU/dm9pZCAwOmUuZW5kcG9pbnRzKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5vaWRjU2Vzc2lvbklGcmFtZSl8fEQub2lkY1Nlc3Npb25JRnJhbWUpLGUpLEV0KGUuc2lnbkluUmVkaXJlY3RVUkwsZSksUHQoZS5zaWduT3V0UmVkaXJlY3RVUkwsZSksQXQoZSksUHJvbWlzZS5yZXNvbHZlKG5ldyBFcnJvcigiSW5pdGlhbGl6ZWQgT3BlbklEIFByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gZnJvbSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24uQmVjYXVzZSBmYWlsZWQgdG8gYWNjZXNzIHdlbGxrbm93biBlbmRwb2ludDogIituK0Qud2VsbEtub3duKSl9KSl9LFJ0PWU9PntlLnN0b3JhZ2UhPT15ZS5XZWJXb3JrZXI/KGh0KE4sZSksaHQoTCxlKSxodChKLGUpLGh0KEYsZSksaHQoSyxlKSxodCgkLGUpLGh0KGxlLGUpLGh0KGVlLGUpLGh0KCJ0ZW5hbnQiLGUpLGh0KHosZSksaHQoRyxlKSxodChWLGUpKTplLnNlc3Npb24uY2xlYXIoKX0seHQ9ZT0+ZnQoTixlKSxPdD1lPT5mdChMLGUpLEh0PWU9PmZ0KEssZSkscXQ9ZT0+ZnQoVixlKSxNdD1lPT5mdChKLGUpLFV0PWU9PmZ0KEYsZSksV3Q9ZT0+ZnQobGUsZSksQnQ9ZT0+ZnQoZWUsZSksRHQ9ZT0+KGU9PmUuc3RvcmFnZSE9PXllLldlYldvcmtlcj9mdCgkLGUpJiYidHJ1ZSI9PT1mdCgkLGUpOmUuc2Vzc2lvbi5nZXQoJCkmJiJ0cnVlIj09PWUuc2Vzc2lvbi5nZXQoJCkpKGUpJiYhIUJ0KGUpJiZCdChlKT09PWUuY2xpZW50SUQ7ZnVuY3Rpb24gTnQoZSl7dmFyIHQ7cmV0dXJuIGUuc3RvcmFnZT09PXllLlNlc3Npb25TdG9yYWdlJiYwPT09c2Vzc2lvblN0b3JhZ2UubGVuZ3RofHxlLnN0b3JhZ2U9PT15ZS5Mb2NhbFN0b3JhZ2UmJjA9PT1sb2NhbFN0b3JhZ2UubGVuZ3RofHxydChlKSYmMD09PShudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5zZXNzaW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zaXplKT9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIGxvZ2luIHNlc3Npb25zLiIpKTpmdW5jdGlvbihlKXtjb25zdCB0PU10KGUpO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIGxvZ291dCBlbmRwb2ludCBmb3VuZCBpbiB0aGUgc2Vzc2lvbi4iKSk7Y29uc3Qgbj1mdCh0ZSxlKTtpZighbnx8MD09PW4udHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGlkX3Rva2VuIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTtjb25zdCByPWZ0KEcsZSk7aWYoIXJ8fDA9PT1yLnRyaW0oKS5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiTm8gY2FsbGJhY2sgVVJMIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTttdChlKSxSdChlKTtjb25zdCBzPWAke3R9P2lkX3Rva2VuX2hpbnQ9JHtufSZwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9JHtyfSZzdGF0ZT1sb2dvdXRfc3VjY2Vzc2A7cmV0dXJuIHJ0KGUpP1Byb21pc2UucmVzb2x2ZShzKTood2luZG93LmxvY2F0aW9uLmhyZWY9cyxQcm9taXNlLnJlc29sdmUoITApKX0oZSl9Y29uc3QgTHQ9KCgpPT57bGV0IGUsdCxuO2NvbnN0IHI9bmV3IE1hcCxzPSgpPT4hIXIuZ2V0KFkpLG89KCk9PiEhci5nZXQoWSksaT10PT5mdW5jdGlvbihlLHQpe3JldHVybiBmdChZLGUpP0R0KGUpP1Byb21pc2UucmVzb2x2ZSh7dHlwZTptZX0pOihtdChlKSxSdChlKSxodCgiYXV0aF9jYWxsYmFja191cmwiLGUpLGp0KGUsITApLnRoZW4oKCgpPT51dChlLHQpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSkpOmp0KGUsITEpLnRoZW4oKCgpPT51dChlLHQpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSl9KGUsdCkudGhlbigodD0+e2lmKHQudHlwZT09PW1lKXtjb25zdCBuPU10KGUpO2lmKCFufHwwPT09bi50cmltKCkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIGxvZ291dCBlbmRwb2ludCBmb3VuZCBpbiB0aGUgc2Vzc2lvbi4iKSk7Y29uc3Qgcz1mdCh0ZSxlKTtpZighc3x8MD09PXMudHJpbSgpLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGlkX3Rva2VuIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTtjb25zdCBvPWZ0KEcsZSk7aWYoIW98fDA9PT1vLnRyaW0oKS5sZW5ndGgpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiTm8gY2FsbGJhY2sgVVJMIGZvdW5kIGluIHRoZSBzZXNzaW9uLiIpKTtjb25zdCBpPWAke259P2lkX3Rva2VuX2hpbnQ9JHtzfSZwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9JHtvfWA7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7ZGF0YTp7YWxsb3dlZFNjb3BlczpyLmdldChvZSksZGlzcGxheU5hbWU6ci5nZXQoZmUpLGVtYWlsOnIuZ2V0KHBlKSxsb2dvdXRVcmw6aSxzZXNzaW9uU3RhdGU6ci5nZXQoaWUpLHRlbmFudERvbWFpbjpyLmdldCh1ZSksdXNlcm5hbWU6ci5nZXQoaGUpfSx0eXBlOnQudHlwZX0pfXJldHVybiBQcm9taXNlLnJlc29sdmUodCl9KSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSksYT0oKT0+YXQoZSxyLmdldChZKSksYz0oKT0+TnQoZSksdT0oKT0+ZnVuY3Rpb24oZSx0KXtjb25zdCBuPUh0KGUpO2lmKCFufHwwPT09bi50cmltKCkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlamVjdCgiSW52YWxpZCByZXZva2UgdG9rZW4gZW5kcG9pbnQgZm91bmQuIik7Y29uc3Qgcj1bXTtyZXR1cm4gci5wdXNoKGBjbGllbnRfaWQ9JHtlLmNsaWVudElEfWApLHIucHVzaChgdG9rZW49JHt0fWApLHIucHVzaCgidG9rZW5fdHlwZV9oaW50PWFjY2Vzc190b2tlbiIpLEIucG9zdChuLHIuam9pbigiJiIpLHtoZWFkZXJzOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSx3aXRoQ3JlZGVudGlhbHM6ITB9KS50aGVuKChlPT4yMDAhPT1lLnN0YXR1cz9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUgcmVjZWl2ZWQgaW4gdGhlIHJldm9rZSB0b2tlbiByZXNwb25zZTogIitlLnN0YXR1cykpOlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfShlLHIuZ2V0KFkpKS50aGVuKCgoKT0+KG10KGUpLFJ0KGUpLFByb21pc2UucmVzb2x2ZSghMCkpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSksbD0oZSx0LG4pPT57ZSYmci5zZXQoWixlKSx0JiZyLnNldChpZSx0KSxyLnNldChyZSxuKX0sZD1uPT57bGV0IHI9ITE7cmV0dXJuIGUuYmFzZVVybHMuZm9yRWFjaCgoZT0+e3ZhciB0OyhudWxsPT09KHQ9bnVsbD09bj92b2lkIDA6bi51cmwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnN0YXJ0c1dpdGgoZSkpJiYocj0hMCl9KSkscj90LnJlcXVlc3QobikudGhlbigoZT0+UHJvbWlzZS5yZXNvbHZlKGUpKSkuY2F0Y2goKGU9Pnt2YXIgcjtyZXR1cm4gNDAxPT09KG51bGw9PT0ocj1udWxsPT1lP3ZvaWQgMDplLnJlc3BvbnNlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zdGF0dXMpP2EoKS50aGVuKCgoKT0+dChuKS50aGVuKChlPT5Qcm9taXNlLnJlc29sdmUoZSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKSkpLmNhdGNoKCgoKT0+UHJvbWlzZS5yZWplY3QoIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlZnJlc2hpbmcgdGhlIGFjY2VzcyB0b2tlbi4gVGhlIGFjY2VzcyB0b2tlbiBpcyBubyBtb3JlIHZhbGlkIGFuZCByZS1hdXRoZW50aWNhdGlvbiBpcyByZXF1aXJlZC4iKSkpOlByb21pc2UucmVqZWN0KGUpfSkpOlByb21pc2UucmVqZWN0KCJUaGUgcHJvdmlkZWQgVVJMIGlzIGlsbGVnYWwuIil9LGg9bj0+e2xldCByPSExO2UuYmFzZVVybHMuZm9yRWFjaCgoZT0+e24uZXZlcnkoKHQ9PnQudXJsLnN0YXJ0c1dpdGgoZSkpKSYmKHI9ITApfSkpO2NvbnN0IHM9bi5tYXAoKGU9PnQucmVxdWVzdChlKSkpO3JldHVybiByP0IuYWxsKHMpLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChlPT57dmFyIHQ7cmV0dXJuIDQwMT09PShudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5yZXNwb25zZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc3RhdHVzKT9hKCkudGhlbigoKCk9PkIuYWxsKHMpLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpKSkuY2F0Y2goKCgpPT5Qcm9taXNlLnJlamVjdCgiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVmcmVzaGluZyB0aGUgYWNjZXNzIHRva2VuLiBUaGUgYWNjZXNzIHRva2VuIGlzIG5vIG1vcmUgdmFsaWQgYW5kIHJlLWF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkLiIpKSk6UHJvbWlzZS5yZWplY3QoZSl9KSk6UHJvbWlzZS5yZWplY3QoIlRoZSBwcm92aWRlZCBVUkwgaXMgaWxsZWdhbC4iKX0scD10PT5sdCh0LGUpLGY9KCk9PmR0KGUpLG09KCk9PlByb21pc2UucmVzb2x2ZSgoZT0+KHthdXRob3JpemU6eHQoZSksandrczpVdChlKSxsb2dvdXQ6TXQoZSksb2lkY1Nlc3Npb25JRnJhbWU6cXQoZSkscmV2b2tlOkh0KGUpLHRva2VuOk90KGUpLHdlbGxLbm93bjpELndlbGxLbm93bn0pKShlKSksZz0oKT0+KGU9Pntjb25zdCB0PWZ0KHRlLGUpO3JldHVybiBKU09OLnBhcnNlKGF0b2IodC5zcGxpdCgiLiIpWzFdKSl9KShlKTtyZXR1cm57Z2V0SW5zdGFuY2U6eT0+bnx8KG49ZnVuY3Rpb24obil7dmFyIHksdix3LGssUyxiO3JldHVybiBlPU9iamVjdC5hc3NpZ24oe30sbiksci5jbGVhcigpLGUuc2Vzc2lvbj1yLGUuYXV0aG9yaXphdGlvbkNvZGUmJnIuc2V0KFosZS5hdXRob3JpemF0aW9uQ29kZSksZS5zZXNzaW9uU3RhdGUmJnIuc2V0KGllLGUuc2Vzc2lvblN0YXRlKSx0PVNlLmdldEluc3RhbmNlKCksdC5pbml0KCEwLChlPT57dmFyIHQscztlLmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGUuaGVhZGVycykse0F1dGhvcml6YXRpb246YEJlYXJlciAke251bGw9PXI/dm9pZCAwOnIuZ2V0KFkpfWB9KSwobnVsbD09PSh0PW4uaHR0cENsaWVudCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucmVxdWVzdFN0YXJ0Q2FsbGJhY2spJiYobnVsbD09PShzPW4uaHR0cENsaWVudCl8fHZvaWQgMD09PXN8fHMucmVxdWVzdFN0YXJ0Q2FsbGJhY2soKSl9KSxudWxsIT09KHY9bnVsbD09PSh5PW4uaHR0cENsaWVudCl8fHZvaWQgMD09PXk/dm9pZCAwOnkucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaykmJnZvaWQgMCE9PXY/djpudWxsLG51bGwhPT0oaz1udWxsPT09KHc9bi5odHRwQ2xpZW50KXx8dm9pZCAwPT09dz92b2lkIDA6dy5yZXF1ZXN0RXJyb3JDYWxsYmFjaykmJnZvaWQgMCE9PWs/azpudWxsLG51bGwhPT0oYj1udWxsPT09KFM9bi5odHRwQ2xpZW50KXx8dm9pZCAwPT09Uz92b2lkIDA6Uy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2spJiZ2b2lkIDAhPT1iP2I6bnVsbCkse2N1c3RvbUdyYW50OnAsZG9lc1Rva2VuRXhpc3Q6byxlbmRVc2VyU2Vzc2lvbjp1LGdldERlY29kZWRJRFRva2VuOmcsZ2V0U2VydmljZUVuZHBvaW50czptLGdldFVzZXJJbmZvOmYsaHR0cFJlcXVlc3Q6ZCxodHRwUmVxdWVzdEFsbDpoLGlzU2lnbmVkSW46cyxyZWZyZXNoQWNjZXNzVG9rZW46YSxzZXRBdXRoQ29kZTpsLHNpZ25JbjppLHNpZ25PdXQ6Y319KHkpLG4pfX0pKCksS3Q9c2VsZjtsZXQgSnQ7S3Qub25tZXNzYWdlPSh7ZGF0YTplLHBvcnRzOnR9KT0+e3ZhciBuLHIscyxvO2NvbnN0IGk9dFswXTtzd2l0Y2goZS50eXBlKXtjYXNlImluaXQiOnRyeXtjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sZS5kYXRhKTt0Lmh0dHBDbGllbnQ9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQuaHR0cENsaWVudCkse3JlcXVlc3RFcnJvckNhbGxiYWNrOkd0LHJlcXVlc3RGaW5pc2hDYWxsYmFjazp6dCxyZXF1ZXN0U3RhcnRDYWxsYmFjazpGdCxyZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrOiR0fSksSnQ9THQuZ2V0SW5zdGFuY2UodCksaS5wb3N0TWVzc2FnZSh0dCgpKX1jYXRjaChlKXtpLnBvc3RNZXNzYWdlKG50KGUpKX1icmVhaztjYXNlInNpZ24taW4iOkp0PygoKG51bGw9PT0obj1udWxsPT1lP3ZvaWQgMDplLmRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGUpfHwobnVsbD09PShyPW51bGw9PWU/dm9pZCAwOmUuZGF0YSl8fHZvaWQgMD09PXI/dm9pZCAwOnIucGtjZSkpJiZKdC5zZXRBdXRoQ29kZShlLmRhdGEuY29kZSxudWxsPT09KHM9bnVsbD09ZT92b2lkIDA6ZS5kYXRhKXx8dm9pZCAwPT09cz92b2lkIDA6cy5zZXNzaW9uU3RhdGUsbnVsbD09PShvPW51bGw9PWU/dm9pZCAwOmUuZGF0YSl8fHZvaWQgMD09PW8/dm9pZCAwOm8ucGtjZSksSnQuc2lnbkluKCJzdHJpbmciPT10eXBlb2YobnVsbD09ZT92b2lkIDA6ZS5kYXRhKSYmKG51bGw9PWU/dm9pZCAwOmUuZGF0YSkpLnRoZW4oKGU9PntlLnR5cGU9PT1tZT9pLnBvc3RNZXNzYWdlKHR0KHtkYXRhOmUuZGF0YSx0eXBlOm1lfSkpOmkucG9zdE1lc3NhZ2UodHQoe2NvZGU6ZS5jb2RlLHBrY2U6ZS5wa2NlLHR5cGU6Z2V9KSl9KSkuY2F0Y2goKGU9PntpLnBvc3RNZXNzYWdlKG50KGUpKX0pKSk6aS5wb3N0TWVzc2FnZShudCgiV29ya2VyIGhhcyBub3QgYmVlbiBpbml0aWF0ZWQuIikpO2JyZWFrO2Nhc2UiYXBpLWNhbGwiOmlmKCFKdCl7aS5wb3N0TWVzc2FnZShudCgiV29ya2VyIGhhcyBub3QgYmVlbiBpbml0aWF0ZWQuIikpO2JyZWFrfUp0LmlzU2lnbmVkSW4oKT9KdC5odHRwUmVxdWVzdChlLmRhdGEpLnRoZW4oKGU9PntpLnBvc3RNZXNzYWdlKHR0KGUpKX0pKS5jYXRjaCgoZT0+e2kucG9zdE1lc3NhZ2UobnQoZSkpfSkpOmkucG9zdE1lc3NhZ2UobnQoIllvdSBoYXZlIG5vdCBzaWduZWQgaW4geWV0LiIpKTticmVhaztjYXNlImFwaS1jYWxsLWFsbCI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9SnQuaXNTaWduZWRJbigpP0p0Lmh0dHBSZXF1ZXN0QWxsKGUuZGF0YSkudGhlbigoZT0+e2kucG9zdE1lc3NhZ2UodHQoZSkpfSkpLmNhdGNoKChlPT57aS5wb3N0TWVzc2FnZShudChlKSl9KSk6aS5wb3N0TWVzc2FnZShudCgiWW91IGhhdmUgbm90IHNpZ25lZCBpbiB5ZXQuIikpO2JyZWFrO2Nhc2UibG9nb3V0IjppZighSnQpe2kucG9zdE1lc3NhZ2UobnQoIldvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhdGVkLiIpKTticmVha31KdC5pc1NpZ25lZEluKCk/SnQuc2lnbk91dCgpLnRoZW4oKGU9PntlP2kucG9zdE1lc3NhZ2UodHQoZSkpOmkucG9zdE1lc3NhZ2UobnQoIlJlY2VpdmVkIG5vIHJlc3BvbnNlIikpfSkpLmNhdGNoKChlPT57aS5wb3N0TWVzc2FnZShudChlKSl9KSk6aS5wb3N0TWVzc2FnZShudCgiWW91IGhhdmUgbm90IHNpZ25lZCBpbiB5ZXQuIikpO2JyZWFrO2Nhc2UiY3VzdG9tLWdyYW50IjppZighSnQpe2kucG9zdE1lc3NhZ2UobnQoIldvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhdGVkLiIpKTticmVha31pZighSnQuaXNTaWduZWRJbigpJiZlLmRhdGEuc2lnbkluUmVxdWlyZWQpe2kucG9zdE1lc3NhZ2UobnQoIllvdSBoYXZlIG5vdCBzaWduZWQgaW4geWV0LiIpKTticmVha31KdC5jdXN0b21HcmFudChlLmRhdGEpLnRoZW4oKGU9PntpLnBvc3RNZXNzYWdlKHR0KGUpKX0pKS5jYXRjaCgoZT0+e2kucG9zdE1lc3NhZ2UobnQoZSkpfSkpO2JyZWFrO2Nhc2UiZW5kLXVzZXItc2Vzc2lvbiI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9aWYoIUp0LmlzU2lnbmVkSW4oKSYmZS5kYXRhLnNpZ25JblJlcXVpcmVkKXtpLnBvc3RNZXNzYWdlKG50KCJZb3UgaGF2ZSBub3Qgc2lnbmVkIGluIHlldC4iKSk7YnJlYWt9SnQuZW5kVXNlclNlc3Npb24oKS50aGVuKChlPT57aS5wb3N0TWVzc2FnZSh0dChlKSl9KSkuY2F0Y2goKGU9PntpLnBvc3RNZXNzYWdlKG50KGUpKX0pKTticmVhaztjYXNlImdldC1zZXJ2aWNlLWVuZHBvaW50cyI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9SnQuZ2V0U2VydmljZUVuZHBvaW50cygpLnRoZW4oKGU9PntpLnBvc3RNZXNzYWdlKHR0KGUpKX0pKS5jYXRjaCgoZT0+e2kucG9zdE1lc3NhZ2UobnQoZSkpfSkpO2JyZWFrO2Nhc2UiZ2V0LXVzZXItaW5mbyI6aWYoIUp0KXtpLnBvc3RNZXNzYWdlKG50KCJXb3JrZXIgaGFzIG5vdCBiZWVuIGluaXRpYXRlZC4iKSk7YnJlYWt9aWYoIUp0LmlzU2lnbmVkSW4oKSYmZS5kYXRhLnNpZ25JblJlcXVpcmVkKXtpLnBvc3RNZXNzYWdlKG50KCJZb3UgaGF2ZSBub3Qgc2lnbmVkIGluIHlldC4iKSk7YnJlYWt9dHJ5e2kucG9zdE1lc3NhZ2UodHQoSnQuZ2V0VXNlckluZm8oKSkpfWNhdGNoKGUpe2kucG9zdE1lc3NhZ2UobnQoZSkpfWJyZWFrO2Nhc2UiZ2V0LWRlY29kZWQtaWQtdG9rZW4iOmlmKCFKdCl7aS5wb3N0TWVzc2FnZShudCgiV29ya2VyIGhhcyBub3QgYmVlbiBpbml0aWF0ZWQuIikpO2JyZWFrfWlmKCFKdC5pc1NpZ25lZEluKCkmJmUuZGF0YS5zaWduSW5SZXF1aXJlZCl7aS5wb3N0TWVzc2FnZShudCgiWW91IGhhdmUgbm90IHNpZ25lZCBpbiB5ZXQuIikpO2JyZWFrfXRyeXtpLnBvc3RNZXNzYWdlKHR0KEp0LmdldERlY29kZWRJRFRva2VuKCkpKX1jYXRjaChlKXtpLnBvc3RNZXNzYWdlKG50KGUpKX1icmVhaztkZWZhdWx0Om51bGw9PWl8fGkucG9zdE1lc3NhZ2UobnQoYFVua25vd24gbWVzc2FnZSB0eXBlICR7bnVsbD09ZT92b2lkIDA6ZS50eXBlfWApKX19O2NvbnN0IEZ0PSgpPT57S3QucG9zdE1lc3NhZ2Uoe3R5cGU6InJlcXVlc3Qtc3RhcnQifSl9LCR0PWU9PntLdC5wb3N0TWVzc2FnZSh7ZGF0YTpKU09OLnN0cmluZ2lmeShudWxsIT1lP2U6IiIpLHR5cGU6InJlcXVlc3Qtc3VjY2VzcyJ9KX0senQ9KCk9PntLdC5wb3N0TWVzc2FnZSh7dHlwZToicmVxdWVzdC1maW5pc2gifSl9LEd0PWU9Pntjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sZSk7ZGVsZXRlIHQudG9KU09OLEt0LnBvc3RNZXNzYWdlKHtkYXRhOkpTT04uc3RyaW5naWZ5KG51bGwhPXQ/dDoiIiksdHlwZToicmVxdWVzdC1lcnJvciJ9KX07cmV0dXJue319KCk7Cgo=",null,!1),new Worker(Bc,l)}),Pc=function(){var l,c,e,i,t=!1,n=!1,d=function(c){var e=new MessageChannel;return l.postMessage(c,[e.port2]),new Promise((function(l,c){var t=setTimeout((function(){c("Operation timed out")}),i);return e.port1.onmessage=function(e){var i=e.data;if(clearTimeout(t),null==i?void 0:i.success){var n=JSON.parse(null==i?void 0:i.data);(null==i?void 0:i.blob)&&(n.data=null==i?void 0:i.blob),l(n)}else c(JSON.parse(i.error))}}))},Z=function(l){return t?!n&&l.signInRequired?Promise.reject("You have not signed in yet"):d({data:l,type:"custom-grant"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):Promise.reject("The object has not been initialized yet")},a=function(l){return t?n?d({data:l,type:"api-call"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):Promise.reject("You have not signed in yet"):Promise.reject("The object has not been initialized yet")},o=function(l){return t?n?d({data:l,type:"api-call-all"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):Promise.reject("You have not signed in yet"):Promise.reject("The object has not been initialized yet")},u=function(c){var n;return c.authorizationType&&"string"!=typeof c.authorizationType?Promise.reject("The authorizationType must be a string"):c.baseUrls instanceof Array?c.baseUrls.find((function(l){return"string"!=typeof l}))?Promise.reject("Array elements of baseUrls must all be string values"):"string"!=typeof c.signInRedirectURL?Promise.reject("The sign-in redirect URL must be a string"):"string"!=typeof c.signOutRedirectURL?Promise.reject("The sign-out redirect URL must be a string"):"string"!=typeof c.clientHost?Promise.reject("The clientHost must be a string"):"string"!=typeof c.clientID?Promise.reject("The clientID must be a string"):c.clientSecret&&"string"!=typeof c.clientSecret?Promise.reject("The clientString must be a string"):c.consentDenied&&"boolean"!=typeof c.consentDenied?Promise.reject("consentDenied must be a boolean"):c.enablePKCE&&"boolean"!=typeof c.enablePKCE?Promise.reject("enablePKCE must be a boolean"):c.prompt&&"string"!=typeof c.prompt?Promise.reject("The prompt must be a string"):c.responseMode&&"string"!=typeof c.responseMode?Promise.reject("The responseMode must be a string"):c.responseMode&&c.responseMode!==V.formPost&&c.responseMode!==V.query?Promise.reject("The responseMode is invalid"):!c.scope||c.scope instanceof Array?c.scope&&c.scope.find((function(l){return"string"!=typeof l}))?Promise.reject("Array elements of scope must all be string values"):"string"!=typeof c.serverOrigin?Promise.reject("serverOrigin must be a string"):(e={isHandlerEnabled:!0,requestErrorCallback:null,requestFinishCallback:null,requestStartCallback:null,requestSuccessCallback:null},i=null!==(n=null==c?void 0:c.requestTimeout)&&void 0!==n?n:6e4,l.onmessage=function(l){var c,i,t=l.data;switch(t.type){case"request-error":(null==e?void 0:e.requestErrorCallback)&&(null==e||e.requestErrorCallback(JSON.parse(null!==(c=t.data)&&void 0!==c?c:"")));break;case"request-finish":(null==e?void 0:e.requestFinishCallback)&&(null==e||e.requestFinishCallback());break;case"request-start":(null==e?void 0:e.requestStartCallback)&&(null==e||e.requestStartCallback());break;case"request-success":(null==e?void 0:e.requestSuccessCallback)&&(null==e||e.requestSuccessCallback(JSON.parse(null!==(i=t.data)&&void 0!==i?i:"")))}},d({data:c,type:"init"}).then((function(){return t=!0,Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)}))):Promise.reject("scope must be an array"):Promise.reject("baseUrls must be an array")},m=function(l){return t?El()||sessionStorage.getItem("pkce_code_verifier")?function(){var l=El(),c=new URL(window.location.href).searchParams.get("session_state"),e={data:{code:l,pkce:sessionStorage.getItem("pkce_code_verifier"),sessionState:c},type:"sign-in"};return history.pushState({},document.title,location.href.replace(/\?code=.*$/,"")),sessionStorage.removeItem("pkce_code_verifier"),sessionStorage.removeItem("code"),d(e).then((function(l){if("signed-in"===l.type){n=!0,sessionStorage.setItem("logout_url",l.data.logoutUrl);var c=l.data;return delete c.logoutUrl,Promise.resolve(c)}return"auth-required"===l.type&&l.code?(l.pkce&&sessionStorage.setItem("pkce_code_verifier",l.pkce),location.href=l.code,Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",tenantDomain:"",username:""})):"auth-required"!==l.type||l.code?Promise.reject("Something went wrong during authentication. Failed during signing in after getting the authorization code."):Promise.reject("Something went wrong during authentication after obtaining the authorization code. Re-authentication failed. No authorization url was received."+JSON.stringify(l))})).catch((function(l){return Promise.reject(l)}))}():d({data:l,type:"sign-in"}).then((function(l){if("signed-in"===l.type){n=!0,sessionStorage.setItem("logout_url",l.data.logoutUrl);var c=l.data;return delete c.logoutUrl,Promise.resolve(c)}return"auth-required"===l.type&&l.code?(l.pkce&&sessionStorage.setItem("pkce_code_verifier",l.pkce),location.href=l.code,Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",tenantDomain:"",username:""})):"auth-required"!==l.type||l.code?Promise.reject("Something went wrong during authentication.Unknown response received. "+JSON.stringify(l)):Promise.reject("Something went wrong during authentication. No authorization url was received."+JSON.stringify(l))})).catch((function(l){return Promise.reject(l)})):Promise.reject("Error while signing in. The object has not been initialized yet.")},b=function(){if(!n){if(sessionStorage.getItem("logout_url")){var l=sessionStorage.getItem("logout_url");return sessionStorage.removeItem("logout_url"),window.location.href=l,Promise.resolve(!0)}return Promise.reject("You have not signed in yet")}return d({type:"logout"}).then((function(l){return n=!1,window.location.href=l,Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)}))},s=function(){return n?d({type:"end-user-session"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):Promise.reject("You have not signed in yet")},p=function(){return d({type:"get-service-endpoints"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)}))},G=function(){return d({type:"get-user-info"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)}))},h=function(){return d({type:"get-decoded-id-token"}).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)}))},r=function(l){l&&"function"==typeof l&&(e.requestSuccessCallback=l)},W=function(l){l&&"function"==typeof l&&(e.requestErrorCallback=l)},X=function(l){l&&"function"==typeof l&&(e.requestStartCallback=l)},I=function(l){l&&"function"==typeof l&&(e.requestFinishCallback=l)};return{getInstance:function(){return c||(l=new jc,c={customGrant:Z,endUserSession:s,getDecodedIDToken:h,getServiceEndpoints:p,getUserInfo:G,httpRequest:a,httpRequestAll:o,initialize:u,onHttpRequestError:W,onHttpRequestFinish:I,onHttpRequestStart:X,onHttpRequestSuccess:r,signIn:m,signOut:b})}}}(),wc={authorizationType:"authorization_code",clientHost:origin,clientSecret:null,consentDenied:!1,enablePKCE:!0,responseMode:null,scope:["openid"],validateIDToken:!0},Ec=function(){function l(){Object(G.a)(this,l),this._startedInitialize=!1,this._onCustomGrant=new Map}return Object(h.a)(l,[{key:"initialize",value:function(l){var c,e=this;l.signOutRedirectURL||(l.signOutRedirectURL=l.signInRedirectURL),this._storage=null!==(c=l.storage)&&void 0!==c?c:W.SessionStorage,this._initialized=!1,this._startedInitialize=!0;return y(l)?(this._client=Pc.getInstance(),this._client.initialize(Object.assign(Object.assign({},wc),l)).then((function(){return e._onInitialize&&e._onInitialize(!0),e._initialized=!0,Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)}))):(this._authConfig=Object.assign(Object.assign({},wc),l),this._initialized=!0,this._httpClient=ol.getInstance(),this._httpClient.init(!0,(function(c){c.headers=Object.assign(Object.assign({},c.headers),{Authorization:"Bearer ".concat(dc("access_token",l))}),e._onHttpRequestStart&&"function"==typeof e._onHttpRequestStart&&e._onHttpRequestStart()}),this._onHttpRequestSuccess,this._onHttpRequestError,this._onHttpRequestFinish),this._onInitialize&&this._onInitialize(!0),Promise.resolve(!0))}},{key:"getUserInfo",value:function(){return this._storage===W.WebWorker?this._client.getUserInfo():Promise.resolve(cc(this._authConfig))}},{key:"validateAuthentication",value:function(){}},{key:"signIn",value:function(l){return r(this,void 0,void 0,a.a.mark((function c(){var e,i=this;return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(this._startedInitialize){c.next=2;break}return c.abrupt("return",Promise.reject("The object has not been initialized yet."));case 2:e=0;case 3:if(this._initialized){c.next=10;break}return 21===e&&console.warn("It is taking longer than usual for the object to be initialized"),c.next=7,new Promise((function(l){return setTimeout(l,500)}));case 7:e++;case 8:c.next=3;break;case 10:return c.abrupt("return",this._storage===W.WebWorker?this._client.signIn(l).then((function(l){return i._onSignInCallback&&(l.allowedScopes||l.displayName||l.email||l.username)&&i._onSignInCallback(l),Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):$l(this._authConfig,l).then((function(){if(i._onSignInCallback){var l=cc(i._authConfig);(l.allowedScopes||l.displayName||l.email||l.username)&&i._onSignInCallback(cc(i._authConfig))}return Promise.resolve(cc(i._authConfig))})).catch((function(l){return Promise.reject(l)})));case 11:case"end":return c.stop()}}),c,this)})))}},{key:"signOut",value:function(){return r(this,void 0,void 0,a.a.mark((function l(){return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this._storage===W.WebWorker?this._client.signOut().then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):vc(this._authConfig).then((function(l){return Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})));case 1:case"end":return l.stop()}}),l,this)})))}},{key:"httpRequest",value:function(l){return r(this,void 0,void 0,a.a.mark((function c(){return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this._storage===W.WebWorker?this._client.httpRequest(l):this._httpClient.request(l));case 1:case"end":return c.stop()}}),c,this)})))}},{key:"httpRequestAll",value:function(l){return r(this,void 0,void 0,a.a.mark((function c(){var e,i=this;return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(this._storage!==W.WebWorker){c.next=2;break}return c.abrupt("return",this._client.httpRequestAll(l));case 2:return e=[],c.abrupt("return",(l.forEach((function(l){e.push(i._httpClient.request(l))})),this._httpClient.all(e)));case 4:case"end":return c.stop()}}),c,this)})))}},{key:"customGrant",value:function(l){return r(this,void 0,void 0,a.a.mark((function c(){var e=this;return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(l.id){c.next=2;break}throw Error("No ID specified for the custom grant.");case 2:return c.abrupt("return",this._storage===W.WebWorker?this._client.customGrant(l).then((function(c){return e._onCustomGrant.get(l.id)&&e._onCustomGrant.get(l.id)(c),Promise.resolve(c)})).catch((function(l){return Promise.reject(l)})):lc(l,this._authConfig).then((function(c){return e._onCustomGrant.get(l.id)&&e._onCustomGrant.get(l.id)(c),Promise.resolve(c)})).catch((function(l){return Promise.reject(l)})));case 3:case"end":return c.stop()}}),c,this)})))}},{key:"endUserSession",value:function(){return r(this,void 0,void 0,a.a.mark((function l(){var c=this;return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this._storage===W.WebWorker?this._client.endUserSession().then((function(l){if(c._onEndUserSession)return c._onEndUserSession(l),Promise.resolve(l)})).catch((function(l){return Promise.reject(l)})):Al(this._authConfig,dc("access_token",this._authConfig)).then((function(l){if(Sc(c._authConfig),Zc(c._authConfig),c._onEndUserSession)return c._onEndUserSession(l),Promise.resolve(!0)})).catch((function(l){return Promise.reject(l)})));case 1:case"end":return l.stop()}}),l,this)})))}},{key:"getServiceEndpoints",value:function(){return r(this,void 0,void 0,a.a.mark((function l(){return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this._storage===W.WebWorker?this._client.getServiceEndpoints():Promise.resolve(Yc(this._authConfig)));case 1:case"end":return l.stop()}}),l,this)})))}},{key:"getHttpClient",value:function(){if(this._initialized)return this._httpClient;throw Error("Identity Client has not been initialized yet")}},{key:"getDecodedIDToken",value:function(){return this._storage===W.WebWorker?this._client.getDecodedIDToken():Promise.resolve(ec(this._authConfig))}},{key:"getAccessToken",value:function(){return this._storage===W.WebWorker?Promise.reject("The access token cannot be obtained when the storage type is set to webWorker."):function(l){var c=dc("access_token",l),e=dc("expires_in",l),i=dc("issued_at",l);if(!c||0===c.trim().length||!e||0===e.length||!i||0===i.length)return Zc(l),Promise.reject(new Error("Invalid user session."));function t(){var c=dc("expires_in",l),e=dc("issued_at",l);return parseInt(e,10)+parseInt(c,10)-Math.floor(Date.now()/1e3)}var n=t();return n<=300?ic.use((function(){return(n=t())<=300?Dl(JSON.parse(dc("request_params",l)),dc("refresh_token",l)).then((function(c){return ac(c,_l(c.idToken),l),Promise.resolve(c.accessToken)})).catch((function(l){return Promise.reject(l)})):Promise.resolve(dc("access_token",l))})):Promise.resolve(c)}(this._authConfig)}},{key:"refreshToken",value:function(){return this._storage===W.WebWorker?Promise.reject("The token is automatically refreshed when the storage type is set to webWorker."):Dl(this._authConfig,dc("refresh_token",this._authConfig))}},{key:"on",value:function(l,c,e){if(!c||"function"!=typeof c)throw Error("The callback function is not a valid function.");switch(l){case X.SignIn:this._onSignInCallback=c;break;case X.SignOut:this._onSignOutCallback=c,function(){var l=new URL(window.location.href).searchParams.get("state"),c=l&&"logout_success"===l;if(c){var e=new URL(window.location.href),i=new URLSearchParams(e.search.slice(1));i.delete("state");var t=window.location.href.split("?")[0]+"?"+i.toString();history.pushState({},document.title,t)}return c}()&&this._onSignOutCallback();break;case X.EndUserSession:this._onEndUserSession=c;break;case X.Initialize:this._onInitialize=c;break;case X.HttpRequestError:this._storage===W.WebWorker&&this._client.onHttpRequestError(c),this._onHttpRequestError=c;break;case X.HttpRequestFinish:this._storage===W.WebWorker&&this._client.onHttpRequestFinish(c),this._onHttpRequestFinish=c;break;case X.HttpRequestStart:this._storage===W.WebWorker&&this._client.onHttpRequestStart(c),this._onHttpRequestStart=c;break;case X.HttpRequestSuccess:this._storage===W.WebWorker&&this._client.onHttpRequestSuccess(c),this._onHttpRequestSuccess=c;break;case X.CustomGrant:this._onCustomGrant.set(e,c);break;default:throw Error("No such hook found")}}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new l),this._instance}}]),l}();Worker}).call(this,e(33),e(21),e(43).setImmediate)},42:function(l,c,e){l.exports=e(78)},77:function(l,c,e){},78:function(l,c,e){"use strict";e.r(c);var i=e(10),t=e(0),n=e.n(t),d=e(29),Z=e.n(d),a=e(16),o=e(2),u=e(5),m=e(4),b=Object(u.atom)({default:!1,key:"authState"}),s=Object(u.atom)({default:"",key:"displayName"}),p=[{component:function(){var l=Object(u.useRecoilState)(b),c=Object(m.a)(l,2),e=c[0],n=c[1],d=Object(u.useSetRecoilState)(s),Z=Object(o.g)();return Object(t.useEffect)((function(){if(e)Z.push("/dashboard");else{var l=i.b.getInstance();l.on(i.a.SignIn,(function(l){n(!0),d(l.displayName)})),l.signIn()}}),[e,Z,n,d]),null},path:"/sign-in",protected:!1},{component:function(){var l=Object(o.g)();return Object(t.useEffect)((function(){i.b.getInstance().signOut()}),[l]),null},path:"/sign-out",protected:!1},{component:function(){var l=Object(o.g)(),c=i.b.getInstance(),e=Object(t.useState)(""),d=Object(m.a)(e,2),Z=d[0],a=d[1],p=Object(t.useState)(""),G=Object(m.a)(p,2),h=G[0],r=G[1],W=Object(t.useState)(""),X=Object(m.a)(W,2),V=X[0],I=X[1],y=Object(u.useRecoilState)(b),S=Object(m.a)(y,1)[0],Y=Object(u.useRecoilState)(s),K=Object(m.a)(Y,1)[0],J=Object(t.useState)(!1),N=Object(m.a)(J,2),R=N[0],k=N[1];return Object(t.useEffect)((function(){c.on(i.a.SignOut,(function(){k(!0)}))}),[c]),n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"menu"},n.a.createElement("button",{onClick:function(){S?alert("You have already signed in!"):(k(!1),l.push("/sign-in"))}},"Sign In"),n.a.createElement("button",{onClick:function(){S?l.push("/sign-out"):alert("You haven't signed in!")}},"Sign Out"),n.a.createElement("button",{onClick:function(){S?c.httpRequest({headers:{Accept:"application/json"},method:"GET",url:"https://localhost:9443/api/identity/user/v1.0/me"}).then((function(l){a(l.data.basic["http://wso2.org/claims/emailaddress"]),r(l.data.basic["http://wso2.org/claims/lastname"]),I(l.data.basic["http://wso2.org/claims/role"])})):alert("Please sign in first!")}},"Get user info")),n.a.createElement("div",{id:"greeting"},S&&"Hi, "+K+"!",R&&"You have logged out!"),n.a.createElement("div",{className:"details"},n.a.createElement("div",{id:"email"},Z&&"Email: "+Z),n.a.createElement("div",{id:"lastName"},h&&"Last Name: "+h),n.a.createElement("div",{id:"roles"},V&&"Roles: "+V)))},path:"/dashboard",protected:!1}],G=function(l){var c=l.path,e=l.component,i=l.exact,t=Object(u.useRecoilState)(b);return Object(m.a)(t,1)[0]?n.a.createElement(o.b,{path:c,component:e,exact:i}):n.a.createElement(o.a,{to:"/sign-in"})};var h=function(){return n.a.createElement(u.RecoilRoot,null,n.a.createElement(a.a,null,n.a.createElement(o.d,null,p.map((function(l,c){return l.protected?n.a.createElement(G,{path:l.path,component:l.component,exact:!0,key:c}):n.a.createElement(o.b,{key:c,path:l.path,component:l.component,exact:!0})})),n.a.createElement(o.a,{to:"/dashboard",path:"*"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));e(77);var r="https://asgardio-js-oidc-sdk-sample.herokuapp.com";i.b.getInstance().initialize({baseUrls:["https://dev.portal.asgardio.io/t/brionmario"],clientID:"8ArfnSYzSDxDR3cPDFy1lo2r1rEa",serverOrigin:"https://dev.portal.asgardio.io/t/brionmario",signInRedirectURL:r+"/sign-in",signOutRedirectURL:r+"/dashboard",storage:i.c.WebWorker}),console.log(origin),Z.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(l){l.unregister()})).catch((function(l){console.error(l.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.fb5b6aab.chunk.js.map